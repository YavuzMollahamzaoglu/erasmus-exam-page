{"ast":null,"code":"var _jsxFileName = \"/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/components/TopicPreview.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Box, Chip, LinearProgress, Typography, Tooltip } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = ['#00b894', '#0984e3', '#fdcb6e', '#e17055', '#6c5ce7', '#00cec9'];\nconst TopicPreview = ({\n  category,\n  series,\n  categoryId,\n  seriesId\n}) => {\n  _s();\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n  const [loading, setLoading] = useState(true);\n  const [topics, setTopics] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (category) params.set('category', category);\n    if (series) params.set('series', series);\n    if (categoryId) params.set('categoryId', String(categoryId));\n    if (seriesId) params.set('seriesId', String(seriesId));\n    params.set('limit', '60');\n    setLoading(true);\n    fetch(`${API_URL}/api/topics/preview?${params.toString()}`).then(async r => {\n      const ct = r.headers.get('content-type') || '';\n      if (!r.ok || !ct.includes('application/json')) {\n        throw new Error(`status ${r.status}`);\n      }\n      return r.json();\n    }).then(json => {\n      setTopics(json.topics || []);\n      setTotal(json.total || 0);\n      setLoading(false);\n    }).catch(e => {\n      setError('öngörü alınamadı');\n      setLoading(false);\n    });\n  }, [category, series, categoryId, seriesId]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n        sx: {\n          height: 6,\n          borderRadius: 3,\n          bgcolor: 'rgba(0,0,0,0.06)',\n          '& .MuiLinearProgress-bar': {\n            bgcolor: '#00b894'\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !topics.length) return null;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 1.25\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        gap: 1,\n        flexWrap: 'wrap',\n        mb: 1\n      },\n      children: topics.slice(0, 4).map((t, i) => {\n        var _t$percentage;\n        return /*#__PURE__*/_jsxDEV(Chip, {\n          size: \"small\",\n          label: `${t.name} • ${(_t$percentage = t.percentage) !== null && _t$percentage !== void 0 ? _t$percentage : Math.round(t.count / (total || 1) * 100)}% • ${t.count} soru`,\n          sx: {\n            bgcolor: `${COLORS[i % COLORS.length]}22`,\n            color: '#004d40',\n            border: `1px solid ${COLORS[i % COLORS.length]}55`\n          }\n        }, t.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        height: 8,\n        borderRadius: 6,\n        overflow: 'hidden',\n        bgcolor: 'rgba(0,0,0,0.06)'\n      },\n      children: topics.map((t, i) => {\n        var _t$percentage2;\n        const pct = (_t$percentage2 = t.percentage) !== null && _t$percentage2 !== void 0 ? _t$percentage2 : Math.round(t.count / (total || 1) * 100);\n        return /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: `${t.name}: ${pct}% (${t.count})`,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: `${pct}%`,\n              bgcolor: COLORS[i % COLORS.length]\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }, t.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"caption\",\n      sx: {\n        color: '#546e7a'\n      },\n      children: [total, \" sorudan \\xF6ng\\xF6r\\xFC\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(TopicPreview, \"zn3TSPgUQClxifISjj7gFLUlsM4=\");\n_c = TopicPreview;\nexport default TopicPreview;\nvar _c;\n$RefreshReg$(_c, \"TopicPreview\");","map":{"version":3,"names":["React","useEffect","useState","Box","Chip","LinearProgress","Typography","Tooltip","jsxDEV","_jsxDEV","COLORS","TopicPreview","category","series","categoryId","seriesId","_s","API_URL","process","env","REACT_APP_API_URL","loading","setLoading","topics","setTopics","total","setTotal","error","setError","params","URLSearchParams","set","String","fetch","toString","then","r","ct","headers","get","ok","includes","Error","status","json","catch","e","sx","mt","children","height","borderRadius","bgcolor","fileName","_jsxFileName","lineNumber","columnNumber","length","display","gap","flexWrap","mb","slice","map","t","i","_t$percentage","size","label","name","percentage","Math","round","count","color","border","overflow","_t$percentage2","pct","title","width","variant","_c","$RefreshReg$"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/components/TopicPreview.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Chip, LinearProgress, Typography, Tooltip } from '@mui/material';\n\ntype Topic = { name: string; count: number; percentage?: number };\n\ninterface Props {\n  category?: string; // A1, A2, ... or id\n  series?: string; // Erasmus, Genel İngilizce ... or id\n  categoryId?: number;\n  seriesId?: string;\n}\n\nconst COLORS = ['#00b894', '#0984e3', '#fdcb6e', '#e17055', '#6c5ce7', '#00cec9'];\n\nconst TopicPreview: React.FC<Props> = ({ category, series, categoryId, seriesId }) => {\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n  const [loading, setLoading] = useState(true);\n  const [topics, setTopics] = useState<Topic[]>([]);\n  const [total, setTotal] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (category) params.set('category', category);\n    if (series) params.set('series', series);\n    if (categoryId) params.set('categoryId', String(categoryId));\n    if (seriesId) params.set('seriesId', String(seriesId));\n    params.set('limit', '60');\n\n    setLoading(true);\n    fetch(`${API_URL}/api/topics/preview?${params.toString()}`)\n      .then(async (r) => {\n        const ct = r.headers.get('content-type') || '';\n        if (!r.ok || !ct.includes('application/json')) {\n          throw new Error(`status ${r.status}`);\n        }\n        return r.json();\n      })\n      .then(json => {\n        setTopics(json.topics || []);\n        setTotal(json.total || 0);\n        setLoading(false);\n      })\n      .catch((e) => {\n        setError('öngörü alınamadı');\n        setLoading(false);\n      });\n  }, [category, series, categoryId, seriesId]);\n\n  if (loading) {\n    return (\n      <Box sx={{ mt: 1 }}>\n        <LinearProgress sx={{ height: 6, borderRadius: 3, bgcolor: 'rgba(0,0,0,0.06)', '& .MuiLinearProgress-bar': { bgcolor: '#00b894' } }} />\n      </Box>\n    );\n  }\n  if (error || !topics.length) return null;\n\n  return (\n    <Box sx={{ mt: 1.25 }}>\n      <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n        {topics.slice(0, 4).map((t, i) => (\n          <Chip key={t.name}\n            size=\"small\"\n            label={`${t.name} • ${t.percentage ?? Math.round((t.count/(total||1))*100)}% • ${t.count} soru`}\n            sx={{ bgcolor: `${COLORS[i % COLORS.length]}22`, color: '#004d40', border: `1px solid ${COLORS[i % COLORS.length]}55` }}\n          />\n        ))}\n      </Box>\n      <Box sx={{ display: 'flex', height: 8, borderRadius: 6, overflow: 'hidden', bgcolor: 'rgba(0,0,0,0.06)' }}>\n        {topics.map((t, i) => {\n          const pct = (t.percentage ?? Math.round((t.count/(total||1))*100));\n          return (\n            <Tooltip key={t.name} title={`${t.name}: ${pct}% (${t.count})`}>\n              <Box sx={{ width: `${pct}%`, bgcolor: COLORS[i % COLORS.length] }} />\n            </Tooltip>\n          );\n        })}\n      </Box>\n      <Typography variant=\"caption\" sx={{ color: '#546e7a' }}>{total} sorudan öngörü</Typography>\n    </Box>\n  );\n};\n\nexport default TopicPreview;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}