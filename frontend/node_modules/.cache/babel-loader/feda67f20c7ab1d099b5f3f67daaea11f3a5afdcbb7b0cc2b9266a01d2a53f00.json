{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useParams,useLocation,useNavigate}from'react-router-dom';import{Box,Paper,Typography,Button,CircularProgress,IconButton}from'@mui/material';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import ArrowForwardIcon from'@mui/icons-material/ArrowForward';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Exam=()=>{const{testId}=useParams();const location=useLocation();const navigate=useNavigate();const[questions,setQuestions]=useState([]);const[loading,setLoading]=useState(true);const[current,setCurrent]=useState(0);const[selected,setSelected]=useState(null);const[showResult,setShowResult]=useState(false);const[showExplanation,setShowExplanation]=useState(false);const[score,setScore]=useState(0);const[mistakes,setMistakes]=useState(0);const[showSummary,setShowSummary]=useState(false);const[time,setTime]=useState(0);const[reviewMode,setReviewMode]=useState(false);const[answers,setAnswers]=useState([]);const[timerPaused,setTimerPaused]=useState(false);const timerRef=useRef(null);const[error,setError]=useState(null);// Helper function to format text: first letter uppercase, rest lowercase\nconst formatText=text=>{if(!text||text.length===0)return text;return text.charAt(0).toUpperCase()+text.slice(1).toLowerCase();};// Helper function for case insensitive comparison\nconst compareAnswers=(answer1,answer2)=>{return answer1.toLowerCase()===answer2.toLowerCase();};useEffect(()=>{var _location$state;// Fetch if no state or empty state provided\nif(!((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.questions)||location.state.questions.length===0){setLoading(true);setError(null);// For dynamic tests, use the questions endpoint directly with filters\nconst API_URL=process.env.REACT_APP_API_URL||'http://localhost:4000';let apiUrl;if(testId==='dynamic'||testId!==null&&testId!==void 0&&testId.startsWith('dynamic-')){apiUrl=`${API_URL}/api/questions`;// Add category filter based on testId and lock series to Erasmus Sınavı\n// so Üniversite Hazırlık soruları dinamik Erasmus kartlarına karışmasın.\nconst params=new URLSearchParams();if(testId==='dynamic-a1'){params.set('category','A1');}else if(testId==='dynamic-a2'||testId==='dynamic'){params.set('category','A2');}else if(testId==='dynamic-b1'){params.set('category','B1');}else if(testId==='dynamic-b2'){params.set('category','B2');}// Restrict to Erasmus series explicitly\nparams.set('series','Erasmus Sınavı');apiUrl+=`?${params.toString()}`;}else{apiUrl=`${API_URL}/api/tests/${testId}/questions`;}console.log(`Fetching questions from: ${apiUrl}`);const load=async()=>{try{const res=await fetch(apiUrl);console.log('API Response status:',res.status);if(!res.ok)throw new Error(`Request failed with status ${res.status}`);const data=await res.json();let questionsData=data.questions||data||[];// Fallback: if tests endpoint returned empty, try querying by seriesId directly\nif((!questionsData||questionsData.length===0)&&testId&&!(testId==='dynamic'||testId.startsWith('dynamic-'))){const API_URL2=process.env.REACT_APP_API_URL||'http://localhost:4000';const altUrl=`${API_URL2}/api/questions?seriesId=${encodeURIComponent(testId)}`;console.log('Primary returned empty, trying fallback:',altUrl);const res2=await fetch(altUrl);if(res2.ok){const d2=await res2.json();questionsData=d2.questions||d2||[];}}console.log('Questions data length:',questionsData.length);const formattedQuestions=questionsData.map(q=>{// Parse options if they're in string format\nlet optionsArray=[];if(Array.isArray(q.options)){optionsArray=q.options.map(formatText);}else if(typeof q.options==='string'){try{optionsArray=JSON.parse(q.options).map(formatText);}catch{optionsArray=[];}}// Convert correct answer to letter if it's a word\nlet correctLetter=q.correct;if(q.correct&&q.correct.length>1){// If correct is a word, find its index in options and convert to letter\nconst correctIndex=optionsArray.findIndex(option=>option.toLowerCase()===q.correct.toLowerCase());if(correctIndex!==-1){correctLetter=String.fromCharCode(65+correctIndex);// A, B, C, D\nconsole.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);}}return{...q,options:optionsArray,correct:correctLetter};});console.log(`Loaded ${formattedQuestions.length} questions`);setQuestions(formattedQuestions);setLoading(false);}catch(error){console.error('Failed to fetch questions:',error);setError('Sunucuya ulaşılamıyor. Lütfen sunucuyu başlatıp tekrar deneyin.');setLoading(false);}};load();}else{// Format questions from state as well\nconst formattedQuestions=location.state.questions.map(q=>{// Parse options if they're in string format\nlet optionsArray=[];if(Array.isArray(q.options)){optionsArray=q.options.map(formatText);}else if(typeof q.options==='string'){try{optionsArray=JSON.parse(q.options).map(formatText);}catch{optionsArray=[];}}// Convert correct answer to letter if it's a word\nlet correctLetter=q.correct;if(q.correct&&q.correct.length>1){// If correct is a word, find its index in options and convert to letter\nconst correctIndex=optionsArray.findIndex(option=>option.toLowerCase()===q.correct.toLowerCase());if(correctIndex!==-1){correctLetter=String.fromCharCode(65+correctIndex);// A, B, C, D\nconsole.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);}}return{...q,options:optionsArray,correct:correctLetter};});setQuestions(formattedQuestions);setLoading(false);}},[location.state,testId]);// Initialize answers array when questions are loaded\nuseEffect(()=>{if(questions.length>0&&answers.length!==questions.length){setAnswers(Array(questions.length).fill(null));}},[questions,answers.length]);// Timer logic - pause when answer is selected or exam is finished\nuseEffect(()=>{if(showSummary||timerPaused)return;timerRef.current=setInterval(()=>{setTime(t=>t+1);},1000);return()=>{if(timerRef.current)clearInterval(timerRef.current);};},[showSummary,timerPaused]);if(loading){return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2ebf2',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{p:4,borderRadius:4,background:'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',boxShadow:'0 20px 40px rgba(0,0,0,0.1)',textAlign:'center'},children:[/*#__PURE__*/_jsx(CircularProgress,{sx:{color:'#00b894',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'#2c3e50',fontWeight:600},children:\"Sorular Y\\xFCkleniyor...\"})]})});}if(error){return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2ebf2',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{p:4,borderRadius:4,background:'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',boxShadow:'0 20px 40px rgba(0,0,0,0.1)',textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'#c62828',fontWeight:600,mb:2},children:error}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>window.location.reload(),children:\"Tekrar Dene\"})]})});}if(!questions.length){return/*#__PURE__*/_jsx(Typography,{align:\"center\",mt:8,children:\"Bu s\\u0131nav i\\xE7in soru bulunamad\\u0131.\"});}const q=questions[current];// Ensure options is always an array\nlet options=[];if(Array.isArray(q.options)){options=q.options;}else if(typeof q.options==='string'){try{options=JSON.parse(q.options);}catch{options=[];}}// Helper function to get correct answer text\nconst getCorrectAnswerText=()=>{if(!q.correct||options.length===0)return q.correct;const correctIndex=q.correct.charCodeAt(0)-65;// A=0, B=1, C=2, D=3\nconst correctText=options[correctIndex];return correctText?`${q.correct}) ${correctText}`:q.correct;};const handleSelect=optionIndex=>{const selectedLetter=String.fromCharCode(65+optionIndex);// 0->A, 1->B, 2->C, 3->D\nconsole.log('Selected option index:',optionIndex);console.log('Selected letter:',selectedLetter);console.log('Question correct answer:',q.correct);console.log('Question correct answer type:',typeof q.correct);setSelected(selectedLetter);setShowResult(true);setTimerPaused(true);// Pause timer when answer is selected\nsetAnswers(prev=>{const copy=[...prev];copy[current]=selectedLetter;return copy;});if(compareAnswers(selectedLetter,q.correct)){setScore(s=>s+1);}else{setMistakes(m=>m+1);}};const nextQuestion=()=>{if(current<questions.length-1){setCurrent(c=>c+1);setSelected(answers[current+1]||null);setShowResult(!!answers[current+1]);setShowExplanation(false);setTimerPaused(false);// Resume timer when moving to next question\n}};// Sınavı history'ye kaydet (explicit payload to avoid stale state)\nconst saveToHistory=async payload=>{const token=localStorage.getItem('token');// Kullanıcı giriş yapmadıysa history kaydı denemeyelim; sessizce çık\nif(!token)return;try{var _questions$,_questions$2,_questions$3,_questions$4;const res=await fetch('http://localhost:4000/api/history',{method:'POST',headers:{'Content-Type':'application/json',...(token?{'Authorization':`Bearer ${token}`}:{})},body:JSON.stringify({category:typeof((_questions$=questions[0])===null||_questions$===void 0?void 0:_questions$.categoryId)==='string'?(_questions$2=questions[0])===null||_questions$2===void 0?void 0:_questions$2.categoryId:String((_questions$3=questions[0])===null||_questions$3===void 0?void 0:_questions$3.categoryId),seriesId:((_questions$4=questions[0])===null||_questions$4===void 0?void 0:_questions$4.seriesId)||null,duration:payload?payload.duration:time,correct:payload?payload.correct:score,incorrect:payload?payload.incorrect:mistakes,questions:questions.map((q,idx)=>({questionId:q.id,userAnswer:payload?payload.answersArray[idx]:answers[idx],isCorrect:(()=>{const ua=payload?payload.answersArray[idx]:answers[idx];return ua?compareAnswers(ua,q.correct):false;})()}))})});if(!res.ok){try{const data=await res.json();// eslint-disable-next-line no-console\nconsole.error('History save error:',data);}catch(e){// eslint-disable-next-line no-console\nconsole.error('History save error (no json):',res.status,res.statusText);}// Do not alert here; interceptor will handle auth expiry. Avoid noisy UI.\n}}catch(e){// eslint-disable-next-line no-console\nconsole.error('History save network error:',e);// silence network errors for history save to avoid user confusion\n}};const handleFinish=async()=>{// Ensure answers array is properly sized\nconst finalizedAnswers=Array.from({length:questions.length},(_,i)=>answers[i]!==undefined?answers[i]:null);if(answers.length===0||answers.length!==questions.length){setAnswers(finalizedAnswers);}// Calculate final scores\nlet correctCount=0;let incorrectCount=0;let unansweredCount=0;questions.forEach((question,idx)=>{const userAnswer=finalizedAnswers[idx];if(userAnswer===null||userAnswer===undefined||userAnswer===''){unansweredCount++;}else if(compareAnswers(userAnswer,question.correct)){correctCount++;}else{incorrectCount++;}});// Update state with calculated scores\nsetScore(correctCount);setMistakes(incorrectCount);setShowSummary(true);setReviewMode(false);setTimerPaused(true);// Permanently pause timer when exam is finished\nif(timerRef.current)clearInterval(timerRef.current);await saveToHistory({correct:correctCount,incorrect:incorrectCount,duration:time,answersArray:finalizedAnswers});};const handleCloseSummary=()=>{setShowSummary(false);setReviewMode(false);setCurrent(0);setSelected(null);setShowResult(false);setShowExplanation(false);setScore(0);setMistakes(0);setTime(0);setAnswers([]);};const handleAddRanking=()=>{// Check if user is logged in\nconst token=localStorage.getItem('token');if(!token){// Redirect to login page if not logged in\nnavigate('/login');return;}// Determine current level from route\nlet examLevel;if(testId==='dynamic-a1')examLevel='A1';else if(testId==='dynamic-a2'||testId==='dynamic')examLevel='A2';else if(testId==='dynamic-b1')examLevel='B1';else if(testId==='dynamic-b2')examLevel='B2';// Send all relevant exam result data to backend\nconst categoryId=q.categoryId;const seriesId=q.seriesId;fetch('http://localhost:4000/api/rankings',{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`},body:JSON.stringify({score,time,categoryId,seriesId,correct:score,mistakes})}).then(async res=>{let data;try{data=await res.json();}catch(e){data={};}if(!res.ok){var _data,_data2,_data3;console.error('Ranking save error:',data);let errorMessage='Sıralamaya eklenemedi: '+(((_data=data)===null||_data===void 0?void 0:_data.message)||res.statusText);// Auth-related errors\nif(((_data2=data)===null||_data2===void 0?void 0:_data2.message)==='Authorization header missing'||res.status===401){errorMessage='Sıralamaya eklemek için giriş yapmalısınız.';}// Backend may block creating ranking-only rows to prevent \"Detay Yok\" duplicates\nif(typeof((_data3=data)===null||_data3===void 0?void 0:_data3.error)==='string'&&data.error.includes('Detailed test record not found')){errorMessage='Önce sınavı başarıyla bitirip kaydettiğinizden emin olun, sonra sıralamaya ekleyin.';}alert(errorMessage);return;}setShowSummary(false);// Navigate to rankings filtered by the user's level\nnavigate(examLevel?`/rankings?exam=${examLevel}`:'/rankings');}).catch(err=>{console.error('Ranking save error:',err);alert('Failed to save ranking. Network error.');});};const prevQuestion=()=>{if(current>0){setCurrent(c=>c-1);setSelected(answers[current-1]||null);setShowResult(!!answers[current-1]);setShowExplanation(false);// If the previous question was already answered, keep timer paused\nsetTimerPaused(!!answers[current-1]);}};return/*#__PURE__*/_jsxs(Box,{sx:{minHeight:'100vh',bgcolor:'#b2ebf2',display:'flex',alignItems:{xs:'center',md:'flex-start'},justifyContent:'center',position:'relative',pt:{xs:2,md:4,lg:6},pb:{xs:12,md:16}},children:[/*#__PURE__*/_jsx(Box,{sx:{display:{xs:'none',md:'flex'},position:'fixed',top:{md:84,lg:96},left:{md:20,lg:28},zIndex:1200},children:/*#__PURE__*/_jsx(Button,{onClick:handleFinish,sx:{textTransform:'none',fontWeight:800,borderRadius:3,px:{md:2,lg:2.5},py:{md:0.75,lg:1},boxShadow:'0 10px 24px rgba(0,0,0,0.12)',background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',border:'1px solid rgba(255,255,255,0.25)',backdropFilter:'blur(8px)','&:hover':{background:'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)'}},children:\"Testi Bitir\"})}),/*#__PURE__*/_jsxs(Box,{sx:{display:{xs:'none',md:'flex'},position:'fixed',top:{md:84,lg:96},right:{md:20,lg:28},zIndex:1200,background:timerPaused?'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)':'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',px:{md:2,lg:2.5},py:{md:0.75,lg:1},borderRadius:3,fontWeight:800,fontSize:{md:16,lg:18},boxShadow:'0 10px 24px rgba(0,0,0,0.12)',alignItems:'center',backdropFilter:'blur(8px)',border:'1px solid rgba(255,255,255,0.25)',gap:1},\"aria-label\":\"exam-timer-desktop\",children:[timerPaused&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F8\\uFE0F\"}),Math.floor(time/60),\":\",(time%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(\"span\",{title:current===0?'İlk soru':'Önceki soruya git',children:/*#__PURE__*/_jsx(IconButton,{sx:{display:{xs:'none',md:'inline-flex'},position:'absolute',left:{xs:8,md:32},top:'50%',transform:'translateY(-50%)',zIndex:2,background:current>0?'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)':'rgba(255,255,255,0.5)',color:current>0?'#00b894':'#9e9e9e',backdropFilter:'blur(10px)',border:current>0?'2px solid rgba(0, 184, 148, 0.35)':'1px solid rgba(255,255,255,0.6)',boxShadow:current>0?'0 10px 28px rgba(0, 184, 148, 0.25)':'0 6px 18px rgba(0, 0, 0, 0.08)',borderRadius:'50%',width:{md:64,lg:72},height:{md:64,lg:72},p:0,cursor:current>0?'pointer':'default',opacity:current>0?1:0.5,transition:'all 0.3s ease','&:hover':{transform:current>0?'translateY(-50%) translateX(-4px)':'translateY(-50%)',background:current>0?'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)':'rgba(255,255,255,0.5)',boxShadow:current>0?'0 14px 34px rgba(0, 184, 148, 0.3)':'0 6px 18px rgba(0, 0, 0, 0.08)'},'&:focus-visible':{outline:'3px solid rgba(0, 184, 148, 0.5)',outlineOffset:'2px'}},onClick:prevQuestion,disabled:current===0,children:/*#__PURE__*/_jsx(ArrowBackIcon,{sx:{fontSize:{md:34,lg:38}}})})}),/*#__PURE__*/_jsx(\"span\",{title:current===questions.length-1?'Son soru':'Sonraki soruya git',children:/*#__PURE__*/_jsx(IconButton,{sx:{display:{xs:'none',md:'inline-flex'},position:'absolute',right:{xs:8,md:32},top:'50%',transform:'translateY(-50%)',zIndex:2,background:current<questions.length-1?'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)':'rgba(255,255,255,0.5)',color:current<questions.length-1?'#00b894':'#9e9e9e',backdropFilter:'blur(10px)',border:current<questions.length-1?'2px solid rgba(0, 184, 148, 0.35)':'1px solid rgba(255,255,255,0.6)',boxShadow:current<questions.length-1?'0 10px 28px rgba(0, 184, 148, 0.25)':'0 6px 18px rgba(0, 0, 0, 0.08)',borderRadius:'50%',width:{md:64,lg:72},height:{md:64,lg:72},p:0,cursor:current<questions.length-1?'pointer':'default',opacity:current<questions.length-1?1:0.5,transition:'all 0.3s ease','&:hover':{transform:current<questions.length-1?'translateY(-50%) translateX(4px)':'translateY(-50%)',background:current<questions.length-1?'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)':'rgba(255,255,255,0.5)',boxShadow:current<questions.length-1?'0 14px 34px rgba(0, 184, 148, 0.3)':'0 6px 18px rgba(0, 0, 0, 0.08)'},'&:focus-visible':{outline:'3px solid rgba(0, 184, 148, 0.5)',outlineOffset:'2px'}},onClick:nextQuestion,disabled:current===questions.length-1,children:/*#__PURE__*/_jsx(ArrowForwardIcon,{sx:{fontSize:{md:34,lg:38}}})})}),!reviewMode&&/*#__PURE__*/_jsxs(Paper,{elevation:6,sx:{p:{xs:2,sm:3,md:5},position:'relative',borderRadius:4,width:'100%',maxWidth:{xs:360,sm:560,md:600},background:'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.1)',transition:'transform 0.3s ease','&:hover':{transform:'translateY(-5px)'}},children:[/*#__PURE__*/_jsx(Box,{sx:{position:'absolute',top:10,left:{xs:18,md:10},zIndex:2,display:{xs:'flex',md:'none'}},children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:handleFinish,sx:{textTransform:'none',fontWeight:700,borderRadius:2,px:1.5,py:0.5,boxShadow:'0 6px 16px rgba(0,0,0,0.12)',background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',border:'1px solid rgba(255,255,255,0.25)',backdropFilter:'blur(8px)'},children:\"Bitir\"})}),/*#__PURE__*/_jsxs(Box,{sx:{position:'absolute',top:10,right:{xs:18,md:10},zIndex:2,display:{xs:'flex',md:'none'},background:timerPaused?'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)':'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',px:{xs:1.25,md:3},py:{xs:0.5,md:1},borderRadius:{xs:2,md:3},fontWeight:700,fontSize:{xs:13,md:18},boxShadow:'0 6px 16px rgba(0, 184, 148, 0.4)',alignItems:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',gap:{xs:0.5,md:1},transition:'background-color 0.3s ease'},children:[timerPaused&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F8\\uFE0F\"}),Math.floor(time/60),\":\",(time%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",fontWeight:700,align:\"center\",sx:{background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',textShadow:'0 2px 4px rgba(0, 0, 0, 0.1)'},children:[\"Soru \",current+1,\" / \",questions.length]})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:3,sx:{color:'#2c3e50',fontWeight:600,fontSize:{xs:'1rem',sm:'1.1rem',md:'1.2rem'},lineHeight:1.6,textAlign:'center',p:{xs:1.25,sm:1.5,md:2},background:'rgba(255, 255, 255, 0.7)',borderRadius:'12px',border:'1px solid rgba(0, 184, 148, 0.2)'},children:q.text}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mb:3},children:options.length>0?options.map((opt,idx)=>{const optionLetter=String.fromCharCode(65+idx);// A, B, C, D\nconst isSelected=selected===optionLetter;const isCorrect=compareAnswers(optionLetter,q.correct);const showColor=!!selected;return/*#__PURE__*/_jsxs(Button,{variant:isSelected?'contained':'outlined',color:showColor?isCorrect?'primary':isSelected?'error':'primary':'primary',sx:{textAlign:'left',fontWeight:600,fontSize:{xs:15,sm:16,md:18},textTransform:'none',borderRadius:4,py:{xs:1.25,sm:1.5,md:2},px:{xs:1.5,sm:2},background:!showColor?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)':isSelected?isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)':'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',color:showColor&&isSelected?'#ffffff':'#2c3e50',border:showColor&&isSelected?'none':'2px solid rgba(0, 184, 148, 0.3)',backdropFilter:'blur(10px)',boxShadow:isSelected?'0 8px 25px rgba(0, 184, 148, 0.3)':'0 4px 15px rgba(0, 0, 0, 0.1)',position:'relative',transition:'all 0.3s ease','&:hover':{transform:!selected?'translateY(-2px)':'none',background:!showColor?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':undefined,boxShadow:!selected?'0 8px 25px rgba(0, 184, 148, 0.2)':undefined}},onClick:()=>!showResult&&handleSelect(idx),disabled:!!selected,children:[/*#__PURE__*/_jsxs(\"span\",{style:{position:'relative',zIndex:2},children:[String.fromCharCode(65+idx),\") \",formatText(opt)]}),showColor&&isSelected&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:16,top:'50%',transform:'translateY(-50%)',fontWeight:700,fontSize:14,color:'#ffffff',background:isCorrect?'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',borderRadius:12,padding:'4px 12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.2)',zIndex:3},children:isCorrect?'✓ Doğru':'✗ Yanlış'})]},idx);}):/*#__PURE__*/_jsx(Typography,{color:\"error\",fontWeight:600,mb:2,children:\"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"})}),showResult&&/*#__PURE__*/_jsx(Box,{sx:{mb:2},children:/*#__PURE__*/_jsx(Typography,{color:\"success.main\",fontWeight:700,mb:1,children:compareAnswers(selected||'',q.correct)?'Doğru!':`Doğru Yanıt: ${getCorrectAnswerText()}`})}),!showSummary&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:{xs:'space-between',md:'center'},gap:1.5,mt:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:prevQuestion,disabled:current===0,sx:{textTransform:'none',fontWeight:700,borderWidth:2,borderColor:'#00b894',color:'#00b894','&:hover':{borderColor:'#00cec9',background:'rgba(0,206,201,0.08)'},display:{xs:'inline-flex',md:'none'}},children:\"\\xD6nceki\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleFinish,sx:{textTransform:'none',fontWeight:800,borderRadius:3,px:3,py:1.2,boxShadow:2,background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff','&:hover':{background:'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)'},display:{xs:'inline-flex',md:'none'}},children:\"Testi Bitir\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:nextQuestion,disabled:current===questions.length-1,sx:{textTransform:'none',fontWeight:700,borderWidth:2,borderColor:'#00b894',color:'#00b894','&:hover':{borderColor:'#00cec9',background:'rgba(0,206,201,0.08)'},display:{xs:'inline-flex',md:'none'}},children:\"Sonraki\"})]})]}),showSummary&&/*#__PURE__*/_jsx(Box,{sx:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',bgcolor:'rgba(10,29,86,0.7)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{bgcolor:'#fff',borderRadius:6,boxShadow:8,p:4,minWidth:320,maxWidth:'90vw',textAlign:'center',position:'relative'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",fontWeight:700,color:\"#19376D\",mb:2,children:\"S\\u0131nav Sonucu\"}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#43ea7c\",mb:1,children:[\"Do\\u011Fru: \",score]}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#e74c3c\",mb:1,children:[\"Yanl\\u0131\\u015F: \",mistakes]}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#f39c12\",mb:1,children:[\"Bo\\u015F: \",answers.filter(answer=>answer===null||answer===undefined||answer==='').length]}),/*#__PURE__*/_jsxs(Typography,{fontSize:18,fontWeight:500,color:\"#19376D\",mb:2,children:[\"S\\xFCre: \",Math.floor(time/60),\":\",(time%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:2,justifyContent:'center',mb:3},children:questions.map((question,idx)=>{const userAnswer=answers[idx];const isUnanswered=userAnswer===null||userAnswer===undefined||userAnswer==='';const isCorrect=!isUnanswered&&compareAnswers(userAnswer,question.correct);// Determine colors based on answer status\nlet borderColor,textColor,backgroundColor,hoverColor;if(isUnanswered){// Boş bırakılan sorular - turuncu\nborderColor='#f39c12';textColor='#f39c12';backgroundColor='#fdf6e3';hoverColor='#f8e49a';}else if(isCorrect){// Doğru cevaplar - yeşil\nborderColor='#43ea7c';textColor='#43ea7c';backgroundColor='#eafaf3';hoverColor='#c6f7e2';}else{// Yanlış cevaplar - kırmızı\nborderColor='#e74c3c';textColor='#e74c3c';backgroundColor='#fff0f0';hoverColor='#ffe3e3';}return/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{minWidth:48,height:48,fontWeight:700,fontSize:18,borderRadius:3,border:'none',color:'#ffffff',background:!answers[idx]?'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)':isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',backdropFilter:'blur(10px)',boxShadow:'0 6px 20px rgba(0, 0, 0, 0.15)',mx:0.5,my:0.5,transition:'all 0.3s ease','&:hover':{transform:'translateY(-3px)',boxShadow:'0 8px 25px rgba(0, 0, 0, 0.2)'}},onClick:()=>{setReviewMode(true);setShowSummary(false);setCurrent(idx);setSelected(answers[idx]||null);setShowResult(!!answers[idx]);setShowExplanation(false);},children:idx+1},idx);})}),/*#__PURE__*/_jsx(Typography,{fontSize:15,color:\"#19376D\",mb:2,children:\"Sorular\\u0131 incelemek i\\xE7in t\\u0131klay\\u0131n. Ye\\u015Fil: Do\\u011Fru, K\\u0131rm\\u0131z\\u0131: Yanl\\u0131\\u015F, Turuncu: Bo\\u015F\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'center',gap:2,mt:2,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:handleAddRanking,children:\"S\\u0131ralamaya Ekle\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{navigate('/categories');},children:\"Kapat\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{handleCloseSummary();},children:\"Tekrar \\xC7\\xF6z\"})]}),!localStorage.getItem('token')&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{display:'block',textAlign:'center',mt:1,fontSize:'0.75rem',color:'#666',fontStyle:'italic'},children:\"S\\u0131ralamaya eklemek i\\xE7in \\xFCye giri\\u015Fi gerekli veya kay\\u0131t olmal\\u0131s\\u0131n\\u0131z\"})]})}),reviewMode&&/*#__PURE__*/_jsxs(Paper,{elevation:6,sx:{p:5,borderRadius:4,minWidth:340,maxWidth:600,width:'100%',background:'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.1)',transition:'transform 0.3s ease','&:hover':{transform:'translateY(-5px)'}},children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",fontWeight:700,align:\"center\",sx:{background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',textShadow:'0 2px 4px rgba(0, 0, 0, 0.1)'},children:[\"Soru \",current+1,\" / \",questions.length,\" (\\u0130nceleme)\"]})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:3,sx:{color:'#2c3e50',fontWeight:600,fontSize:'1.2rem',lineHeight:1.6,textAlign:'center',padding:'16px',background:'rgba(255, 255, 255, 0.7)',borderRadius:'12px',border:'1px solid rgba(0, 184, 148, 0.2)'},children:q.text}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mb:3},children:options.length>0?options.map((opt,idx)=>{const optionLetter=String.fromCharCode(65+idx);// A, B, C, D\nconst isSelected=answers[current]===optionLetter;const isCorrect=compareAnswers(optionLetter,q.correct);const showColor=!!answers[current];return/*#__PURE__*/_jsxs(Button,{variant:isSelected?'contained':'outlined',color:showColor?isCorrect?'primary':isSelected?'error':'primary':'primary',sx:{textAlign:'left',fontWeight:600,fontSize:18,borderRadius:4,py:2,px:2,background:!showColor?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)':isSelected?isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)':isCorrect?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',color:showColor&&isSelected?'#ffffff':isCorrect&&showColor?'#00b894':'#2c3e50',border:isCorrect&&showColor&&!isSelected?'2px solid #00b894':showColor&&isSelected?'none':'2px solid rgba(0, 184, 148, 0.3)',backdropFilter:'blur(10px)',boxShadow:isSelected?'0 8px 25px rgba(0, 184, 148, 0.3)':isCorrect&&showColor?'0 4px 15px rgba(0, 184, 148, 0.2)':'0 4px 15px rgba(0, 0, 0, 0.1)',position:'relative',transition:'all 0.3s ease',pointerEvents:'none'},disabled:true,children:[/*#__PURE__*/_jsxs(\"span\",{style:{position:'relative',zIndex:2},children:[String.fromCharCode(65+idx),\") \",opt]}),showColor&&isSelected&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:16,top:'50%',transform:'translateY(-50%)',fontWeight:700,fontSize:18,color:isCorrect?'#43ea7c':'#e74c3c',background:isCorrect?'#eafaf3':'#fff0f0',borderRadius:8,padding:'2px 12px',boxShadow:'0 2px 8px rgba(67,234,124,0.08)',zIndex:3},children:isCorrect?'Doğru':'Yanlış'})]},idx);}):/*#__PURE__*/_jsx(Typography,{color:\"error\",fontWeight:600,mb:2,children:\"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"})}),!!q.explanation&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",onClick:()=>setShowExplanation(e=>!e),children:showExplanation?'Çözümü Gizle':'Çözümü Göster'}),showExplanation&&/*#__PURE__*/_jsx(Typography,{mt:2,color:\"text.secondary\",children:q.explanation})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{setReviewMode(false);setShowSummary(true);setShowExplanation(false);},children:\"Sonu\\xE7lara D\\xF6n\"})})]})]});};export default Exam;","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","useLocation","useNavigate","Box","Paper","Typography","Button","CircularProgress","IconButton","ArrowBackIcon","ArrowForwardIcon","jsx","_jsx","jsxs","_jsxs","Exam","testId","location","navigate","questions","setQuestions","loading","setLoading","current","setCurrent","selected","setSelected","showResult","setShowResult","showExplanation","setShowExplanation","score","setScore","mistakes","setMistakes","showSummary","setShowSummary","time","setTime","reviewMode","setReviewMode","answers","setAnswers","timerPaused","setTimerPaused","timerRef","error","setError","formatText","text","length","charAt","toUpperCase","slice","toLowerCase","compareAnswers","answer1","answer2","_location$state","state","API_URL","process","env","REACT_APP_API_URL","apiUrl","startsWith","params","URLSearchParams","set","toString","console","log","load","res","fetch","status","ok","Error","data","json","questionsData","API_URL2","altUrl","encodeURIComponent","res2","d2","formattedQuestions","map","q","optionsArray","Array","isArray","options","JSON","parse","correctLetter","correct","correctIndex","findIndex","option","String","fromCharCode","fill","setInterval","t","clearInterval","sx","minHeight","bgcolor","display","alignItems","justifyContent","children","p","borderRadius","background","boxShadow","textAlign","color","mb","variant","fontWeight","onClick","window","reload","align","mt","getCorrectAnswerText","charCodeAt","correctText","handleSelect","optionIndex","selectedLetter","prev","copy","s","m","nextQuestion","c","saveToHistory","payload","token","localStorage","getItem","_questions$","_questions$2","_questions$3","_questions$4","method","headers","body","stringify","category","categoryId","seriesId","duration","incorrect","idx","questionId","id","userAnswer","answersArray","isCorrect","ua","e","statusText","handleFinish","finalizedAnswers","from","_","i","undefined","correctCount","incorrectCount","unansweredCount","forEach","question","handleCloseSummary","handleAddRanking","examLevel","Authorization","then","_data","_data2","_data3","errorMessage","message","includes","alert","catch","err","prevQuestion","xs","md","position","pt","lg","pb","top","left","zIndex","textTransform","px","py","border","backdropFilter","right","fontSize","gap","Math","floor","padStart","title","transform","width","height","cursor","opacity","transition","outline","outlineOffset","disabled","elevation","sm","maxWidth","size","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","textShadow","lineHeight","flexDirection","opt","optionLetter","isSelected","showColor","style","padding","borderWidth","borderColor","minWidth","filter","answer","flexWrap","isUnanswered","textColor","backgroundColor","hoverColor","mx","my","fontStyle","pointerEvents","explanation"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/pages/Exam.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Paper, Typography, Button, CircularProgress, IconButton } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\n\ninterface Question {\n  id: string;\n  text: string;\n  options: string[];\n  correct: string;\n  explanation: string;\n  categoryId: number;\n  seriesId: string;\n}\n\nconst Exam: React.FC = () => {\n  const { testId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [current, setCurrent] = useState(0);\n  const [selected, setSelected] = useState<string | null>(null);\n  const [showResult, setShowResult] = useState(false);\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [score, setScore] = useState(0);\n  const [mistakes, setMistakes] = useState(0);\n  const [showSummary, setShowSummary] = useState(false);\n  const [time, setTime] = useState(0);\n  const [reviewMode, setReviewMode] = useState(false);\n  const [answers, setAnswers] = useState<(string | null)[]>([]);\n  const [timerPaused, setTimerPaused] = useState(false);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Helper function to format text: first letter uppercase, rest lowercase\n  const formatText = (text: string) => {\n    if (!text || text.length === 0) return text;\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  };\n\n  // Helper function for case insensitive comparison\n  const compareAnswers = (answer1: string, answer2: string) => {\n    return answer1.toLowerCase() === answer2.toLowerCase();\n  };\n\n  useEffect(() => {\n    // Fetch if no state or empty state provided\n    if (!location.state?.questions || location.state.questions.length === 0) {\n      setLoading(true);\n      setError(null);\n      \n      // For dynamic tests, use the questions endpoint directly with filters\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n      let apiUrl: string;\n      \n      if (testId === 'dynamic' || testId?.startsWith('dynamic-')) {\n        apiUrl = `${API_URL}/api/questions`;\n\n        // Add category filter based on testId and lock series to Erasmus Sınavı\n        // so Üniversite Hazırlık soruları dinamik Erasmus kartlarına karışmasın.\n        const params = new URLSearchParams();\n        if (testId === 'dynamic-a1') {\n          params.set('category', 'A1');\n        } else if (testId === 'dynamic-a2' || testId === 'dynamic') {\n          params.set('category', 'A2');\n        } else if (testId === 'dynamic-b1') {\n          params.set('category', 'B1');\n        } else if (testId === 'dynamic-b2') {\n          params.set('category', 'B2');\n        }\n        // Restrict to Erasmus series explicitly\n        params.set('series', 'Erasmus Sınavı');\n        apiUrl += `?${params.toString()}`;\n      } else {\n        apiUrl = `${API_URL}/api/tests/${testId}/questions`;\n      }\n      \n      console.log(`Fetching questions from: ${apiUrl}`);\n      \n      const load = async () => {\n        try {\n          const res = await fetch(apiUrl);\n          console.log('API Response status:', res.status);\n          if (!res.ok) throw new Error(`Request failed with status ${res.status}`);\n          const data = await res.json();\n          let questionsData = data.questions || data || [];\n          // Fallback: if tests endpoint returned empty, try querying by seriesId directly\n          if ((!questionsData || questionsData.length === 0) && testId && !(testId === 'dynamic' || testId.startsWith('dynamic-'))) {\n            const API_URL2 = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n            const altUrl = `${API_URL2}/api/questions?seriesId=${encodeURIComponent(testId)}`;\n            console.log('Primary returned empty, trying fallback:', altUrl);\n            const res2 = await fetch(altUrl);\n            if (res2.ok) {\n              const d2 = await res2.json();\n              questionsData = d2.questions || d2 || [];\n            }\n          }\n          console.log('Questions data length:', questionsData.length);\n\n          const formattedQuestions = questionsData.map((q: Question) => {\n            // Parse options if they're in string format\n            let optionsArray: string[] = [];\n            if (Array.isArray(q.options)) {\n              optionsArray = q.options.map(formatText);\n            } else if (typeof q.options === 'string') {\n              try {\n                optionsArray = JSON.parse(q.options).map(formatText);\n              } catch {\n                optionsArray = [];\n              }\n            }\n\n            // Convert correct answer to letter if it's a word\n            let correctLetter = q.correct;\n            if (q.correct && q.correct.length > 1) {\n              // If correct is a word, find its index in options and convert to letter\n              const correctIndex = optionsArray.findIndex(option => \n                option.toLowerCase() === q.correct.toLowerCase()\n              );\n              if (correctIndex !== -1) {\n                correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n                console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n              }\n            }\n\n            return {\n              ...q,\n              options: optionsArray,\n              correct: correctLetter\n            };\n          });\n          console.log(`Loaded ${formattedQuestions.length} questions`);\n          setQuestions(formattedQuestions);\n          setLoading(false);\n        } catch (error) {\n          console.error('Failed to fetch questions:', error);\n          setError('Sunucuya ulaşılamıyor. Lütfen sunucuyu başlatıp tekrar deneyin.');\n          setLoading(false);\n        }\n      };\n      load();\n    } else {\n      // Format questions from state as well\n      const formattedQuestions = location.state.questions.map((q: Question) => {\n        // Parse options if they're in string format\n        let optionsArray: string[] = [];\n        if (Array.isArray(q.options)) {\n          optionsArray = q.options.map(formatText);\n        } else if (typeof q.options === 'string') {\n          try {\n            optionsArray = JSON.parse(q.options).map(formatText);\n          } catch {\n            optionsArray = [];\n          }\n        }\n\n        // Convert correct answer to letter if it's a word\n        let correctLetter = q.correct;\n        if (q.correct && q.correct.length > 1) {\n          // If correct is a word, find its index in options and convert to letter\n          const correctIndex = optionsArray.findIndex(option => \n            option.toLowerCase() === q.correct.toLowerCase()\n          );\n          if (correctIndex !== -1) {\n            correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n            console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n          }\n        }\n\n        return {\n          ...q,\n          options: optionsArray,\n          correct: correctLetter\n        };\n      });\n      setQuestions(formattedQuestions);\n      setLoading(false);\n    }\n  }, [location.state, testId]);\n\n  // Initialize answers array when questions are loaded\n  useEffect(() => {\n    if (questions.length > 0 && answers.length !== questions.length) {\n      setAnswers(Array(questions.length).fill(null));\n    }\n  }, [questions, answers.length]);\n\n  // Timer logic - pause when answer is selected or exam is finished\n  useEffect(() => {\n    if (showSummary || timerPaused) return;\n    timerRef.current = setInterval(() => {\n      setTime((t) => t + 1);\n    }, 1000);\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [showSummary, timerPaused]);\n\n  if (loading) {\n    return (\n      <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <Box sx={{\n          p: 4,\n          borderRadius: 4,\n          background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',\n          boxShadow: '0 20px 40px rgba(0,0,0,0.1)',\n          textAlign: 'center'\n        }}>\n          <CircularProgress sx={{ color: '#00b894', mb: 2 }} />\n          <Typography variant=\"h6\" sx={{ color: '#2c3e50', fontWeight: 600 }}>\n            Sorular Yükleniyor...\n          </Typography>\n        </Box>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <Box sx={{ p: 4, borderRadius: 4, background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)', boxShadow: '0 20px 40px rgba(0,0,0,0.1)', textAlign: 'center' }}>\n          <Typography variant=\"h6\" sx={{ color: '#c62828', fontWeight: 600, mb: 2 }}>{error}</Typography>\n          <Button variant=\"contained\" onClick={() => window.location.reload()}>Tekrar Dene</Button>\n        </Box>\n      </Box>\n    );\n  }\n\n  if (!questions.length) {\n    return <Typography align=\"center\" mt={8}>Bu sınav için soru bulunamadı.</Typography>;\n  }\n\n  const q = questions[current];\n  // Ensure options is always an array\n  let options: string[] = [];\n  if (Array.isArray(q.options)) {\n    options = q.options;\n  } else if (typeof q.options === 'string') {\n    try {\n      options = JSON.parse(q.options);\n    } catch {\n      options = [];\n    }\n  }\n\n  // Helper function to get correct answer text\n  const getCorrectAnswerText = () => {\n    if (!q.correct || options.length === 0) return q.correct;\n    const correctIndex = q.correct.charCodeAt(0) - 65; // A=0, B=1, C=2, D=3\n    const correctText = options[correctIndex];\n    return correctText ? `${q.correct}) ${correctText}` : q.correct;\n  };\n\n  const handleSelect = (optionIndex: number) => {\n    const selectedLetter = String.fromCharCode(65 + optionIndex); // 0->A, 1->B, 2->C, 3->D\n    console.log('Selected option index:', optionIndex);\n    console.log('Selected letter:', selectedLetter);\n    console.log('Question correct answer:', q.correct);\n    console.log('Question correct answer type:', typeof q.correct);\n    \n    setSelected(selectedLetter);\n    setShowResult(true);\n    setTimerPaused(true); // Pause timer when answer is selected\n    setAnswers((prev) => {\n      const copy = [...prev];\n      copy[current] = selectedLetter;\n      return copy;\n    });\n    if (compareAnswers(selectedLetter, q.correct)) {\n      setScore((s) => s + 1);\n    } else {\n      setMistakes((m) => m + 1);\n    }\n  };\n\n  const nextQuestion = () => {\n    if (current < questions.length - 1) {\n      setCurrent(c => c + 1);\n      setSelected(answers[current + 1] || null);\n      setShowResult(!!answers[current + 1]);\n      setShowExplanation(false);\n      setTimerPaused(false); // Resume timer when moving to next question\n    }\n  };\n\n  // Sınavı history'ye kaydet (explicit payload to avoid stale state)\n  const saveToHistory = async (payload?: { correct: number; incorrect: number; duration: number; answersArray: (string | null)[] }) => {\n  const token = localStorage.getItem('token');\n  // Kullanıcı giriş yapmadıysa history kaydı denemeyelim; sessizce çık\n  if (!token) return;\n    try {\n      const res = await fetch('http://localhost:4000/api/history', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\n        },\n        body: JSON.stringify({\n          category: typeof questions[0]?.categoryId === 'string' ? questions[0]?.categoryId : String(questions[0]?.categoryId),\n          seriesId: questions[0]?.seriesId || null,\n          duration: payload ? payload.duration : time,\n          correct: payload ? payload.correct : score,\n          incorrect: payload ? payload.incorrect : mistakes,\n          questions: questions.map((q, idx) => ({\n            questionId: q.id,\n            userAnswer: (payload ? payload.answersArray[idx] : answers[idx]),\n            isCorrect: (() => {\n              const ua = payload ? payload.answersArray[idx] : answers[idx];\n              return ua ? compareAnswers(ua!, q.correct) : false;\n            })()\n          }))\n        })\n      });\n      if (!res.ok) {\n        try {\n          const data = await res.json();\n          // eslint-disable-next-line no-console\n          console.error('History save error:', data);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error('History save error (no json):', res.status, res.statusText);\n        }\n        // Do not alert here; interceptor will handle auth expiry. Avoid noisy UI.\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n  console.error('History save network error:', e);\n  // silence network errors for history save to avoid user confusion\n    }\n  };\n\n  const handleFinish = async () => {\n    // Ensure answers array is properly sized\n    const finalizedAnswers = Array.from({ length: questions.length }, (_, i) => (answers[i] !== undefined ? answers[i] : null));\n    if (answers.length === 0 || answers.length !== questions.length) {\n      setAnswers(finalizedAnswers);\n    }\n    \n    // Calculate final scores\n    let correctCount = 0;\n    let incorrectCount = 0;\n    let unansweredCount = 0;\n    \n    questions.forEach((question, idx) => {\n      const userAnswer = finalizedAnswers[idx];\n      if (userAnswer === null || userAnswer === undefined || userAnswer === '') {\n        unansweredCount++;\n      } else if (compareAnswers(userAnswer, question.correct)) {\n        correctCount++;\n      } else {\n        incorrectCount++;\n      }\n    });\n    \n    // Update state with calculated scores\n    setScore(correctCount);\n    setMistakes(incorrectCount);\n    \n    setShowSummary(true);\n    setReviewMode(false);\n    setTimerPaused(true); // Permanently pause timer when exam is finished\n    if (timerRef.current) clearInterval(timerRef.current);\n    \n    await saveToHistory({\n      correct: correctCount,\n      incorrect: incorrectCount,\n      duration: time,\n      answersArray: finalizedAnswers,\n    });\n  };\n\n  const handleCloseSummary = () => {\n    setShowSummary(false);\n    setReviewMode(false);\n    setCurrent(0);\n    setSelected(null);\n    setShowResult(false);\n    setShowExplanation(false);\n    setScore(0);\n    setMistakes(0);\n    setTime(0);\n    setAnswers([]);\n  };\n\n  const handleAddRanking = () => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Redirect to login page if not logged in\n      navigate('/login');\n      return;\n    }\n\n    // Determine current level from route\n    let examLevel: 'A1' | 'A2' | 'B1' | 'B2' | undefined;\n    if (testId === 'dynamic-a1') examLevel = 'A1';\n    else if (testId === 'dynamic-a2' || testId === 'dynamic') examLevel = 'A2';\n    else if (testId === 'dynamic-b1') examLevel = 'B1';\n    else if (testId === 'dynamic-b2') examLevel = 'B2';\n\n    // Send all relevant exam result data to backend\n    const categoryId = q.categoryId;\n    const seriesId = q.seriesId;\n    fetch('http://localhost:4000/api/rankings', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ score, time, categoryId, seriesId, correct: score, mistakes }),\n    })\n      .then(async res => {\n        let data;\n        try {\n          data = await res.json();\n        } catch (e) {\n          data = {};\n        }\n        if (!res.ok) {\n          console.error('Ranking save error:', data);\n          let errorMessage = 'Sıralamaya eklenemedi: ' + (data?.message || res.statusText);\n\n          // Auth-related errors\n          if (data?.message === 'Authorization header missing' || res.status === 401) {\n            errorMessage = 'Sıralamaya eklemek için giriş yapmalısınız.';\n          }\n          // Backend may block creating ranking-only rows to prevent \"Detay Yok\" duplicates\n          if (typeof data?.error === 'string' && data.error.includes('Detailed test record not found')) {\n            errorMessage = 'Önce sınavı başarıyla bitirip kaydettiğinizden emin olun, sonra sıralamaya ekleyin.';\n          }\n\n          alert(errorMessage);\n          return;\n        }\n        setShowSummary(false);\n        // Navigate to rankings filtered by the user's level\n        navigate(examLevel ? `/rankings?exam=${examLevel}` : '/rankings');\n      })\n      .catch(err => {\n        console.error('Ranking save error:', err);\n        alert('Failed to save ranking. Network error.');\n      });\n  };\n\n  const prevQuestion = () => {\n    if (current > 0) {\n      setCurrent(c => c - 1);\n      setSelected(answers[current - 1] || null);\n      setShowResult(!!answers[current - 1]);\n      setShowExplanation(false);\n      // If the previous question was already answered, keep timer paused\n      setTimerPaused(!!answers[current - 1]);\n    }\n  };\n\n  return (\n    <Box sx={{ \n      minHeight: '100vh', \n      bgcolor: '#b2ebf2', \n      display: 'flex', \n      alignItems: { xs: 'center', md: 'flex-start' },\n      justifyContent: 'center', \n      position: 'relative',\n      pt: { xs: 2, md: 4, lg: 6 },\n      pb: { xs: 12, md: 16 }\n    }}>\n      {/* Fixed top-left Finish button (aligned with fixed timer) for tablet/desktop */}\n      <Box\n        sx={{\n          display: { xs: 'none', md: 'flex' },\n          position: 'fixed',\n          top: { md: 84, lg: 96 },\n          left: { md: 20, lg: 28 },\n          zIndex: 1200,\n        }}\n      >\n        <Button\n          onClick={handleFinish}\n          sx={{\n            textTransform: 'none',\n            fontWeight: 800,\n            borderRadius: 3,\n            px: { md: 2, lg: 2.5 },\n            py: { md: 0.75, lg: 1 },\n            boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            color: '#fff',\n            border: '1px solid rgba(255,255,255,0.25)',\n            backdropFilter: 'blur(8px)',\n            '&:hover': { background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)' },\n          }}\n        >\n          Testi Bitir\n        </Button>\n      </Box>\n      {/* Fixed timer for tablet/desktop (sticky at top-right) */}\n    <Box\n        sx={{\n          display: { xs: 'none', md: 'flex' },\n          position: 'fixed',\n      top: { md: 84, lg: 96 },\n          right: { md: 20, lg: 28 },\n          zIndex: 1200,\n          background: timerPaused\n            ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)'\n            : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          px: { md: 2, lg: 2.5 },\n          py: { md: 0.75, lg: 1 },\n          borderRadius: 3,\n          fontWeight: 800,\n          fontSize: { md: 16, lg: 18 },\n          boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n          alignItems: 'center',\n          backdropFilter: 'blur(8px)',\n          border: '1px solid rgba(255,255,255,0.25)',\n          gap: 1\n        }}\n        aria-label=\"exam-timer-desktop\"\n      >\n        {timerPaused && <span>⏸️</span>}\n        {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\n      </Box>\n  {/* Timer now lives inside the main Paper (card) */}\n      {/* Navigation buttons outside the card */}\n      <span title={current === 0 ? 'İlk soru' : 'Önceki soruya git'}>\n      <IconButton\n        sx={{\n          display: { xs: 'none', md: 'inline-flex' },\n          position: 'absolute',\n          left: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current > 0 \n            ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)'\n            : 'rgba(255,255,255,0.5)',\n          color: current > 0 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current > 0 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current > 0 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: { md: 64, lg: 72 },\n          height: { md: 64, lg: 72 },\n          p: 0,\n          cursor: current > 0 ? 'pointer' : 'default',\n          opacity: current > 0 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current > 0 ? 'translateY(-50%) translateX(-4px)' : 'translateY(-50%)',\n            background: current > 0 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)'\n              : 'rgba(255,255,255,0.5)',\n            boxShadow: current > 0 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px',\n          },\n        }}\n        onClick={prevQuestion}\n        disabled={current === 0}\n      >\n        <ArrowBackIcon sx={{ fontSize: { md: 34, lg: 38 } }} />\n  </IconButton>\n  </span>\n      <span title={current === questions.length - 1 ? 'Son soru' : 'Sonraki soruya git'}>\n      <IconButton\n        sx={{\n          display: { xs: 'none', md: 'inline-flex' },\n          position: 'absolute',\n          right: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current < questions.length - 1 \n            ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)'\n            : 'rgba(255,255,255,0.5)',\n          color: current < questions.length - 1 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current < questions.length - 1 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current < questions.length - 1 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: { md: 64, lg: 72 },\n          height: { md: 64, lg: 72 },\n          p: 0,\n          cursor: current < questions.length - 1 ? 'pointer' : 'default',\n          opacity: current < questions.length - 1 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current < questions.length - 1 ? 'translateY(-50%) translateX(4px)' : 'translateY(-50%)',\n            background: current < questions.length - 1 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)'\n              : 'rgba(255,255,255,0.5)',\n            boxShadow: current < questions.length - 1 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px',\n          },\n        }}\n        onClick={nextQuestion}\n        disabled={current === questions.length - 1}\n      >\n        <ArrowForwardIcon sx={{ fontSize: { md: 34, lg: 38 } }} />\n  </IconButton>\n  </span>\n      {!reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: { xs: 2, sm: 3, md: 5 },\n            position: 'relative',\n            borderRadius: 4, \n            width: '100%', \n            maxWidth: { xs: 360, sm: 560, md: 600 },\n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n      {/* Mobile top controls: Finish (left) + Timer (right) inside the card */}\n          <Box\n            sx={{\n              position: 'absolute',\n              top: 10,\n              left: { xs: 18, md: 10 },\n              zIndex: 2,\n              display: { xs: 'flex', md: 'none' },\n            }}\n          >\n            <Button\n              size=\"small\"\n              onClick={handleFinish}\n              sx={{\n                textTransform: 'none',\n                fontWeight: 700,\n                borderRadius: 2,\n                px: 1.5,\n                py: 0.5,\n                boxShadow: '0 6px 16px rgba(0,0,0,0.12)',\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                color: '#fff',\n                border: '1px solid rgba(255,255,255,0.25)',\n                backdropFilter: 'blur(8px)'\n              }}\n            >\n              Bitir\n            </Button>\n          </Box>\n          {/* Inset timer at top-right inside the card (mobile only) */}\n          <Box\n            sx={{\n              position: 'absolute',\n              top: 10,\n              right: { xs: 18, md: 10 },\n              zIndex: 2,\n        display: { xs: 'flex', md: 'none' },\n              background: timerPaused \n                ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)' \n                : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n              color: '#fff',\n              px: { xs: 1.25, md: 3 },\n              py: { xs: 0.5, md: 1 },\n              borderRadius: { xs: 2, md: 3 },\n              fontWeight: 700,\n              fontSize: { xs: 13, md: 18 },\n              boxShadow: '0 6px 16px rgba(0, 184, 148, 0.4)',\n              alignItems: 'center',\n              backdropFilter: 'blur(10px)',\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              gap: { xs: 0.5, md: 1 },\n              transition: 'background-color 0.3s ease',\n            }}\n          >\n            {timerPaused && <span>⏸️</span>}\n            {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\n          </Box>\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length}\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: { xs: '1rem', sm: '1.1rem', md: '1.2rem' },\n              lineHeight: 1.6,\n              textAlign: 'center',\n              p: { xs: 1.25, sm: 1.5, md: 2 },\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = selected === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!selected;\n                return (\n          <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n            fontSize: { xs: 15, sm: 16, md: 18 },\n                      textTransform: 'none',\n                      borderRadius: 4,\n            py: { xs: 1.25, sm: 1.5, md: 2 },\n            px: { xs: 1.5, sm: 2 },\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',\n                      color: showColor && isSelected ? '#ffffff' : '#2c3e50',\n                      border: showColor && isSelected\n                        ? 'none'\n                        : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: !selected ? 'translateY(-2px)' : 'none',\n                        background: !showColor \n                          ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)' \n                          : undefined,\n                        boxShadow: !selected \n                          ? '0 8px 25px rgba(0, 184, 148, 0.2)' \n                          : undefined,\n                      },\n                    }}\n                    onClick={() => !showResult && handleSelect(idx)}\n                    disabled={!!selected}\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {formatText(opt)}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 14,\n                        color: '#ffffff',\n                        background: isCorrect \n                          ? 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)' \n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                        borderRadius: 12,\n                        padding: '4px 12px',\n                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? '✓ Doğru' : '✗ Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {showResult && (\n            <Box sx={{ mb: 2 }}>\n              <Typography color=\"success.main\" fontWeight={700} mb={1}>\n                {compareAnswers(selected || '', q.correct) ? 'Doğru!' : `Doğru Yanıt: ${getCorrectAnswerText()}`}\n              </Typography>\n            </Box>\n          )}\n          {/* Bottom controls: mobile shows Önceki/Bitir/Sonraki, desktop shows only Bitir */}\n          {!showSummary && (\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: { xs: 'space-between', md: 'center' }, gap: 1.5, mt: 3 }}>\n              <Button\n                variant=\"outlined\"\n                onClick={prevQuestion}\n                disabled={current === 0}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 700,\n                  borderWidth: 2,\n                  borderColor: '#00b894',\n                  color: '#00b894',\n                  '&:hover': { borderColor: '#00cec9', background: 'rgba(0,206,201,0.08)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Önceki\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleFinish}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 800,\n                  borderRadius: 3,\n                  px: 3,\n                  py: 1.2,\n                  boxShadow: 2,\n                  background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                  color: '#fff',\n                  '&:hover': { background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Testi Bitir\n              </Button>\n              <Button\n                variant=\"outlined\"\n                onClick={nextQuestion}\n                disabled={current === questions.length - 1}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 700,\n                  borderWidth: 2,\n                  borderColor: '#00b894',\n                  color: '#00b894',\n                  '&:hover': { borderColor: '#00cec9', background: 'rgba(0,206,201,0.08)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Sonraki\n              </Button>\n            </Box>\n          )}\n        </Paper>\n      )}\n      {/* Result popup bubble with question review */}\n      {showSummary && (\n        <Box sx={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', bgcolor: 'rgba(10,29,86,0.7)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <Box sx={{ bgcolor: '#fff', borderRadius: 6, boxShadow: 8, p: 4, minWidth: 320, maxWidth: '90vw', textAlign: 'center', position: 'relative' }}>\n            <Typography variant=\"h5\" fontWeight={700} color=\"#19376D\" mb={2}>Sınav Sonucu</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#43ea7c\" mb={1}>Doğru: {score}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#e74c3c\" mb={1}>Yanlış: {mistakes}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#f39c12\" mb={1}>Boş: {answers.filter(answer => answer === null || answer === undefined || answer === '').length}</Typography>\n            <Typography fontSize={18} fontWeight={500} color=\"#19376D\" mb={2}>Süre: {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}</Typography>\n            {/* Question review list */}\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, justifyContent: 'center', mb: 3 }}>\n              {questions.map((question, idx) => {\n                const userAnswer = answers[idx];\n                const isUnanswered = userAnswer === null || userAnswer === undefined || userAnswer === '';\n                const isCorrect = !isUnanswered && compareAnswers(userAnswer, question.correct);\n                \n                // Determine colors based on answer status\n                let borderColor, textColor, backgroundColor, hoverColor;\n                if (isUnanswered) {\n                  // Boş bırakılan sorular - turuncu\n                  borderColor = '#f39c12';\n                  textColor = '#f39c12';\n                  backgroundColor = '#fdf6e3';\n                  hoverColor = '#f8e49a';\n                } else if (isCorrect) {\n                  // Doğru cevaplar - yeşil\n                  borderColor = '#43ea7c';\n                  textColor = '#43ea7c';\n                  backgroundColor = '#eafaf3';\n                  hoverColor = '#c6f7e2';\n                } else {\n                  // Yanlış cevaplar - kırmızı\n                  borderColor = '#e74c3c';\n                  textColor = '#e74c3c';\n                  backgroundColor = '#fff0f0';\n                  hoverColor = '#ffe3e3';\n                }\n                \n                return (\n                  <Button\n                    key={idx}\n                    variant=\"outlined\"\n                    sx={{\n                      minWidth: 48,\n                      height: 48,\n                      fontWeight: 700,\n                      fontSize: 18,\n                      borderRadius: 3,\n                      border: 'none',\n                      color: '#ffffff',\n                      background: !answers[idx] \n                        ? 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)'\n                        : isCorrect\n                          ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',\n                      mx: 0.5,\n                      my: 0.5,\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: 'translateY(-3px)',\n                        boxShadow: '0 8px 25px rgba(0, 0, 0, 0.2)',\n                      },\n                    }}\n                    onClick={() => {\n                      setReviewMode(true);\n                      setShowSummary(false);\n                      setCurrent(idx);\n                      setSelected(answers[idx] || null);\n                      setShowResult(!!answers[idx]);\n                      setShowExplanation(false);\n                    }}\n                  >\n                    {idx + 1}\n                  </Button>\n                );\n              })}\n            </Box>\n            <Typography fontSize={15} color=\"#19376D\" mb={2}>\n              Soruları incelemek için tıklayın. Yeşil: Doğru, Kırmızı: Yanlış, Turuncu: Boş\n            </Typography>\n            {/* Action buttons */}\n            <Box sx={{ display: 'flex', justifyContent: 'center', gap: 2, mt: 2, flexWrap: 'wrap' }}>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={handleAddRanking}\n              >\n                Sıralamaya Ekle\n              </Button>\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  navigate('/categories');\n                }}\n              >\n                Kapat\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  handleCloseSummary();\n                }}\n              >\n                Tekrar Çöz\n              </Button>\n            </Box>\n            {/* Login warning text */}\n            {!localStorage.getItem('token') && (\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  display: 'block',\n                  textAlign: 'center', \n                  mt: 1, \n                  fontSize: '0.75rem',\n                  color: '#666',\n                  fontStyle: 'italic'\n                }}\n              >\n                Sıralamaya eklemek için üye girişi gerekli veya kayıt olmalısınız\n              </Typography>\n            )}\n          </Box>\n        </Box>\n      )}\n      {reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: 5, \n            borderRadius: 4, \n            minWidth: 340, \n            maxWidth: 600, \n            width: '100%', \n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length} (İnceleme)\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: '1.2rem',\n              lineHeight: 1.6,\n              textAlign: 'center',\n              padding: '16px',\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = answers[current] === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!answers[current];\n                return (\n                  <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n                      fontSize: 18,\n                      borderRadius: 4,\n                      py: 2,\n                      px: 2,\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : (isCorrect\n                              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)'\n                              : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'),\n                      color: showColor && isSelected ? '#ffffff' : isCorrect && showColor ? '#00b894' : '#2c3e50',\n                      border: isCorrect && showColor && !isSelected\n                        ? '2px solid #00b894'\n                        : showColor && isSelected\n                          ? 'none'\n                          : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : isCorrect && showColor\n                          ? '0 4px 15px rgba(0, 184, 148, 0.2)'\n                          : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      pointerEvents: 'none',\n                    }}\n                    disabled\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {opt}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 18,\n                        color: isCorrect ? '#43ea7c' : '#e74c3c',\n                        background: isCorrect ? '#eafaf3' : '#fff0f0',\n                        borderRadius: 8,\n                        padding: '2px 12px',\n                        boxShadow: '0 2px 8px rgba(67,234,124,0.08)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? 'Doğru' : 'Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {/* Show explanation toggle and content in review mode */}\n          {!!q.explanation && (\n            <Box sx={{ mb: 2 }}>\n              <Button variant=\"text\" onClick={() => setShowExplanation(e => !e)}>\n                {showExplanation ? 'Çözümü Gizle' : 'Çözümü Göster'}\n              </Button>\n              {showExplanation && (\n                <Typography mt={2} color=\"text.secondary\">{q.explanation}</Typography>\n              )}\n            </Box>\n          )}\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n              onClick={() => {\n                setReviewMode(false);\n                setShowSummary(true);\n                setShowExplanation(false);\n              }}\n            >\n              Sonuçlara Dön\n            </Button>\n          </Box>\n        </Paper>\n      )}\n    </Box>\n  );\n};\n\nexport default Exam;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}