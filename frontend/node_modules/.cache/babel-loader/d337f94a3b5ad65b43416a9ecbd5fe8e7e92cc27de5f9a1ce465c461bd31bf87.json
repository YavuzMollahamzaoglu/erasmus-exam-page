{"ast":null,"code":"var _jsxFileName = \"/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/pages/Exam.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport setMetaTags from '../utils/seo';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Paper, Typography, Button, CircularProgress, IconButton } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Exam = () => {\n  _s();\n  const {\n    testId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [questions, setQuestions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [current, setCurrent] = useState(0);\n  const [selected, setSelected] = useState(null);\n  const [showResult, setShowResult] = useState(false);\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [score, setScore] = useState(0);\n  const [mistakes, setMistakes] = useState(0);\n  const [showSummary, setShowSummary] = useState(false);\n  const [time, setTime] = useState(0);\n  const [reviewMode, setReviewMode] = useState(false);\n  const [answers, setAnswers] = useState([]);\n  const [timerPaused, setTimerPaused] = useState(false);\n  const timerRef = useRef(null);\n  const [error, setError] = useState(null);\n\n  // Helper function to format text: first letter uppercase, rest lowercase\n  const formatText = text => {\n    if (!text || text.length === 0) return text;\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  };\n\n  // Helper function for case insensitive comparison\n  const compareAnswers = (answer1, answer2) => {\n    return answer1.toLowerCase() === answer2.toLowerCase();\n  };\n  useEffect(() => {\n    var _location$state;\n    setMetaTags({\n      title: 'Sınav — Deneme Sınavı',\n      description: 'Gerçek sınav formatında deneme sınavı. Süre ve puanlama ile pratik yapın.',\n      keywords: 'deneme sınavı, ingilizce sınav, online sınav',\n      canonical: `/exam${testId ? `/${testId}` : ''}`,\n      ogImage: '/social-preview.svg'\n    });\n    // Fetch if no state or empty state provided\n    if (!((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.questions) || location.state.questions.length === 0) {\n      setLoading(true);\n      setError(null);\n\n      // For dynamic tests, use the questions endpoint directly with filters\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n      let apiUrl;\n      if (testId === 'dynamic' || testId !== null && testId !== void 0 && testId.startsWith('dynamic-')) {\n        apiUrl = `${API_URL}/api/questions`;\n\n        // Add category filter based on testId and lock series to Erasmus Sınavı\n        // so Üniversite Hazırlık soruları dinamik Erasmus kartlarına karışmasın.\n        const params = new URLSearchParams();\n        if (testId === 'dynamic-a1') {\n          params.set('category', 'A1');\n        } else if (testId === 'dynamic-a2' || testId === 'dynamic') {\n          params.set('category', 'A2');\n        } else if (testId === 'dynamic-b1') {\n          params.set('category', 'B1');\n        } else if (testId === 'dynamic-b2') {\n          params.set('category', 'B2');\n        }\n        // Restrict to Erasmus series explicitly\n        params.set('series', 'Erasmus Sınavı');\n        apiUrl += `?${params.toString()}`;\n      } else {\n        apiUrl = `${API_URL}/api/tests/${testId}/questions`;\n      }\n      console.log(`Fetching questions from: ${apiUrl}`);\n      const load = async () => {\n        try {\n          const res = await fetch(apiUrl);\n          console.log('API Response status:', res.status);\n          if (!res.ok) throw new Error(`Request failed with status ${res.status}`);\n          const data = await res.json();\n          let questionsData = data.questions || data || [];\n          // Fallback: if tests endpoint returned empty, try querying by seriesId directly\n          if ((!questionsData || questionsData.length === 0) && testId && !(testId === 'dynamic' || testId.startsWith('dynamic-'))) {\n            const API_URL2 = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n            const altUrl = `${API_URL2}/api/questions?seriesId=${encodeURIComponent(testId)}`;\n            console.log('Primary returned empty, trying fallback:', altUrl);\n            const res2 = await fetch(altUrl);\n            if (res2.ok) {\n              const d2 = await res2.json();\n              questionsData = d2.questions || d2 || [];\n            }\n          }\n          console.log('Questions data length:', questionsData.length);\n          const formattedQuestions = questionsData.map(q => {\n            // Parse options if they're in string format\n            let optionsArray = [];\n            if (Array.isArray(q.options)) {\n              optionsArray = q.options.map(formatText);\n            } else if (typeof q.options === 'string') {\n              try {\n                optionsArray = JSON.parse(q.options).map(formatText);\n              } catch {\n                optionsArray = [];\n              }\n            }\n\n            // Convert correct answer to letter if it's a word\n            let correctLetter = q.correct;\n            if (q.correct && q.correct.length > 1) {\n              // If correct is a word, find its index in options and convert to letter\n              const correctIndex = optionsArray.findIndex(option => option.toLowerCase() === q.correct.toLowerCase());\n              if (correctIndex !== -1) {\n                correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n                console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n              }\n            }\n            return {\n              ...q,\n              options: optionsArray,\n              correct: correctLetter\n            };\n          });\n          console.log(`Loaded ${formattedQuestions.length} questions`);\n          setQuestions(formattedQuestions);\n          setLoading(false);\n        } catch (error) {\n          console.error('Failed to fetch questions:', error);\n          setError('Sunucuya ulaşılamıyor. Lütfen sunucuyu başlatıp tekrar deneyin.');\n          setLoading(false);\n        }\n      };\n      load();\n    } else {\n      // Format questions from state as well\n      const formattedQuestions = location.state.questions.map(q => {\n        // Parse options if they're in string format\n        let optionsArray = [];\n        if (Array.isArray(q.options)) {\n          optionsArray = q.options.map(formatText);\n        } else if (typeof q.options === 'string') {\n          try {\n            optionsArray = JSON.parse(q.options).map(formatText);\n          } catch {\n            optionsArray = [];\n          }\n        }\n\n        // Convert correct answer to letter if it's a word\n        let correctLetter = q.correct;\n        if (q.correct && q.correct.length > 1) {\n          // If correct is a word, find its index in options and convert to letter\n          const correctIndex = optionsArray.findIndex(option => option.toLowerCase() === q.correct.toLowerCase());\n          if (correctIndex !== -1) {\n            correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n            console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n          }\n        }\n        return {\n          ...q,\n          options: optionsArray,\n          correct: correctLetter\n        };\n      });\n      setQuestions(formattedQuestions);\n      setLoading(false);\n    }\n  }, [location.state, testId]);\n\n  // Initialize answers array when questions are loaded\n  useEffect(() => {\n    if (questions.length > 0 && answers.length !== questions.length) {\n      setAnswers(Array(questions.length).fill(null));\n    }\n  }, [questions, answers.length]);\n\n  // Timer logic - pause when answer is selected or exam is finished\n  useEffect(() => {\n    if (showSummary || timerPaused) return;\n    timerRef.current = setInterval(() => {\n      setTime(t => t + 1);\n    }, 1000);\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [showSummary, timerPaused]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        minHeight: '100vh',\n        bgcolor: '#b2ebf2',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 4,\n          borderRadius: 4,\n          background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',\n          boxShadow: '0 20px 40px rgba(0,0,0,0.1)',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n          sx: {\n            color: '#00b894',\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            color: '#2c3e50',\n            fontWeight: 600\n          },\n          children: \"Sorular Y\\xFCkleniyor...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        minHeight: '100vh',\n        bgcolor: '#b2ebf2',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 4,\n          borderRadius: 4,\n          background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',\n          boxShadow: '0 20px 40px rgba(0,0,0,0.1)',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            color: '#c62828',\n            fontWeight: 600,\n            mb: 2\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: () => window.location.reload(),\n          children: \"Tekrar Dene\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this);\n  }\n  if (!questions.length) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      align: \"center\",\n      mt: 8,\n      children: \"Bu s\\u0131nav i\\xE7in soru bulunamad\\u0131.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 12\n    }, this);\n  }\n  const q = questions[current];\n  // Robustly fetch explanation: backend may store it under different keys (explanation_tr, explanation_A, etc.)\n  const getExplanation = question => {\n    if (!question || typeof question !== 'object') return undefined;\n    // Prefer exact keys first\n    const preferred = ['explanation', 'explanation_tr', 'explanation_tr_a', 'explanation_A', 'explanationTr', 'explanation_tr'];\n    for (const k of preferred) {\n      if (Object.prototype.hasOwnProperty.call(question, k) && question[k]) return question[k];\n    }\n    // Fallback: any key that contains 'explan' (case-insensitive)\n    const found = Object.keys(question).find(k => /explan/i.test(k) && question[k]);\n    if (found) return question[found];\n    return undefined;\n  };\n  const explanation = getExplanation(q);\n  // Ensure options is always an array\n  let options = [];\n  if (Array.isArray(q.options)) {\n    options = q.options;\n  } else if (typeof q.options === 'string') {\n    try {\n      options = JSON.parse(q.options);\n    } catch {\n      options = [];\n    }\n  }\n\n  // Helper function to get correct answer text\n  const getCorrectAnswerText = () => {\n    if (!q.correct || options.length === 0) return q.correct;\n    const correctIndex = q.correct.charCodeAt(0) - 65; // A=0, B=1, C=2, D=3\n    const correctText = options[correctIndex];\n    return correctText ? `${q.correct}) ${correctText}` : q.correct;\n  };\n  const handleSelect = optionIndex => {\n    const selectedLetter = String.fromCharCode(65 + optionIndex); // 0->A, 1->B, 2->C, 3->D\n    console.log('Selected option index:', optionIndex);\n    console.log('Selected letter:', selectedLetter);\n    console.log('Question correct answer:', q.correct);\n    console.log('Question correct answer type:', typeof q.correct);\n    setSelected(selectedLetter);\n    setShowResult(true);\n    setTimerPaused(true); // Pause timer when answer is selected\n    setAnswers(prev => {\n      const copy = [...prev];\n      copy[current] = selectedLetter;\n      return copy;\n    });\n    if (compareAnswers(selectedLetter, q.correct)) {\n      setScore(s => s + 1);\n    } else {\n      setMistakes(m => m + 1);\n    }\n    // Show explanation immediately after selection so users see why the answer is correct/wrong\n    setShowExplanation(true);\n  };\n  const nextQuestion = () => {\n    if (current < questions.length - 1) {\n      setCurrent(c => c + 1);\n      setSelected(answers[current + 1] || null);\n      setShowResult(!!answers[current + 1]);\n      setShowExplanation(false);\n      setTimerPaused(false); // Resume timer when moving to next question\n    }\n  };\n\n  // Sınavı history'ye kaydet (explicit payload to avoid stale state)\n  const saveToHistory = async payload => {\n    const token = localStorage.getItem('token');\n    // Kullanıcı giriş yapmadıysa history kaydı denemeyelim; sessizce çık\n    if (!token) return;\n    try {\n      var _questions$, _questions$2, _questions$3, _questions$4;\n      const res = await fetch('http://localhost:4000/api/history', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            'Authorization': `Bearer ${token}`\n          } : {})\n        },\n        body: JSON.stringify({\n          category: typeof ((_questions$ = questions[0]) === null || _questions$ === void 0 ? void 0 : _questions$.categoryId) === 'string' ? (_questions$2 = questions[0]) === null || _questions$2 === void 0 ? void 0 : _questions$2.categoryId : String((_questions$3 = questions[0]) === null || _questions$3 === void 0 ? void 0 : _questions$3.categoryId),\n          seriesId: ((_questions$4 = questions[0]) === null || _questions$4 === void 0 ? void 0 : _questions$4.seriesId) || null,\n          duration: payload ? payload.duration : time,\n          correct: payload ? payload.correct : score,\n          incorrect: payload ? payload.incorrect : mistakes,\n          questions: questions.map((q, idx) => ({\n            questionId: q.id,\n            userAnswer: payload ? payload.answersArray[idx] : answers[idx],\n            isCorrect: (() => {\n              const ua = payload ? payload.answersArray[idx] : answers[idx];\n              return ua ? compareAnswers(ua, q.correct) : false;\n            })()\n          }))\n        })\n      });\n      if (!res.ok) {\n        try {\n          const data = await res.json();\n          // eslint-disable-next-line no-console\n          console.error('History save error:', data);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error('History save error (no json):', res.status, res.statusText);\n        }\n        // Do not alert here; interceptor will handle auth expiry. Avoid noisy UI.\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error('History save network error:', e);\n      // silence network errors for history save to avoid user confusion\n    }\n  };\n  const handleFinish = async () => {\n    // Ensure answers array is properly sized\n    const finalizedAnswers = Array.from({\n      length: questions.length\n    }, (_, i) => answers[i] !== undefined ? answers[i] : null);\n    if (answers.length === 0 || answers.length !== questions.length) {\n      setAnswers(finalizedAnswers);\n    }\n\n    // Calculate final scores\n    let correctCount = 0;\n    let incorrectCount = 0;\n    let unansweredCount = 0;\n    questions.forEach((question, idx) => {\n      const userAnswer = finalizedAnswers[idx];\n      if (userAnswer === null || userAnswer === undefined || userAnswer === '') {\n        unansweredCount++;\n      } else if (compareAnswers(userAnswer, question.correct)) {\n        correctCount++;\n      } else {\n        incorrectCount++;\n      }\n    });\n\n    // Update state with calculated scores\n    setScore(correctCount);\n    setMistakes(incorrectCount);\n    setShowSummary(true);\n    setReviewMode(false);\n    setTimerPaused(true); // Permanently pause timer when exam is finished\n    if (timerRef.current) clearInterval(timerRef.current);\n    await saveToHistory({\n      correct: correctCount,\n      incorrect: incorrectCount,\n      duration: time,\n      answersArray: finalizedAnswers\n    });\n  };\n  const handleCloseSummary = () => {\n    setShowSummary(false);\n    setReviewMode(false);\n    setCurrent(0);\n    setSelected(null);\n    setShowResult(false);\n    setShowExplanation(false);\n    setScore(0);\n    setMistakes(0);\n    setTime(0);\n    setAnswers([]);\n  };\n  const handleAddRanking = () => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Redirect to login page if not logged in\n      navigate('/login');\n      return;\n    }\n\n    // Determine current level from route\n    let examLevel;\n    if (testId === 'dynamic-a1') examLevel = 'A1';else if (testId === 'dynamic-a2' || testId === 'dynamic') examLevel = 'A2';else if (testId === 'dynamic-b1') examLevel = 'B1';else if (testId === 'dynamic-b2') examLevel = 'B2';\n\n    // Send all relevant exam result data to backend\n    const categoryId = q.categoryId;\n    const seriesId = q.seriesId;\n    fetch('http://localhost:4000/api/rankings', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        score,\n        time,\n        categoryId,\n        seriesId,\n        correct: score,\n        mistakes\n      })\n    }).then(async res => {\n      let data;\n      try {\n        data = await res.json();\n      } catch (e) {\n        data = {};\n      }\n      if (!res.ok) {\n        var _data, _data2, _data3;\n        console.error('Ranking save error:', data);\n        let errorMessage = 'Sıralamaya eklenemedi: ' + (((_data = data) === null || _data === void 0 ? void 0 : _data.message) || res.statusText);\n\n        // Auth-related errors\n        if (((_data2 = data) === null || _data2 === void 0 ? void 0 : _data2.message) === 'Authorization header missing' || res.status === 401) {\n          errorMessage = 'Sıralamaya eklemek için giriş yapmalısınız.';\n        }\n        // Backend may block creating ranking-only rows to prevent \"Detay Yok\" duplicates\n        if (typeof ((_data3 = data) === null || _data3 === void 0 ? void 0 : _data3.error) === 'string' && data.error.includes('Detailed test record not found')) {\n          errorMessage = 'Önce sınavı başarıyla bitirip kaydettiğinizden emin olun, sonra sıralamaya ekleyin.';\n        }\n        alert(errorMessage);\n        return;\n      }\n      setShowSummary(false);\n      // Navigate to rankings filtered by the user's level\n      navigate(examLevel ? `/rankings?exam=${examLevel}` : '/rankings');\n    }).catch(err => {\n      console.error('Ranking save error:', err);\n      alert('Failed to save ranking. Network error.');\n    });\n  };\n  const prevQuestion = () => {\n    if (current > 0) {\n      setCurrent(c => c - 1);\n      setSelected(answers[current - 1] || null);\n      setShowResult(!!answers[current - 1]);\n      setShowExplanation(false);\n      // If the previous question was already answered, keep timer paused\n      setTimerPaused(!!answers[current - 1]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      bgcolor: '#b2ebf2',\n      display: 'flex',\n      alignItems: {\n        xs: 'center',\n        md: 'flex-start'\n      },\n      justifyContent: 'center',\n      position: 'relative',\n      pt: {\n        xs: 2,\n        md: 4,\n        lg: 6\n      },\n      pb: {\n        xs: 12,\n        md: 16\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: {\n          xs: 'none',\n          md: 'flex'\n        },\n        position: 'fixed',\n        top: {\n          md: 84,\n          lg: 96\n        },\n        left: {\n          md: 20,\n          lg: 28\n        },\n        zIndex: 1200\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleFinish,\n        sx: {\n          textTransform: 'none',\n          fontWeight: 800,\n          borderRadius: 3,\n          px: {\n            md: 2,\n            lg: 2.5\n          },\n          py: {\n            md: 0.75,\n            lg: 1\n          },\n          boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n          background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          border: '1px solid rgba(255,255,255,0.25)',\n          backdropFilter: 'blur(8px)',\n          '&:hover': {\n            background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)'\n          }\n        },\n        children: \"Testi Bitir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: {\n          xs: 'none',\n          md: 'flex'\n        },\n        position: 'fixed',\n        top: {\n          md: 84,\n          lg: 96\n        },\n        right: {\n          md: 20,\n          lg: 28\n        },\n        zIndex: 1200,\n        background: timerPaused ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)' : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n        color: '#fff',\n        px: {\n          md: 2,\n          lg: 2.5\n        },\n        py: {\n          md: 0.75,\n          lg: 1\n        },\n        borderRadius: 3,\n        fontWeight: 800,\n        fontSize: {\n          md: 16,\n          lg: 18\n        },\n        boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n        alignItems: 'center',\n        backdropFilter: 'blur(8px)',\n        border: '1px solid rgba(255,255,255,0.25)',\n        gap: 1\n      },\n      \"aria-label\": \"exam-timer-desktop\",\n      children: [timerPaused && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u23F8\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 25\n      }, this), Math.floor(time / 60), \":\", (time % 60).toString().padStart(2, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      title: current === 0 ? 'İlk soru' : 'Önceki soruya git',\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        sx: {\n          display: {\n            xs: 'none',\n            md: 'inline-flex'\n          },\n          position: 'absolute',\n          left: {\n            xs: 8,\n            md: 32\n          },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current > 0 ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)' : 'rgba(255,255,255,0.5)',\n          color: current > 0 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current > 0 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current > 0 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: {\n            md: 64,\n            lg: 72\n          },\n          height: {\n            md: 64,\n            lg: 72\n          },\n          p: 0,\n          cursor: current > 0 ? 'pointer' : 'default',\n          opacity: current > 0 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current > 0 ? 'translateY(-50%) translateX(-4px)' : 'translateY(-50%)',\n            background: current > 0 ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)' : 'rgba(255,255,255,0.5)',\n            boxShadow: current > 0 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)'\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px'\n          }\n        },\n        onClick: prevQuestion,\n        disabled: current === 0,\n        children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n          sx: {\n            fontSize: {\n              md: 34,\n              lg: 38\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      title: current === questions.length - 1 ? 'Son soru' : 'Sonraki soruya git',\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        sx: {\n          display: {\n            xs: 'none',\n            md: 'inline-flex'\n          },\n          position: 'absolute',\n          right: {\n            xs: 8,\n            md: 32\n          },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current < questions.length - 1 ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)' : 'rgba(255,255,255,0.5)',\n          color: current < questions.length - 1 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current < questions.length - 1 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current < questions.length - 1 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: {\n            md: 64,\n            lg: 72\n          },\n          height: {\n            md: 64,\n            lg: 72\n          },\n          p: 0,\n          cursor: current < questions.length - 1 ? 'pointer' : 'default',\n          opacity: current < questions.length - 1 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current < questions.length - 1 ? 'translateY(-50%) translateX(4px)' : 'translateY(-50%)',\n            background: current < questions.length - 1 ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)' : 'rgba(255,255,255,0.5)',\n            boxShadow: current < questions.length - 1 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)'\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px'\n          }\n        },\n        onClick: nextQuestion,\n        disabled: current === questions.length - 1,\n        children: /*#__PURE__*/_jsxDEV(ArrowForwardIcon, {\n          sx: {\n            fontSize: {\n              md: 34,\n              lg: 38\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this), !reviewMode && /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 6,\n      sx: {\n        p: {\n          xs: 2,\n          sm: 3,\n          md: 5\n        },\n        position: 'relative',\n        borderRadius: 4,\n        width: '100%',\n        maxWidth: {\n          xs: 360,\n          sm: 560,\n          md: 600\n        },\n        background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid rgba(255, 255, 255, 0.2)',\n        boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n        transition: 'transform 0.3s ease',\n        '&:hover': {\n          transform: 'translateY(-5px)'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'absolute',\n          top: 10,\n          left: {\n            xs: 18,\n            md: 10\n          },\n          zIndex: 2,\n          display: {\n            xs: 'flex',\n            md: 'none'\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          onClick: handleFinish,\n          sx: {\n            textTransform: 'none',\n            fontWeight: 700,\n            borderRadius: 2,\n            px: 1.5,\n            py: 0.5,\n            boxShadow: '0 6px 16px rgba(0,0,0,0.12)',\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            color: '#fff',\n            border: '1px solid rgba(255,255,255,0.25)',\n            backdropFilter: 'blur(8px)'\n          },\n          children: \"Bitir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'absolute',\n          top: 10,\n          right: {\n            xs: 18,\n            md: 10\n          },\n          zIndex: 2,\n          display: {\n            xs: 'flex',\n            md: 'none'\n          },\n          background: timerPaused ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)' : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          px: {\n            xs: 1.25,\n            md: 3\n          },\n          py: {\n            xs: 0.5,\n            md: 1\n          },\n          borderRadius: {\n            xs: 2,\n            md: 3\n          },\n          fontWeight: 700,\n          fontSize: {\n            xs: 13,\n            md: 18\n          },\n          boxShadow: '0 6px 16px rgba(0, 184, 148, 0.4)',\n          alignItems: 'center',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          gap: {\n            xs: 0.5,\n            md: 1\n          },\n          transition: 'background-color 0.3s ease'\n        },\n        children: [timerPaused && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u23F8\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 29\n        }, this), Math.floor(time / 60), \":\", (time % 60).toString().padStart(2, '0')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          mb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          fontWeight: 700,\n          align: \"center\",\n          sx: {\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            backgroundClip: 'text',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'\n          },\n          children: [\"Soru \", current + 1, \" / \", questions.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        mb: 3,\n        sx: {\n          color: '#2c3e50',\n          fontWeight: 600,\n          fontSize: {\n            xs: '1rem',\n            sm: '1.1rem',\n            md: '1.2rem'\n          },\n          lineHeight: 1.6,\n          textAlign: 'center',\n          p: {\n            xs: 1.25,\n            sm: 1.5,\n            md: 2\n          },\n          background: 'rgba(255, 255, 255, 0.7)',\n          borderRadius: '12px',\n          border: '1px solid rgba(0, 184, 148, 0.2)'\n        },\n        children: q.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n          mb: 3\n        },\n        children: options.length > 0 ? options.map((opt, idx) => {\n          const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n          const isSelected = selected === optionLetter;\n          const isCorrect = compareAnswers(optionLetter, q.correct);\n          const showColor = !!selected;\n          return /*#__PURE__*/_jsxDEV(Button, {\n            variant: isSelected ? 'contained' : 'outlined',\n            color: showColor ? isCorrect ? 'primary' : isSelected ? 'error' : 'primary' : 'primary',\n            sx: {\n              textAlign: 'left',\n              fontWeight: 600,\n              fontSize: {\n                xs: 15,\n                sm: 16,\n                md: 18\n              },\n              textTransform: 'none',\n              borderRadius: 4,\n              py: {\n                xs: 1.25,\n                sm: 1.5,\n                md: 2\n              },\n              px: {\n                xs: 1.5,\n                sm: 2\n              },\n              background: !showColor ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)' : isSelected ? isCorrect ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)' : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)' : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',\n              color: showColor && isSelected ? '#ffffff' : '#2c3e50',\n              border: showColor && isSelected ? 'none' : '2px solid rgba(0, 184, 148, 0.3)',\n              backdropFilter: 'blur(10px)',\n              boxShadow: isSelected ? '0 8px 25px rgba(0, 184, 148, 0.3)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n              position: 'relative',\n              transition: 'all 0.3s ease',\n              '&:hover': {\n                transform: !selected ? 'translateY(-2px)' : 'none',\n                background: !showColor ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)' : undefined,\n                boxShadow: !selected ? '0 8px 25px rgba(0, 184, 148, 0.2)' : undefined\n              }\n            },\n            onClick: () => !showResult && handleSelect(idx),\n            disabled: !!selected,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                position: 'relative',\n                zIndex: 2\n              },\n              children: [String.fromCharCode(65 + idx), \") \", formatText(opt)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 791,\n              columnNumber: 21\n            }, this), showColor && isSelected && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                position: 'absolute',\n                right: 16,\n                top: '50%',\n                transform: 'translateY(-50%)',\n                fontWeight: 700,\n                fontSize: 14,\n                color: '#ffffff',\n                background: isCorrect ? 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)' : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                borderRadius: 12,\n                padding: '4px 12px',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)',\n                zIndex: 3\n              },\n              children: isCorrect ? '✓ Doğru' : '✗ Yanlış'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 793,\n              columnNumber: 23\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 11\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          fontWeight: 600,\n          mb: 2,\n          children: \"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 816,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 11\n      }, this), showResult && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"success.main\",\n          fontWeight: 700,\n          mb: 1,\n          children: compareAnswers(selected || '', q.correct) ? 'Doğru!' : `Doğru Yanıt: ${getCorrectAnswerText()}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 820,\n        columnNumber: 13\n      }, this), !showSummary && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: {\n            xs: 'space-between',\n            md: 'center'\n          },\n          gap: 1.5,\n          mt: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: prevQuestion,\n          disabled: current === 0,\n          sx: {\n            textTransform: 'none',\n            fontWeight: 700,\n            borderWidth: 2,\n            borderColor: '#00b894',\n            color: '#00b894',\n            '&:hover': {\n              borderColor: '#00cec9',\n              background: 'rgba(0,206,201,0.08)'\n            },\n            display: {\n              xs: 'inline-flex',\n              md: 'none'\n            }\n          },\n          children: \"\\xD6nceki\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 829,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleFinish,\n          sx: {\n            textTransform: 'none',\n            fontWeight: 800,\n            borderRadius: 3,\n            px: 3,\n            py: 1.2,\n            boxShadow: 2,\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            color: '#fff',\n            '&:hover': {\n              background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)'\n            },\n            display: {\n              xs: 'inline-flex',\n              md: 'none'\n            }\n          },\n          children: \"Testi Bitir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: nextQuestion,\n          disabled: current === questions.length - 1,\n          sx: {\n            textTransform: 'none',\n            fontWeight: 700,\n            borderWidth: 2,\n            borderColor: '#00b894',\n            color: '#00b894',\n            '&:hover': {\n              borderColor: '#00cec9',\n              background: 'rgba(0,206,201,0.08)'\n            },\n            display: {\n              xs: 'inline-flex',\n              md: 'none'\n            }\n          },\n          children: \"Sonraki\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 9\n    }, this), showSummary && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        bgcolor: 'rgba(10,29,86,0.7)',\n        zIndex: 9999,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          bgcolor: '#fff',\n          borderRadius: 6,\n          boxShadow: 8,\n          p: 4,\n          minWidth: 320,\n          maxWidth: '90vw',\n          textAlign: 'center',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          fontWeight: 700,\n          color: \"#19376D\",\n          mb: 2,\n          children: \"S\\u0131nav Sonucu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 887,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 20,\n          fontWeight: 600,\n          color: \"#43ea7c\",\n          mb: 1,\n          children: [\"Do\\u011Fru: \", score]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 20,\n          fontWeight: 600,\n          color: \"#e74c3c\",\n          mb: 1,\n          children: [\"Yanl\\u0131\\u015F: \", mistakes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 20,\n          fontWeight: 600,\n          color: \"#f39c12\",\n          mb: 1,\n          children: [\"Bo\\u015F: \", answers.filter(answer => answer === null || answer === undefined || answer === '').length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 890,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 18,\n          fontWeight: 500,\n          color: \"#19376D\",\n          mb: 2,\n          children: [\"S\\xFCre: \", Math.floor(time / 60), \":\", (time % 60).toString().padStart(2, '0')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: 2,\n            justifyContent: 'center',\n            mb: 3\n          },\n          children: questions.map((question, idx) => {\n            const userAnswer = answers[idx];\n            const isUnanswered = userAnswer === null || userAnswer === undefined || userAnswer === '';\n            const isCorrect = !isUnanswered && compareAnswers(userAnswer, question.correct);\n\n            // Determine colors based on answer status\n            let borderColor, textColor, backgroundColor, hoverColor;\n            if (isUnanswered) {\n              // Boş bırakılan sorular - turuncu\n              borderColor = '#f39c12';\n              textColor = '#f39c12';\n              backgroundColor = '#fdf6e3';\n              hoverColor = '#f8e49a';\n            } else if (isCorrect) {\n              // Doğru cevaplar - yeşil\n              borderColor = '#43ea7c';\n              textColor = '#43ea7c';\n              backgroundColor = '#eafaf3';\n              hoverColor = '#c6f7e2';\n            } else {\n              // Yanlış cevaplar - kırmızı\n              borderColor = '#e74c3c';\n              textColor = '#e74c3c';\n              backgroundColor = '#fff0f0';\n              hoverColor = '#ffe3e3';\n            }\n            return /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              sx: {\n                minWidth: 48,\n                height: 48,\n                fontWeight: 700,\n                fontSize: 18,\n                borderRadius: 3,\n                border: 'none',\n                color: '#ffffff',\n                background: !answers[idx] ? 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)' : isCorrect ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)' : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                backdropFilter: 'blur(10px)',\n                boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',\n                mx: 0.5,\n                my: 0.5,\n                transition: 'all 0.3s ease',\n                '&:hover': {\n                  transform: 'translateY(-3px)',\n                  boxShadow: '0 8px 25px rgba(0, 0, 0, 0.2)'\n                }\n              },\n              onClick: () => {\n                setReviewMode(true);\n                setShowSummary(false);\n                setCurrent(idx);\n                setSelected(answers[idx] || null);\n                setShowResult(!!answers[idx]);\n                setShowExplanation(false);\n              },\n              children: idx + 1\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 922,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 15,\n          color: \"#19376D\",\n          mb: 2,\n          children: \"Sorular\\u0131 incelemek i\\xE7in t\\u0131klay\\u0131n. Ye\\u015Fil: Do\\u011Fru, K\\u0131rm\\u0131z\\u0131: Yanl\\u0131\\u015F, Turuncu: Bo\\u015F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 962,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            gap: 2,\n            mt: 2,\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"success\",\n            sx: {\n              fontWeight: 700,\n              fontSize: 16,\n              borderRadius: 3,\n              px: 4,\n              py: 1.2,\n              boxShadow: 2,\n              textTransform: 'none'\n            },\n            onClick: handleAddRanking,\n            children: \"S\\u0131ralamaya Ekle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 967,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            sx: {\n              fontWeight: 700,\n              fontSize: 16,\n              borderRadius: 3,\n              px: 4,\n              py: 1.2,\n              boxShadow: 2,\n              textTransform: 'none'\n            },\n            onClick: () => {\n              navigate('/categories');\n            },\n            children: \"Kapat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 975,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            sx: {\n              fontWeight: 700,\n              fontSize: 16,\n              borderRadius: 3,\n              px: 4,\n              py: 1.2,\n              boxShadow: 2,\n              textTransform: 'none'\n            },\n            onClick: () => {\n              handleCloseSummary();\n            },\n            children: \"Tekrar \\xC7\\xF6z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 985,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 966,\n          columnNumber: 13\n        }, this), !localStorage.getItem('token') && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            display: 'block',\n            textAlign: 'center',\n            mt: 1,\n            fontSize: '0.75rem',\n            color: '#666',\n            fontStyle: 'italic'\n          },\n          children: \"S\\u0131ralamaya eklemek i\\xE7in \\xFCye giri\\u015Fi gerekli veya kay\\u0131t olmal\\u0131s\\u0131n\\u0131z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 886,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 885,\n      columnNumber: 9\n    }, this), reviewMode && /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 6,\n      sx: {\n        p: 5,\n        borderRadius: 4,\n        minWidth: 340,\n        maxWidth: 600,\n        width: '100%',\n        background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n        backdropFilter: 'blur(10px)',\n        border: '1px solid rgba(255, 255, 255, 0.2)',\n        boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n        transition: 'transform 0.3s ease',\n        '&:hover': {\n          transform: 'translateY(-5px)'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          mb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          fontWeight: 700,\n          align: \"center\",\n          sx: {\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            backgroundClip: 'text',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'\n          },\n          children: [\"Soru \", current + 1, \" / \", questions.length, \" (\\u0130nceleme)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1034,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        mb: 3,\n        sx: {\n          color: '#2c3e50',\n          fontWeight: 600,\n          fontSize: '1.2rem',\n          lineHeight: 1.6,\n          textAlign: 'center',\n          padding: '16px',\n          background: 'rgba(255, 255, 255, 0.7)',\n          borderRadius: '12px',\n          border: '1px solid rgba(0, 184, 148, 0.2)'\n        },\n        children: q.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1050,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n          mb: 3\n        },\n        children: options.length > 0 ? options.map((opt, idx) => {\n          const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n          const isSelected = answers[current] === optionLetter;\n          const isCorrect = compareAnswers(optionLetter, q.correct);\n          const showColor = !!answers[current];\n          return /*#__PURE__*/_jsxDEV(Button, {\n            variant: isSelected ? 'contained' : 'outlined',\n            color: showColor ? isCorrect ? 'primary' : isSelected ? 'error' : 'primary' : 'primary',\n            sx: {\n              textAlign: 'left',\n              fontWeight: 600,\n              fontSize: 18,\n              borderRadius: 4,\n              py: 2,\n              px: 2,\n              background: !showColor ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)' : isSelected ? isCorrect ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)' : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)' : isCorrect ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)' : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',\n              color: showColor && isSelected ? '#ffffff' : isCorrect && showColor ? '#00b894' : '#2c3e50',\n              border: isCorrect && showColor && !isSelected ? '2px solid #00b894' : showColor && isSelected ? 'none' : '2px solid rgba(0, 184, 148, 0.3)',\n              backdropFilter: 'blur(10px)',\n              boxShadow: isSelected ? '0 8px 25px rgba(0, 184, 148, 0.3)' : isCorrect && showColor ? '0 4px 15px rgba(0, 184, 148, 0.2)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n              position: 'relative',\n              transition: 'all 0.3s ease',\n              pointerEvents: 'none'\n            },\n            disabled: true,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                position: 'relative',\n                zIndex: 2\n              },\n              children: [String.fromCharCode(65 + idx), \") \", opt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1113,\n              columnNumber: 21\n            }, this), showColor && isSelected && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                position: 'absolute',\n                right: 16,\n                top: '50%',\n                transform: 'translateY(-50%)',\n                fontWeight: 700,\n                fontSize: 18,\n                color: isCorrect ? '#43ea7c' : '#e74c3c',\n                background: isCorrect ? '#eafaf3' : '#fff0f0',\n                borderRadius: 8,\n                padding: '2px 12px',\n                boxShadow: '0 2px 8px rgba(67,234,124,0.08)',\n                zIndex: 3\n              },\n              children: isCorrect ? 'Doğru' : 'Yanlış'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 23\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1075,\n            columnNumber: 19\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          fontWeight: 600,\n          mb: 2,\n          children: \"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1136,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1067,\n        columnNumber: 11\n      }, this), !!q.explanation && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"text\",\n          onClick: () => setShowExplanation(e => !e),\n          children: showExplanation ? 'Çözümü Gizle' : 'Çözümü Göster'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 15\n        }, this), showExplanation && /*#__PURE__*/_jsxDEV(Typography, {\n          mt: 2,\n          color: \"text.secondary\",\n          children: q.explanation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1141,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"primary\",\n          sx: {\n            fontWeight: 700,\n            fontSize: 16,\n            borderRadius: 3,\n            px: 4,\n            py: 1.2,\n            boxShadow: 2,\n            textTransform: 'none'\n          },\n          onClick: () => {\n            setReviewMode(false);\n            setShowSummary(true);\n            setShowExplanation(false);\n          },\n          children: \"Sonu\\xE7lara D\\xF6n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1150,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1016,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 481,\n    columnNumber: 5\n  }, this);\n};\n_s(Exam, \"2po5K5wB6Q4sDgwSb8eO6O4SEcY=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = Exam;\nexport default Exam;\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useEffect","useState","useRef","setMetaTags","useParams","useLocation","useNavigate","Box","Paper","Typography","Button","CircularProgress","IconButton","ArrowBackIcon","ArrowForwardIcon","jsxDEV","_jsxDEV","Exam","_s","testId","location","navigate","questions","setQuestions","loading","setLoading","current","setCurrent","selected","setSelected","showResult","setShowResult","showExplanation","setShowExplanation","score","setScore","mistakes","setMistakes","showSummary","setShowSummary","time","setTime","reviewMode","setReviewMode","answers","setAnswers","timerPaused","setTimerPaused","timerRef","error","setError","formatText","text","length","charAt","toUpperCase","slice","toLowerCase","compareAnswers","answer1","answer2","_location$state","title","description","keywords","canonical","ogImage","state","API_URL","process","env","REACT_APP_API_URL","apiUrl","startsWith","params","URLSearchParams","set","toString","console","log","load","res","fetch","status","ok","Error","data","json","questionsData","API_URL2","altUrl","encodeURIComponent","res2","d2","formattedQuestions","map","q","optionsArray","Array","isArray","options","JSON","parse","correctLetter","correct","correctIndex","findIndex","option","String","fromCharCode","fill","setInterval","t","clearInterval","sx","minHeight","bgcolor","display","alignItems","justifyContent","children","p","borderRadius","background","boxShadow","textAlign","color","mb","fileName","_jsxFileName","lineNumber","columnNumber","variant","fontWeight","onClick","window","reload","align","mt","getExplanation","question","undefined","preferred","k","Object","prototype","hasOwnProperty","call","found","keys","find","test","explanation","getCorrectAnswerText","charCodeAt","correctText","handleSelect","optionIndex","selectedLetter","prev","copy","s","m","nextQuestion","c","saveToHistory","payload","token","localStorage","getItem","_questions$","_questions$2","_questions$3","_questions$4","method","headers","body","stringify","category","categoryId","seriesId","duration","incorrect","idx","questionId","id","userAnswer","answersArray","isCorrect","ua","e","statusText","handleFinish","finalizedAnswers","from","_","i","correctCount","incorrectCount","unansweredCount","forEach","handleCloseSummary","handleAddRanking","examLevel","Authorization","then","_data","_data2","_data3","errorMessage","message","includes","alert","catch","err","prevQuestion","xs","md","position","pt","lg","pb","top","left","zIndex","textTransform","px","py","border","backdropFilter","right","fontSize","gap","Math","floor","padStart","transform","width","height","cursor","opacity","transition","outline","outlineOffset","disabled","elevation","sm","maxWidth","size","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","textShadow","lineHeight","flexDirection","opt","optionLetter","isSelected","showColor","style","padding","borderWidth","borderColor","minWidth","filter","answer","flexWrap","isUnanswered","textColor","backgroundColor","hoverColor","mx","my","fontStyle","pointerEvents","_c","$RefreshReg$"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/pages/Exam.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport setMetaTags from '../utils/seo';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Paper, Typography, Button, CircularProgress, IconButton } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\n\ninterface Question {\n  id: string;\n  text: string;\n  options: string[];\n  correct: string;\n  // explanation may be optional or stored under different keys (explanation_tr, explanation_A, ...)\n  explanation?: string;\n  categoryId: number;\n  seriesId: string;\n}\n\nconst Exam: React.FC = () => {\n  const { testId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [current, setCurrent] = useState(0);\n  const [selected, setSelected] = useState<string | null>(null);\n  const [showResult, setShowResult] = useState(false);\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [score, setScore] = useState(0);\n  const [mistakes, setMistakes] = useState(0);\n  const [showSummary, setShowSummary] = useState(false);\n  const [time, setTime] = useState(0);\n  const [reviewMode, setReviewMode] = useState(false);\n  const [answers, setAnswers] = useState<(string | null)[]>([]);\n  const [timerPaused, setTimerPaused] = useState(false);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Helper function to format text: first letter uppercase, rest lowercase\n  const formatText = (text: string) => {\n    if (!text || text.length === 0) return text;\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  };\n\n  // Helper function for case insensitive comparison\n  const compareAnswers = (answer1: string, answer2: string) => {\n    return answer1.toLowerCase() === answer2.toLowerCase();\n  };\n\n  useEffect(() => {\n    setMetaTags({\n      title: 'Sınav — Deneme Sınavı',\n      description: 'Gerçek sınav formatında deneme sınavı. Süre ve puanlama ile pratik yapın.',\n      keywords: 'deneme sınavı, ingilizce sınav, online sınav',\n      canonical: `/exam${testId ? `/${testId}` : ''}`,\n      ogImage: '/social-preview.svg'\n    });\n    // Fetch if no state or empty state provided\n    if (!location.state?.questions || location.state.questions.length === 0) {\n      setLoading(true);\n      setError(null);\n      \n      // For dynamic tests, use the questions endpoint directly with filters\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n      let apiUrl: string;\n      \n      if (testId === 'dynamic' || testId?.startsWith('dynamic-')) {\n        apiUrl = `${API_URL}/api/questions`;\n\n        // Add category filter based on testId and lock series to Erasmus Sınavı\n        // so Üniversite Hazırlık soruları dinamik Erasmus kartlarına karışmasın.\n        const params = new URLSearchParams();\n        if (testId === 'dynamic-a1') {\n          params.set('category', 'A1');\n        } else if (testId === 'dynamic-a2' || testId === 'dynamic') {\n          params.set('category', 'A2');\n        } else if (testId === 'dynamic-b1') {\n          params.set('category', 'B1');\n        } else if (testId === 'dynamic-b2') {\n          params.set('category', 'B2');\n        }\n        // Restrict to Erasmus series explicitly\n        params.set('series', 'Erasmus Sınavı');\n        apiUrl += `?${params.toString()}`;\n      } else {\n        apiUrl = `${API_URL}/api/tests/${testId}/questions`;\n      }\n      \n      console.log(`Fetching questions from: ${apiUrl}`);\n      \n      const load = async () => {\n        try {\n          const res = await fetch(apiUrl);\n          console.log('API Response status:', res.status);\n          if (!res.ok) throw new Error(`Request failed with status ${res.status}`);\n          const data = await res.json();\n          let questionsData = data.questions || data || [];\n          // Fallback: if tests endpoint returned empty, try querying by seriesId directly\n          if ((!questionsData || questionsData.length === 0) && testId && !(testId === 'dynamic' || testId.startsWith('dynamic-'))) {\n            const API_URL2 = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n            const altUrl = `${API_URL2}/api/questions?seriesId=${encodeURIComponent(testId)}`;\n            console.log('Primary returned empty, trying fallback:', altUrl);\n            const res2 = await fetch(altUrl);\n            if (res2.ok) {\n              const d2 = await res2.json();\n              questionsData = d2.questions || d2 || [];\n            }\n          }\n          console.log('Questions data length:', questionsData.length);\n\n          const formattedQuestions = questionsData.map((q: Question) => {\n            // Parse options if they're in string format\n            let optionsArray: string[] = [];\n            if (Array.isArray(q.options)) {\n              optionsArray = q.options.map(formatText);\n            } else if (typeof q.options === 'string') {\n              try {\n                optionsArray = JSON.parse(q.options).map(formatText);\n              } catch {\n                optionsArray = [];\n              }\n            }\n\n            // Convert correct answer to letter if it's a word\n            let correctLetter = q.correct;\n            if (q.correct && q.correct.length > 1) {\n              // If correct is a word, find its index in options and convert to letter\n              const correctIndex = optionsArray.findIndex(option => \n                option.toLowerCase() === q.correct.toLowerCase()\n              );\n              if (correctIndex !== -1) {\n                correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n                console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n              }\n            }\n\n            return {\n              ...q,\n              options: optionsArray,\n              correct: correctLetter\n            };\n          });\n          console.log(`Loaded ${formattedQuestions.length} questions`);\n          setQuestions(formattedQuestions);\n          setLoading(false);\n        } catch (error) {\n          console.error('Failed to fetch questions:', error);\n          setError('Sunucuya ulaşılamıyor. Lütfen sunucuyu başlatıp tekrar deneyin.');\n          setLoading(false);\n        }\n      };\n      load();\n    } else {\n      // Format questions from state as well\n      const formattedQuestions = location.state.questions.map((q: Question) => {\n        // Parse options if they're in string format\n        let optionsArray: string[] = [];\n        if (Array.isArray(q.options)) {\n          optionsArray = q.options.map(formatText);\n        } else if (typeof q.options === 'string') {\n          try {\n            optionsArray = JSON.parse(q.options).map(formatText);\n          } catch {\n            optionsArray = [];\n          }\n        }\n\n        // Convert correct answer to letter if it's a word\n        let correctLetter = q.correct;\n        if (q.correct && q.correct.length > 1) {\n          // If correct is a word, find its index in options and convert to letter\n          const correctIndex = optionsArray.findIndex(option => \n            option.toLowerCase() === q.correct.toLowerCase()\n          );\n          if (correctIndex !== -1) {\n            correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n            console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n          }\n        }\n\n        return {\n          ...q,\n          options: optionsArray,\n          correct: correctLetter\n        };\n      });\n      setQuestions(formattedQuestions);\n      setLoading(false);\n    }\n  }, [location.state, testId]);\n\n  // Initialize answers array when questions are loaded\n  useEffect(() => {\n    if (questions.length > 0 && answers.length !== questions.length) {\n      setAnswers(Array(questions.length).fill(null));\n    }\n  }, [questions, answers.length]);\n\n  // Timer logic - pause when answer is selected or exam is finished\n  useEffect(() => {\n    if (showSummary || timerPaused) return;\n    timerRef.current = setInterval(() => {\n      setTime((t) => t + 1);\n    }, 1000);\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [showSummary, timerPaused]);\n\n  if (loading) {\n    return (\n      <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <Box sx={{\n          p: 4,\n          borderRadius: 4,\n          background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',\n          boxShadow: '0 20px 40px rgba(0,0,0,0.1)',\n          textAlign: 'center'\n        }}>\n          <CircularProgress sx={{ color: '#00b894', mb: 2 }} />\n          <Typography variant=\"h6\" sx={{ color: '#2c3e50', fontWeight: 600 }}>\n            Sorular Yükleniyor...\n          </Typography>\n        </Box>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <Box sx={{ p: 4, borderRadius: 4, background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)', boxShadow: '0 20px 40px rgba(0,0,0,0.1)', textAlign: 'center' }}>\n          <Typography variant=\"h6\" sx={{ color: '#c62828', fontWeight: 600, mb: 2 }}>{error}</Typography>\n          <Button variant=\"contained\" onClick={() => window.location.reload()}>Tekrar Dene</Button>\n        </Box>\n      </Box>\n    );\n  }\n\n  if (!questions.length) {\n    return <Typography align=\"center\" mt={8}>Bu sınav için soru bulunamadı.</Typography>;\n  }\n\n  const q = questions[current];\n  // Robustly fetch explanation: backend may store it under different keys (explanation_tr, explanation_A, etc.)\n  const getExplanation = (question: any): string | undefined => {\n    if (!question || typeof question !== 'object') return undefined;\n    // Prefer exact keys first\n    const preferred = ['explanation', 'explanation_tr', 'explanation_tr_a', 'explanation_A', 'explanationTr', 'explanation_tr'];\n    for (const k of preferred) {\n      if (Object.prototype.hasOwnProperty.call(question, k) && question[k]) return question[k];\n    }\n    // Fallback: any key that contains 'explan' (case-insensitive)\n    const found = Object.keys(question).find(k => /explan/i.test(k) && question[k]);\n    if (found) return question[found];\n    return undefined;\n  };\n  const explanation = getExplanation(q);\n  // Ensure options is always an array\n  let options: string[] = [];\n  if (Array.isArray(q.options)) {\n    options = q.options;\n  } else if (typeof q.options === 'string') {\n    try {\n      options = JSON.parse(q.options);\n    } catch {\n      options = [];\n    }\n  }\n\n  // Helper function to get correct answer text\n  const getCorrectAnswerText = () => {\n    if (!q.correct || options.length === 0) return q.correct;\n    const correctIndex = q.correct.charCodeAt(0) - 65; // A=0, B=1, C=2, D=3\n    const correctText = options[correctIndex];\n    return correctText ? `${q.correct}) ${correctText}` : q.correct;\n  };\n\n  const handleSelect = (optionIndex: number) => {\n    const selectedLetter = String.fromCharCode(65 + optionIndex); // 0->A, 1->B, 2->C, 3->D\n    console.log('Selected option index:', optionIndex);\n    console.log('Selected letter:', selectedLetter);\n    console.log('Question correct answer:', q.correct);\n    console.log('Question correct answer type:', typeof q.correct);\n    \n    setSelected(selectedLetter);\n    setShowResult(true);\n    setTimerPaused(true); // Pause timer when answer is selected\n    setAnswers((prev) => {\n      const copy = [...prev];\n      copy[current] = selectedLetter;\n      return copy;\n    });\n    if (compareAnswers(selectedLetter, q.correct)) {\n      setScore((s) => s + 1);\n    } else {\n      setMistakes((m) => m + 1);\n    }\n    // Show explanation immediately after selection so users see why the answer is correct/wrong\n    setShowExplanation(true);\n  };\n\n  const nextQuestion = () => {\n    if (current < questions.length - 1) {\n      setCurrent(c => c + 1);\n      setSelected(answers[current + 1] || null);\n      setShowResult(!!answers[current + 1]);\n      setShowExplanation(false);\n      setTimerPaused(false); // Resume timer when moving to next question\n    }\n  };\n\n  // Sınavı history'ye kaydet (explicit payload to avoid stale state)\n  const saveToHistory = async (payload?: { correct: number; incorrect: number; duration: number; answersArray: (string | null)[] }) => {\n    const token = localStorage.getItem('token');\n    // Kullanıcı giriş yapmadıysa history kaydı denemeyelim; sessizce çık\n    if (!token) return;\n    try {\n      const res = await fetch('http://localhost:4000/api/history', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\n        },\n        body: JSON.stringify({\n          category: typeof questions[0]?.categoryId === 'string' ? questions[0]?.categoryId : String(questions[0]?.categoryId),\n          seriesId: questions[0]?.seriesId || null,\n          duration: payload ? payload.duration : time,\n          correct: payload ? payload.correct : score,\n          incorrect: payload ? payload.incorrect : mistakes,\n          questions: questions.map((q, idx) => ({\n            questionId: q.id,\n            userAnswer: (payload ? payload.answersArray[idx] : answers[idx]),\n            isCorrect: (() => {\n              const ua = payload ? payload.answersArray[idx] : answers[idx];\n              return ua ? compareAnswers(ua!, q.correct) : false;\n            })()\n          }))\n        })\n      });\n      if (!res.ok) {\n        try {\n          const data = await res.json();\n          // eslint-disable-next-line no-console\n          console.error('History save error:', data);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error('History save error (no json):', res.status, res.statusText);\n        }\n        // Do not alert here; interceptor will handle auth expiry. Avoid noisy UI.\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error('History save network error:', e);\n      // silence network errors for history save to avoid user confusion\n    }\n  };\n\n  const handleFinish = async () => {\n    // Ensure answers array is properly sized\n    const finalizedAnswers = Array.from({ length: questions.length }, (_, i) => (answers[i] !== undefined ? answers[i] : null));\n    if (answers.length === 0 || answers.length !== questions.length) {\n      setAnswers(finalizedAnswers);\n    }\n    \n    // Calculate final scores\n    let correctCount = 0;\n    let incorrectCount = 0;\n    let unansweredCount = 0;\n    \n    questions.forEach((question, idx) => {\n      const userAnswer = finalizedAnswers[idx];\n      if (userAnswer === null || userAnswer === undefined || userAnswer === '') {\n        unansweredCount++;\n      } else if (compareAnswers(userAnswer, question.correct)) {\n        correctCount++;\n      } else {\n        incorrectCount++;\n      }\n    });\n    \n    // Update state with calculated scores\n    setScore(correctCount);\n    setMistakes(incorrectCount);\n    \n    setShowSummary(true);\n    setReviewMode(false);\n    setTimerPaused(true); // Permanently pause timer when exam is finished\n    if (timerRef.current) clearInterval(timerRef.current);\n    \n    await saveToHistory({\n      correct: correctCount,\n      incorrect: incorrectCount,\n      duration: time,\n      answersArray: finalizedAnswers,\n    });\n  };\n\n  const handleCloseSummary = () => {\n    setShowSummary(false);\n    setReviewMode(false);\n    setCurrent(0);\n    setSelected(null);\n    setShowResult(false);\n    setShowExplanation(false);\n    setScore(0);\n    setMistakes(0);\n    setTime(0);\n    setAnswers([]);\n  };\n\n  const handleAddRanking = () => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Redirect to login page if not logged in\n      navigate('/login');\n      return;\n    }\n\n    // Determine current level from route\n    let examLevel: 'A1' | 'A2' | 'B1' | 'B2' | undefined;\n    if (testId === 'dynamic-a1') examLevel = 'A1';\n    else if (testId === 'dynamic-a2' || testId === 'dynamic') examLevel = 'A2';\n    else if (testId === 'dynamic-b1') examLevel = 'B1';\n    else if (testId === 'dynamic-b2') examLevel = 'B2';\n\n    // Send all relevant exam result data to backend\n    const categoryId = q.categoryId;\n    const seriesId = q.seriesId;\n    fetch('http://localhost:4000/api/rankings', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ score, time, categoryId, seriesId, correct: score, mistakes }),\n    })\n      .then(async res => {\n        let data;\n        try {\n          data = await res.json();\n        } catch (e) {\n          data = {};\n        }\n        if (!res.ok) {\n          console.error('Ranking save error:', data);\n          let errorMessage = 'Sıralamaya eklenemedi: ' + (data?.message || res.statusText);\n\n          // Auth-related errors\n          if (data?.message === 'Authorization header missing' || res.status === 401) {\n            errorMessage = 'Sıralamaya eklemek için giriş yapmalısınız.';\n          }\n          // Backend may block creating ranking-only rows to prevent \"Detay Yok\" duplicates\n          if (typeof data?.error === 'string' && data.error.includes('Detailed test record not found')) {\n            errorMessage = 'Önce sınavı başarıyla bitirip kaydettiğinizden emin olun, sonra sıralamaya ekleyin.';\n          }\n\n          alert(errorMessage);\n          return;\n        }\n        setShowSummary(false);\n        // Navigate to rankings filtered by the user's level\n        navigate(examLevel ? `/rankings?exam=${examLevel}` : '/rankings');\n      })\n      .catch(err => {\n        console.error('Ranking save error:', err);\n        alert('Failed to save ranking. Network error.');\n      });\n  };\n\n  const prevQuestion = () => {\n    if (current > 0) {\n      setCurrent(c => c - 1);\n      setSelected(answers[current - 1] || null);\n      setShowResult(!!answers[current - 1]);\n      setShowExplanation(false);\n      // If the previous question was already answered, keep timer paused\n      setTimerPaused(!!answers[current - 1]);\n    }\n  };\n\n  return (\n    <Box sx={{ \n      minHeight: '100vh', \n      bgcolor: '#b2ebf2', \n      display: 'flex', \n      alignItems: { xs: 'center', md: 'flex-start' },\n      justifyContent: 'center', \n      position: 'relative',\n      pt: { xs: 2, md: 4, lg: 6 },\n      pb: { xs: 12, md: 16 }\n    }}>\n      {/* Fixed top-left Finish button (aligned with fixed timer) for tablet/desktop */}\n      <Box\n        sx={{\n          display: { xs: 'none', md: 'flex' },\n          position: 'fixed',\n          top: { md: 84, lg: 96 },\n          left: { md: 20, lg: 28 },\n          zIndex: 1200,\n        }}\n      >\n        <Button\n          onClick={handleFinish}\n          sx={{\n            textTransform: 'none',\n            fontWeight: 800,\n            borderRadius: 3,\n            px: { md: 2, lg: 2.5 },\n            py: { md: 0.75, lg: 1 },\n            boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n            background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n            color: '#fff',\n            border: '1px solid rgba(255,255,255,0.25)',\n            backdropFilter: 'blur(8px)',\n            '&:hover': { background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)' },\n          }}\n        >\n          Testi Bitir\n        </Button>\n      </Box>\n      {/* Fixed timer for tablet/desktop (sticky at top-right) */}\n    <Box\n        sx={{\n          display: { xs: 'none', md: 'flex' },\n          position: 'fixed',\n      top: { md: 84, lg: 96 },\n          right: { md: 20, lg: 28 },\n          zIndex: 1200,\n          background: timerPaused\n            ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)'\n            : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          px: { md: 2, lg: 2.5 },\n          py: { md: 0.75, lg: 1 },\n          borderRadius: 3,\n          fontWeight: 800,\n          fontSize: { md: 16, lg: 18 },\n          boxShadow: '0 10px 24px rgba(0,0,0,0.12)',\n          alignItems: 'center',\n          backdropFilter: 'blur(8px)',\n          border: '1px solid rgba(255,255,255,0.25)',\n          gap: 1\n        }}\n        aria-label=\"exam-timer-desktop\"\n      >\n        {timerPaused && <span>⏸️</span>}\n        {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\n      </Box>\n  {/* Timer now lives inside the main Paper (card) */}\n      {/* Navigation buttons outside the card */}\n      <span title={current === 0 ? 'İlk soru' : 'Önceki soruya git'}>\n      <IconButton\n        sx={{\n          display: { xs: 'none', md: 'inline-flex' },\n          position: 'absolute',\n          left: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current > 0 \n            ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)'\n            : 'rgba(255,255,255,0.5)',\n          color: current > 0 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current > 0 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current > 0 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: { md: 64, lg: 72 },\n          height: { md: 64, lg: 72 },\n          p: 0,\n          cursor: current > 0 ? 'pointer' : 'default',\n          opacity: current > 0 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current > 0 ? 'translateY(-50%) translateX(-4px)' : 'translateY(-50%)',\n            background: current > 0 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)'\n              : 'rgba(255,255,255,0.5)',\n            boxShadow: current > 0 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px',\n          },\n        }}\n        onClick={prevQuestion}\n        disabled={current === 0}\n      >\n        <ArrowBackIcon sx={{ fontSize: { md: 34, lg: 38 } }} />\n  </IconButton>\n  </span>\n      <span title={current === questions.length - 1 ? 'Son soru' : 'Sonraki soruya git'}>\n      <IconButton\n        sx={{\n          display: { xs: 'none', md: 'inline-flex' },\n          position: 'absolute',\n          right: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          zIndex: 2,\n          background: current < questions.length - 1 \n            ? 'linear-gradient(135deg, #e6fffa 0%, #f0ffff 100%)'\n            : 'rgba(255,255,255,0.5)',\n          color: current < questions.length - 1 ? '#00b894' : '#9e9e9e',\n          backdropFilter: 'blur(10px)',\n          border: current < questions.length - 1 ? '2px solid rgba(0, 184, 148, 0.35)' : '1px solid rgba(255,255,255,0.6)',\n          boxShadow: current < questions.length - 1 ? '0 10px 28px rgba(0, 184, 148, 0.25)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          borderRadius: '50%',\n          width: { md: 64, lg: 72 },\n          height: { md: 64, lg: 72 },\n          p: 0,\n          cursor: current < questions.length - 1 ? 'pointer' : 'default',\n          opacity: current < questions.length - 1 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current < questions.length - 1 ? 'translateY(-50%) translateX(4px)' : 'translateY(-50%)',\n            background: current < questions.length - 1 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 206, 201, 0.15) 100%)'\n              : 'rgba(255,255,255,0.5)',\n            boxShadow: current < questions.length - 1 ? '0 14px 34px rgba(0, 184, 148, 0.3)' : '0 6px 18px rgba(0, 0, 0, 0.08)',\n          },\n          '&:focus-visible': {\n            outline: '3px solid rgba(0, 184, 148, 0.5)',\n            outlineOffset: '2px',\n          },\n        }}\n        onClick={nextQuestion}\n        disabled={current === questions.length - 1}\n      >\n        <ArrowForwardIcon sx={{ fontSize: { md: 34, lg: 38 } }} />\n  </IconButton>\n  </span>\n      {!reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: { xs: 2, sm: 3, md: 5 },\n            position: 'relative',\n            borderRadius: 4, \n            width: '100%', \n            maxWidth: { xs: 360, sm: 560, md: 600 },\n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n      {/* Mobile top controls: Finish (left) + Timer (right) inside the card */}\n          <Box\n            sx={{\n              position: 'absolute',\n              top: 10,\n              left: { xs: 18, md: 10 },\n              zIndex: 2,\n              display: { xs: 'flex', md: 'none' },\n            }}\n          >\n            <Button\n              size=\"small\"\n              onClick={handleFinish}\n              sx={{\n                textTransform: 'none',\n                fontWeight: 700,\n                borderRadius: 2,\n                px: 1.5,\n                py: 0.5,\n                boxShadow: '0 6px 16px rgba(0,0,0,0.12)',\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                color: '#fff',\n                border: '1px solid rgba(255,255,255,0.25)',\n                backdropFilter: 'blur(8px)'\n              }}\n            >\n              Bitir\n            </Button>\n          </Box>\n          {/* Inset timer at top-right inside the card (mobile only) */}\n          <Box\n            sx={{\n              position: 'absolute',\n              top: 10,\n              right: { xs: 18, md: 10 },\n              zIndex: 2,\n        display: { xs: 'flex', md: 'none' },\n              background: timerPaused \n                ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)' \n                : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n              color: '#fff',\n              px: { xs: 1.25, md: 3 },\n              py: { xs: 0.5, md: 1 },\n              borderRadius: { xs: 2, md: 3 },\n              fontWeight: 700,\n              fontSize: { xs: 13, md: 18 },\n              boxShadow: '0 6px 16px rgba(0, 184, 148, 0.4)',\n              alignItems: 'center',\n              backdropFilter: 'blur(10px)',\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              gap: { xs: 0.5, md: 1 },\n              transition: 'background-color 0.3s ease',\n            }}\n          >\n            {timerPaused && <span>⏸️</span>}\n            {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\n          </Box>\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length}\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: { xs: '1rem', sm: '1.1rem', md: '1.2rem' },\n              lineHeight: 1.6,\n              textAlign: 'center',\n              p: { xs: 1.25, sm: 1.5, md: 2 },\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = selected === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!selected;\n                return (\n          <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n            fontSize: { xs: 15, sm: 16, md: 18 },\n                      textTransform: 'none',\n                      borderRadius: 4,\n            py: { xs: 1.25, sm: 1.5, md: 2 },\n            px: { xs: 1.5, sm: 2 },\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',\n                      color: showColor && isSelected ? '#ffffff' : '#2c3e50',\n                      border: showColor && isSelected\n                        ? 'none'\n                        : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: !selected ? 'translateY(-2px)' : 'none',\n                        background: !showColor \n                          ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)' \n                          : undefined,\n                        boxShadow: !selected \n                          ? '0 8px 25px rgba(0, 184, 148, 0.2)' \n                          : undefined,\n                      },\n                    }}\n                    onClick={() => !showResult && handleSelect(idx)}\n                    disabled={!!selected}\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {formatText(opt)}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 14,\n                        color: '#ffffff',\n                        background: isCorrect \n                          ? 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)' \n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                        borderRadius: 12,\n                        padding: '4px 12px',\n                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? '✓ Doğru' : '✗ Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {showResult && (\n            <Box sx={{ mb: 2 }}>\n              <Typography color=\"success.main\" fontWeight={700} mb={1}>\n                {compareAnswers(selected || '', q.correct) ? 'Doğru!' : `Doğru Yanıt: ${getCorrectAnswerText()}`}\n              </Typography>\n            </Box>\n          )}\n          {/* Bottom controls: mobile shows Önceki/Bitir/Sonraki, desktop shows only Bitir */}\n          {!showSummary && (\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: { xs: 'space-between', md: 'center' }, gap: 1.5, mt: 3 }}>\n              <Button\n                variant=\"outlined\"\n                onClick={prevQuestion}\n                disabled={current === 0}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 700,\n                  borderWidth: 2,\n                  borderColor: '#00b894',\n                  color: '#00b894',\n                  '&:hover': { borderColor: '#00cec9', background: 'rgba(0,206,201,0.08)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Önceki\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleFinish}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 800,\n                  borderRadius: 3,\n                  px: 3,\n                  py: 1.2,\n                  boxShadow: 2,\n                  background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                  color: '#fff',\n                  '&:hover': { background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Testi Bitir\n              </Button>\n              <Button\n                variant=\"outlined\"\n                onClick={nextQuestion}\n                disabled={current === questions.length - 1}\n                sx={{\n                  textTransform: 'none',\n                  fontWeight: 700,\n                  borderWidth: 2,\n                  borderColor: '#00b894',\n                  color: '#00b894',\n                  '&:hover': { borderColor: '#00cec9', background: 'rgba(0,206,201,0.08)' },\n                  display: { xs: 'inline-flex', md: 'none' },\n                }}\n              >\n                Sonraki\n              </Button>\n            </Box>\n          )}\n        </Paper>\n      )}\n      {/* Result popup bubble with question review */}\n      {showSummary && (\n        <Box sx={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', bgcolor: 'rgba(10,29,86,0.7)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <Box sx={{ bgcolor: '#fff', borderRadius: 6, boxShadow: 8, p: 4, minWidth: 320, maxWidth: '90vw', textAlign: 'center', position: 'relative' }}>\n            <Typography variant=\"h5\" fontWeight={700} color=\"#19376D\" mb={2}>Sınav Sonucu</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#43ea7c\" mb={1}>Doğru: {score}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#e74c3c\" mb={1}>Yanlış: {mistakes}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#f39c12\" mb={1}>Boş: {answers.filter(answer => answer === null || answer === undefined || answer === '').length}</Typography>\n            <Typography fontSize={18} fontWeight={500} color=\"#19376D\" mb={2}>Süre: {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}</Typography>\n            {/* Question review list */}\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, justifyContent: 'center', mb: 3 }}>\n              {questions.map((question, idx) => {\n                const userAnswer = answers[idx];\n                const isUnanswered = userAnswer === null || userAnswer === undefined || userAnswer === '';\n                const isCorrect = !isUnanswered && compareAnswers(userAnswer, question.correct);\n                \n                // Determine colors based on answer status\n                let borderColor, textColor, backgroundColor, hoverColor;\n                if (isUnanswered) {\n                  // Boş bırakılan sorular - turuncu\n                  borderColor = '#f39c12';\n                  textColor = '#f39c12';\n                  backgroundColor = '#fdf6e3';\n                  hoverColor = '#f8e49a';\n                } else if (isCorrect) {\n                  // Doğru cevaplar - yeşil\n                  borderColor = '#43ea7c';\n                  textColor = '#43ea7c';\n                  backgroundColor = '#eafaf3';\n                  hoverColor = '#c6f7e2';\n                } else {\n                  // Yanlış cevaplar - kırmızı\n                  borderColor = '#e74c3c';\n                  textColor = '#e74c3c';\n                  backgroundColor = '#fff0f0';\n                  hoverColor = '#ffe3e3';\n                }\n                \n                return (\n                  <Button\n                    key={idx}\n                    variant=\"outlined\"\n                    sx={{\n                      minWidth: 48,\n                      height: 48,\n                      fontWeight: 700,\n                      fontSize: 18,\n                      borderRadius: 3,\n                      border: 'none',\n                      color: '#ffffff',\n                      background: !answers[idx] \n                        ? 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)'\n                        : isCorrect\n                          ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',\n                      mx: 0.5,\n                      my: 0.5,\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: 'translateY(-3px)',\n                        boxShadow: '0 8px 25px rgba(0, 0, 0, 0.2)',\n                      },\n                    }}\n                    onClick={() => {\n                      setReviewMode(true);\n                      setShowSummary(false);\n                      setCurrent(idx);\n                      setSelected(answers[idx] || null);\n                      setShowResult(!!answers[idx]);\n                      setShowExplanation(false);\n                    }}\n                  >\n                    {idx + 1}\n                  </Button>\n                );\n              })}\n            </Box>\n            <Typography fontSize={15} color=\"#19376D\" mb={2}>\n              Soruları incelemek için tıklayın. Yeşil: Doğru, Kırmızı: Yanlış, Turuncu: Boş\n            </Typography>\n            {/* Action buttons */}\n            <Box sx={{ display: 'flex', justifyContent: 'center', gap: 2, mt: 2, flexWrap: 'wrap' }}>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={handleAddRanking}\n              >\n                Sıralamaya Ekle\n              </Button>\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  navigate('/categories');\n                }}\n              >\n                Kapat\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  handleCloseSummary();\n                }}\n              >\n                Tekrar Çöz\n              </Button>\n            </Box>\n            {/* Login warning text */}\n            {!localStorage.getItem('token') && (\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  display: 'block',\n                  textAlign: 'center', \n                  mt: 1, \n                  fontSize: '0.75rem',\n                  color: '#666',\n                  fontStyle: 'italic'\n                }}\n              >\n                Sıralamaya eklemek için üye girişi gerekli veya kayıt olmalısınız\n              </Typography>\n            )}\n          </Box>\n        </Box>\n      )}\n      {reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: 5, \n            borderRadius: 4, \n            minWidth: 340, \n            maxWidth: 600, \n            width: '100%', \n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length} (İnceleme)\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: '1.2rem',\n              lineHeight: 1.6,\n              textAlign: 'center',\n              padding: '16px',\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = answers[current] === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!answers[current];\n                return (\n                  <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n                      fontSize: 18,\n                      borderRadius: 4,\n                      py: 2,\n                      px: 2,\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : (isCorrect\n                              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)'\n                              : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'),\n                      color: showColor && isSelected ? '#ffffff' : isCorrect && showColor ? '#00b894' : '#2c3e50',\n                      border: isCorrect && showColor && !isSelected\n                        ? '2px solid #00b894'\n                        : showColor && isSelected\n                          ? 'none'\n                          : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : isCorrect && showColor\n                          ? '0 4px 15px rgba(0, 184, 148, 0.2)'\n                          : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      pointerEvents: 'none',\n                    }}\n                    disabled\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {opt}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 18,\n                        color: isCorrect ? '#43ea7c' : '#e74c3c',\n                        background: isCorrect ? '#eafaf3' : '#fff0f0',\n                        borderRadius: 8,\n                        padding: '2px 12px',\n                        boxShadow: '0 2px 8px rgba(67,234,124,0.08)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? 'Doğru' : 'Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {/* Show explanation toggle and content in review mode */}\n          {!!q.explanation && (\n            <Box sx={{ mb: 2 }}>\n              <Button variant=\"text\" onClick={() => setShowExplanation(e => !e)}>\n                {showExplanation ? 'Çözümü Gizle' : 'Çözümü Göster'}\n              </Button>\n              {showExplanation && (\n                <Typography mt={2} color=\"text.secondary\">{q.explanation}</Typography>\n              )}\n            </Box>\n          )}\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n              onClick={() => {\n                setReviewMode(false);\n                setShowSummary(true);\n                setShowExplanation(false);\n              }}\n            >\n              Sonuçlara Dön\n            </Button>\n          </Box>\n        </Paper>\n      )}\n    </Box>\n  );\n};\n\nexport default Exam;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}