{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import PhotoCameraIcon from'@mui/icons-material/PhotoCamera';import{Box,Typography,Button,Paper,Avatar,CircularProgress,Dialog,DialogTitle,DialogContent,TextField,DialogActions}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=_ref=>{let{token,onProfilePhotoChange}=_ref;const[profile,setProfile]=useState(null);const[uploading,setUploading]=useState(false);const[error,setError]=useState('');const[updateDialog,setUpdateDialog]=useState(false);const[updateData,setUpdateData]=useState({name:'',email:'',newPassword:'',currentPassword:''});const[updateLoading,setUpdateLoading]=useState(false);const[updateError,setUpdateError]=useState('');const fileInputRef=useRef(null);// Popup dialog for invalid image uploads\nconst[imageDialogOpen,setImageDialogOpen]=useState(false);const[imageDialogMessage,setImageDialogMessage]=useState('');const fetchProfile=async()=>{try{var _data$user;const res=await fetch('http://localhost:4000/api/auth/me',{method:'GET',headers:{'Authorization':`Bearer ${token}`}});const data=await res.json();setProfile(data.user||data);if(onProfilePhotoChange&&((_data$user=data.user)!==null&&_data$user!==void 0&&_data$user.profilePhoto||data.profilePhoto)){var _data$user2;onProfilePhotoChange(((_data$user2=data.user)===null||_data$user2===void 0?void 0:_data$user2.profilePhoto)||data.profilePhoto);}}catch{setProfile(null);}};const openUpdateDialog=()=>{setUpdateData({name:profile.name||'',email:profile.email||'',newPassword:'',currentPassword:''});setUpdateError('');setUpdateDialog(true);};const handleUpdateProfile=async()=>{if(!updateData.currentPassword){setUpdateError('Mevcut şifrenizi girmelisiniz');return;}// Send only changed fields\nconst payload={currentPassword:updateData.currentPassword};if(updateData.name&&updateData.name.trim()&&updateData.name.trim()!==((profile===null||profile===void 0?void 0:profile.name)||'')){payload.name=updateData.name.trim();}if(updateData.email&&updateData.email.trim()&&updateData.email.trim()!==((profile===null||profile===void 0?void 0:profile.email)||'')){payload.email=updateData.email.trim();}if(updateData.newPassword&&updateData.newPassword.trim()){payload.newPassword=updateData.newPassword.trim();}if(!payload.name&&!payload.email&&!payload.newPassword){setUpdateError('Değişiklik yok. Lütfen bir alanı güncelleyin.');return;}setUpdateLoading(true);setUpdateError('');try{const res=await fetch('http://localhost:4000/api/auth/update-profile',{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify(payload)});const data=await res.json();if(res.ok){setUpdateDialog(false);fetchProfile();// Refresh profile data\n}else{// Prefer explicit message\nif(data!==null&&data!==void 0&&data.error){setUpdateError(data.error);}else if(Array.isArray(data===null||data===void 0?void 0:data.errors)&&data.errors.length){// express-validator shape\nsetUpdateError(data.errors.map(e=>e.msg).join('\\n'));}else{setUpdateError('Güncelleme başarısız');}}}catch(err){setUpdateError('Network error');}finally{setUpdateLoading(false);}};useEffect(()=>{if(!token)return;fetchProfile();// eslint-disable-next-line\n},[token]);const handleFileChange=async e=>{if(!e.target.files||e.target.files.length===0)return;setUploading(true);setError('');const raw=e.target.files[0];// Basic validation\nif(!raw.type.startsWith('image/')){setError('Lütfen bir resim dosyası seçin.');// Show guidance popup\nsetImageDialogMessage('Geçersiz dosya türü. Lütfen JPG veya PNG formatında bir profil fotoğrafı yükleyin.');setImageDialogOpen(true);setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';return;}if(raw.size>10*1024*1024){// 10MB\nsetError('Resim boyutu çok büyük (maks. 10MB).');setImageDialogMessage('Yüklemeye çalıştığınız görsel 10MB sınırını aşıyor. Lütfen dosya boyutunu küçültüp tekrar deneyin.');setImageDialogOpen(true);setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';return;}// Load dimensions for further validation\nconst readImageDims=file=>{return new Promise((resolve,reject)=>{const img=new Image();img.onload=()=>{const w=img.naturalWidth||img.width;const h=img.naturalHeight||img.height;if(!w||!h)return reject(new Error('Görsel okunamadı'));resolve({w,h});};img.onerror=()=>reject(new Error('Görsel yüklenemedi'));img.src=URL.createObjectURL(file);});};try{const{w,h}=await readImageDims(raw);const shortSide=Math.min(w,h);const longSide=Math.max(w,h);const aspect=longSide/(shortSide||1);// Block too small or extreme aspect-ratio images and guide user\nif(shortSide<512){const msg=`Görsel çözünürlüğü çok düşük (${w}x${h}). En az 512x512 piksel veya daha büyük bir görsel yükleyin.`;setError(msg);setImageDialogMessage(msg+'\\n\\nİpucu: Kare (1:1) oranlı ve en az 512x512 piksel bir fotoğraf kullanın. Çok küçük görseller kalite kaybına neden olur.');setImageDialogOpen(true);setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';return;}if(aspect>3){const msg=`Görsel en-boy oranı çok uç (${w}x${h}). Aşırı uzun veya panoramik görseller kabul edilmez.`;setError(msg);setImageDialogMessage(msg+'\\n\\nİpucu: Kare (1:1) oranına yakın bir fotoğraf tercih edin. Gerekirse kırpıp tekrar yükleyin.');setImageDialogOpen(true);setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';return;}}catch(dimErr){// If we cannot read dimensions, show guidance and stop\nconst msg=(dimErr===null||dimErr===void 0?void 0:dimErr.message)||'Görsel okunamadı, lütfen farklı bir dosya deneyin.';setError(msg);setImageDialogMessage(msg+'\\n\\nDesteklenen formatlar: JPG, PNG.');setImageDialogOpen(true);setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';return;}// Helper: crop center-square and resize to 512x512\nconst toSquareBlob=function(file){let target=arguments.length>1&&arguments[1]!==undefined?arguments[1]:512;return new Promise((resolve,reject)=>{const img=new Image();img.onload=()=>{try{const w=img.naturalWidth||img.width;const h=img.naturalHeight||img.height;if(!w||!h)throw new Error('Görsel okunamadı');const side=Math.min(w,h);const sx=(w-side)/2;const sy=(h-side)/2;const canvas=document.createElement('canvas');canvas.width=target;canvas.height=target;const ctx=canvas.getContext('2d');if(!ctx)throw new Error('Canvas desteklenmiyor');ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';ctx.drawImage(img,sx,sy,side,side,0,0,target,target);canvas.toBlob(blob=>{if(!blob)return reject(new Error('Resim dönüştürülemedi'));resolve(blob);},'image/jpeg',0.9);}catch(er){reject(er);}};img.onerror=()=>reject(new Error('Görsel yüklenemedi'));const url=URL.createObjectURL(file);img.src=url;});};try{var _raw$name;const squareBlob=await toSquareBlob(raw,512);const formData=new FormData();const filename=(((_raw$name=raw.name)===null||_raw$name===void 0?void 0:_raw$name.replace(/\\.[^.]+$/,''))||'avatar')+'-square.jpg';formData.append('photo',squareBlob,filename);const res=await fetch('http://localhost:4000/api/auth/upload-profile-photo',{method:'POST',headers:{'Authorization':`Bearer ${token}`},body:formData});let data=null;try{data=await res.json();}catch{}if(res.ok){// Wait for backend to save, then fetch updated profile\nsetTimeout(fetchProfile,500);}else{setError(data&&(data.error||data.message)||'Upload failed');}}catch(er){setError((er===null||er===void 0?void 0:er.message)||'Upload failed');}finally{setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';}};if(!token)return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2dfdb',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Typography,{fontSize:20,children:\"Please login to see your profile.\"})});if(!profile)return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2dfdb',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});const photoUrl=profile.profilePhoto?`http://localhost:4000${profile.profilePhoto}?t=${Date.now()}`:undefined;const joinedDate=profile.createdAt?new Date(profile.createdAt).toLocaleDateString('tr-TR'):'-';return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2dfdb',display:'flex',justifyContent:'center',alignItems:'flex-start',pt:{xs:8,md:10},pb:{xs:12,md:16},px:2},children:/*#__PURE__*/_jsxs(Paper,{elevation:6,sx:{width:'100%',maxWidth:520,mx:'auto',p:0,borderRadius:4,background:'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(Box,{sx:{background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',p:{xs:3,md:4},textAlign:'center',borderTopLeftRadius:'inherit',borderTopRightRadius:'inherit',position:'relative',overflow:'hidden','&::before':{content:'\"\"',position:'absolute',inset:0,background:'rgba(255,255,255,0.08)',backdropFilter:'blur(4px)'}},children:/*#__PURE__*/_jsx(Box,{sx:{position:'relative'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",fontWeight:800,sx:{color:'#fff'},children:\"Profil\"})})}),/*#__PURE__*/_jsxs(Box,{sx:{p:{xs:3,md:4},textAlign:'center'},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:'relative',display:'inline-block',mx:'auto',mb:2},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",ref:fileInputRef,onChange:handleFileChange,disabled:uploading,style:{display:'none'},id:\"profile-photo-upload\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"profile-photo-upload\",children:[/*#__PURE__*/_jsx(Avatar,{src:photoUrl,sx:{width:96,height:96,minWidth:96,minHeight:96,maxWidth:96,maxHeight:96,borderRadius:'50%',aspectRatio:'1 / 1',display:'block',overflow:'hidden',flexShrink:0,flexGrow:0,flexBasis:'96px',lineHeight:'96px',bgcolor:'#26c6da',cursor:'pointer',mx:'auto',boxShadow:2,border:'3px solid #fff',// Keep inside image always covering and not stretching the avatar size\n'& .MuiAvatar-img':{objectFit:'cover',width:'100%',height:'100%',borderRadius:'50%',display:'block'}}}),/*#__PURE__*/_jsx(Box,{sx:{position:'absolute',bottom:8,right:8,bgcolor:'white',borderRadius:'50%',p:0.5,boxShadow:1,cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(PhotoCameraIcon,{fontSize:\"small\",color:\"primary\"})})]})]}),/*#__PURE__*/_jsx(Typography,{sx:{fontWeight:900,fontSize:{xs:'1.4rem',md:'1.6rem'},mb:0.5},children:profile.name||'-'}),/*#__PURE__*/_jsx(Typography,{fontSize:18,color:\"#333\",mb:1,children:profile.email||'-'}),/*#__PURE__*/_jsxs(Typography,{fontSize:16,color:\"#555\",mb:3,children:[\"Kat\\u0131l\\u0131m Tarihi: \",joinedDate]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:openUpdateDialog,sx:{borderRadius:2,px:4,mb:2,textTransform:'none',background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)','&:hover':{background:'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)'}},children:\"Profili Yenile\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[uploading&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8},children:\"Y\\xFCkleniyor...\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",fontSize:14,mt:1,children:error})]}),/*#__PURE__*/_jsxs(Dialog,{open:updateDialog,onClose:()=>setUpdateDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Profil G\\xFCncelle\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mt:1},children:[/*#__PURE__*/_jsx(TextField,{label:\"Kullan\\u0131c\\u0131 Ad\\u0131\",value:updateData.name,onChange:e=>setUpdateData(prev=>({...prev,name:e.target.value})),fullWidth:true,variant:\"outlined\"}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",type:\"email\",value:updateData.email,onChange:e=>setUpdateData(prev=>({...prev,email:e.target.value})),fullWidth:true,variant:\"outlined\"}),/*#__PURE__*/_jsx(TextField,{label:\"Yeni \\u015Eifre (iste\\u011Fe ba\\u011Fl\\u0131)\",type:\"password\",value:updateData.newPassword,onChange:e=>setUpdateData(prev=>({...prev,newPassword:e.target.value})),fullWidth:true,variant:\"outlined\",helperText:\"\\u015Eifreyi de\\u011Fi\\u015Ftirmek istemiyorsan\\u0131z bo\\u015F b\\u0131rak\\u0131n\"}),/*#__PURE__*/_jsx(TextField,{label:\"Mevcut \\u015Eifre\",type:\"password\",value:updateData.currentPassword,onChange:e=>setUpdateData(prev=>({...prev,currentPassword:e.target.value})),fullWidth:true,variant:\"outlined\",required:true,helperText:\"G\\xFCvenlik i\\xE7in mevcut \\u015Fifrenizi girmelisiniz\"}),updateError&&/*#__PURE__*/_jsx(Typography,{color:\"error\",fontSize:14,children:updateError})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setUpdateDialog(false),children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(Button,{onClick:handleUpdateProfile,variant:\"contained\",disabled:updateLoading,children:updateLoading?'Güncelleniyor...':'Güncelle'})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:imageDialogOpen,onClose:()=>setImageDialogOpen(false),maxWidth:\"xs\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Uygun Olmayan G\\xF6rsel\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Typography,{sx:{whiteSpace:'pre-wrap'},gutterBottom:true,children:imageDialogMessage}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mt:1,mb:0.5},children:\"\\xD6nerilen Profil Foto\\u011Fraf\\u0131 \\xD6zellikleri\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{marginTop:0},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Kare (1:1) oran\\u0131\"}),/*#__PURE__*/_jsx(\"li\",{children:\"En az 512x512 piksel\"}),/*#__PURE__*/_jsx(\"li\",{children:\"JPG veya PNG format\\u0131\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Maksimum boyut 10MB\"})]})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setImageDialogOpen(false),autoFocus:true,children:\"Tamam\"})})]})]})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useRef","PhotoCameraIcon","Box","Typography","Button","Paper","Avatar","CircularProgress","Dialog","DialogTitle","DialogContent","TextField","DialogActions","jsx","_jsx","jsxs","_jsxs","Profile","_ref","token","onProfilePhotoChange","profile","setProfile","uploading","setUploading","error","setError","updateDialog","setUpdateDialog","updateData","setUpdateData","name","email","newPassword","currentPassword","updateLoading","setUpdateLoading","updateError","setUpdateError","fileInputRef","imageDialogOpen","setImageDialogOpen","imageDialogMessage","setImageDialogMessage","fetchProfile","_data$user","res","fetch","method","headers","data","json","user","profilePhoto","_data$user2","openUpdateDialog","handleUpdateProfile","payload","trim","body","JSON","stringify","ok","Array","isArray","errors","length","map","e","msg","join","err","handleFileChange","target","files","raw","type","startsWith","current","value","size","readImageDims","file","Promise","resolve","reject","img","Image","onload","w","naturalWidth","width","h","naturalHeight","height","Error","onerror","src","URL","createObjectURL","shortSide","Math","min","longSide","max","aspect","dimErr","message","toSquareBlob","arguments","undefined","side","sx","sy","canvas","document","createElement","ctx","getContext","imageSmoothingEnabled","imageSmoothingQuality","drawImage","toBlob","blob","er","url","_raw$name","squareBlob","formData","FormData","filename","replace","append","setTimeout","minHeight","bgcolor","display","alignItems","justifyContent","children","fontSize","photoUrl","Date","now","joinedDate","createdAt","toLocaleDateString","pt","xs","md","pb","px","elevation","maxWidth","mx","p","borderRadius","background","backdropFilter","border","boxShadow","color","textAlign","borderTopLeftRadius","borderTopRightRadius","position","overflow","content","inset","variant","fontWeight","mb","accept","ref","onChange","disabled","style","id","htmlFor","minWidth","maxHeight","aspectRatio","flexShrink","flexGrow","flexBasis","lineHeight","cursor","objectFit","bottom","right","onClick","textTransform","mt","marginLeft","open","onClose","fullWidth","flexDirection","gap","label","prev","helperText","required","whiteSpace","gutterBottom","marginTop","autoFocus"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/pages/Profile.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport PhotoCameraIcon from '@mui/icons-material/PhotoCamera';\nimport { Box, Typography, Button, Paper, Avatar, CircularProgress, Dialog, DialogTitle, DialogContent, TextField, DialogActions } from '@mui/material';\n\ninterface Props {\n  token: string;\n  onProfilePhotoChange?: (url: string) => void;\n}\n\nconst Profile: React.FC<Props> = ({ token, onProfilePhotoChange }) => {\n  const [profile, setProfile] = useState<any>(null);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState('');\n  const [updateDialog, setUpdateDialog] = useState(false);\n  const [updateData, setUpdateData] = useState({ name: '', email: '', newPassword: '', currentPassword: '' });\n  const [updateLoading, setUpdateLoading] = useState(false);\n  const [updateError, setUpdateError] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Popup dialog for invalid image uploads\n  const [imageDialogOpen, setImageDialogOpen] = useState(false);\n  const [imageDialogMessage, setImageDialogMessage] = useState('');\n\n  const fetchProfile = async () => {\n    try {\n      const res = await fetch('http://localhost:4000/api/auth/me', {\n        method: 'GET',\n        headers: { 'Authorization': `Bearer ${token}` },\n      });\n      const data = await res.json();\n      setProfile(data.user || data);\n      if (onProfilePhotoChange && (data.user?.profilePhoto || data.profilePhoto)) {\n        onProfilePhotoChange(data.user?.profilePhoto || data.profilePhoto);\n      }\n    } catch {\n      setProfile(null);\n    }\n  };\n\n  const openUpdateDialog = () => {\n    setUpdateData({\n      name: profile.name || '',\n      email: profile.email || '',\n      newPassword: '',\n      currentPassword: ''\n    });\n    setUpdateError('');\n    setUpdateDialog(true);\n  };\n\n  const handleUpdateProfile = async () => {\n    if (!updateData.currentPassword) {\n      setUpdateError('Mevcut şifrenizi girmelisiniz');\n      return;\n    }\n\n    // Send only changed fields\n    const payload: any = { currentPassword: updateData.currentPassword };\n    if (updateData.name && updateData.name.trim() && updateData.name.trim() !== (profile?.name || '')) {\n      payload.name = updateData.name.trim();\n    }\n    if (updateData.email && updateData.email.trim() && updateData.email.trim() !== (profile?.email || '')) {\n      payload.email = updateData.email.trim();\n    }\n    if (updateData.newPassword && updateData.newPassword.trim()) {\n      payload.newPassword = updateData.newPassword.trim();\n    }\n    if (!payload.name && !payload.email && !payload.newPassword) {\n      setUpdateError('Değişiklik yok. Lütfen bir alanı güncelleyin.');\n      return;\n    }\n\n    setUpdateLoading(true);\n    setUpdateError('');\n\n    try {\n      const res = await fetch('http://localhost:4000/api/auth/update-profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        setUpdateDialog(false);\n        fetchProfile(); // Refresh profile data\n      } else {\n        // Prefer explicit message\n        if (data?.error) {\n          setUpdateError(data.error);\n        } else if (Array.isArray(data?.errors) && data.errors.length) {\n          // express-validator shape\n          setUpdateError(data.errors.map((e: any) => e.msg).join('\\n'));\n        } else {\n          setUpdateError('Güncelleme başarısız');\n        }\n      }\n    } catch (err) {\n      setUpdateError('Network error');\n    } finally {\n      setUpdateLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!token) return;\n    fetchProfile();\n    // eslint-disable-next-line\n  }, [token]);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files || e.target.files.length === 0) return;\n    setUploading(true);\n    setError('');\n    const raw = e.target.files[0];\n    // Basic validation\n    if (!raw.type.startsWith('image/')) {\n      setError('Lütfen bir resim dosyası seçin.');\n      // Show guidance popup\n      setImageDialogMessage('Geçersiz dosya türü. Lütfen JPG veya PNG formatında bir profil fotoğrafı yükleyin.');\n      setImageDialogOpen(true);\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      return;\n    }\n    if (raw.size > 10 * 1024 * 1024) { // 10MB\n      setError('Resim boyutu çok büyük (maks. 10MB).');\n      setImageDialogMessage('Yüklemeye çalıştığınız görsel 10MB sınırını aşıyor. Lütfen dosya boyutunu küçültüp tekrar deneyin.');\n      setImageDialogOpen(true);\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      return;\n    }\n\n    // Load dimensions for further validation\n    const readImageDims = (file: File): Promise<{ w: number; h: number }> => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n          const w = img.naturalWidth || img.width;\n          const h = img.naturalHeight || img.height;\n          if (!w || !h) return reject(new Error('Görsel okunamadı'));\n          resolve({ w, h });\n        };\n        img.onerror = () => reject(new Error('Görsel yüklenemedi'));\n        img.src = URL.createObjectURL(file);\n      });\n    };\n\n    try {\n      const { w, h } = await readImageDims(raw);\n      const shortSide = Math.min(w, h);\n      const longSide = Math.max(w, h);\n      const aspect = longSide / (shortSide || 1);\n\n      // Block too small or extreme aspect-ratio images and guide user\n      if (shortSide < 512) {\n        const msg = `Görsel çözünürlüğü çok düşük (${w}x${h}). En az 512x512 piksel veya daha büyük bir görsel yükleyin.`;\n        setError(msg);\n        setImageDialogMessage(msg + '\\n\\nİpucu: Kare (1:1) oranlı ve en az 512x512 piksel bir fotoğraf kullanın. Çok küçük görseller kalite kaybına neden olur.');\n        setImageDialogOpen(true);\n        setUploading(false);\n        if (fileInputRef.current) fileInputRef.current.value = '';\n        return;\n      }\n      if (aspect > 3) {\n        const msg = `Görsel en-boy oranı çok uç (${w}x${h}). Aşırı uzun veya panoramik görseller kabul edilmez.`;\n        setError(msg);\n        setImageDialogMessage(msg + '\\n\\nİpucu: Kare (1:1) oranına yakın bir fotoğraf tercih edin. Gerekirse kırpıp tekrar yükleyin.');\n        setImageDialogOpen(true);\n        setUploading(false);\n        if (fileInputRef.current) fileInputRef.current.value = '';\n        return;\n      }\n    } catch (dimErr: any) {\n      // If we cannot read dimensions, show guidance and stop\n      const msg = dimErr?.message || 'Görsel okunamadı, lütfen farklı bir dosya deneyin.';\n      setError(msg);\n      setImageDialogMessage(msg + '\\n\\nDesteklenen formatlar: JPG, PNG.');\n      setImageDialogOpen(true);\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n      return;\n    }\n\n    // Helper: crop center-square and resize to 512x512\n    const toSquareBlob = (file: File, target = 512): Promise<Blob> => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n          try {\n            const w = img.naturalWidth || img.width;\n            const h = img.naturalHeight || img.height;\n            if (!w || !h) throw new Error('Görsel okunamadı');\n            const side = Math.min(w, h);\n            const sx = (w - side) / 2;\n            const sy = (h - side) / 2;\n            const canvas = document.createElement('canvas');\n            canvas.width = target;\n            canvas.height = target;\n            const ctx = canvas.getContext('2d');\n            if (!ctx) throw new Error('Canvas desteklenmiyor');\n            ctx.imageSmoothingEnabled = true;\n            ctx.imageSmoothingQuality = 'high';\n            ctx.drawImage(img, sx, sy, side, side, 0, 0, target, target);\n            canvas.toBlob((blob) => {\n              if (!blob) return reject(new Error('Resim dönüştürülemedi'));\n              resolve(blob);\n            }, 'image/jpeg', 0.9);\n          } catch (er) {\n            reject(er);\n          }\n        };\n        img.onerror = () => reject(new Error('Görsel yüklenemedi'));\n        const url = URL.createObjectURL(file);\n        img.src = url;\n      });\n    };\n\n    try {\n      const squareBlob = await toSquareBlob(raw, 512);\n      const formData = new FormData();\n      const filename = (raw.name?.replace(/\\.[^.]+$/, '') || 'avatar') + '-square.jpg';\n      formData.append('photo', squareBlob, filename);\n\n      const res = await fetch('http://localhost:4000/api/auth/upload-profile-photo', {\n        method: 'POST',\n        headers: { 'Authorization': `Bearer ${token}` },\n        body: formData,\n      } as any);\n      let data: any = null;\n      try { data = await res.json(); } catch {}\n      if (res.ok) {\n        // Wait for backend to save, then fetch updated profile\n        setTimeout(fetchProfile, 500);\n      } else {\n        setError((data && (data.error || data.message)) || 'Upload failed');\n      }\n    } catch (er: any) {\n      setError(er?.message || 'Upload failed');\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n    }\n  };\n\n  if (!token) return (\n    <Box sx={{ minHeight: '100vh', bgcolor: '#b2dfdb', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n      <Typography fontSize={20}>Please login to see your profile.</Typography>\n    </Box>\n  );\n  if (!profile) return (\n    <Box sx={{ minHeight: '100vh', bgcolor: '#b2dfdb', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n      <CircularProgress />\n    </Box>\n  );\n\n  const photoUrl = profile.profilePhoto ? `http://localhost:4000${profile.profilePhoto}?t=${Date.now()}` : undefined;\n  const joinedDate = profile.createdAt ? new Date(profile.createdAt).toLocaleDateString('tr-TR') : '-';\n\n  return (\n    <Box sx={{ \n      minHeight: '100vh', \n      bgcolor: '#b2dfdb', \n      display: 'flex', \n      justifyContent: 'center', \n      alignItems: 'flex-start', \n      pt: { xs: 8, md: 10 },\n      pb: { xs: 12, md: 16 },\n      px: 2\n    }}>\n      <Paper\n        elevation={6}\n        sx={{\n          width: '100%',\n          maxWidth: 520,\n          mx: 'auto',\n          p: 0,\n          borderRadius: 4,\n          background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)'\n        }}\n      >\n        {/* Header merged with card */}\n        <Box sx={{\n          background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          p: { xs: 3, md: 4 },\n          textAlign: 'center',\n          borderTopLeftRadius: 'inherit',\n          borderTopRightRadius: 'inherit',\n          position: 'relative',\n          overflow: 'hidden',\n          '&::before': {\n            content: '\"\"',\n            position: 'absolute',\n            inset: 0,\n            background: 'rgba(255,255,255,0.08)',\n            backdropFilter: 'blur(4px)'\n          }\n        }}>\n          <Box sx={{ position: 'relative' }}>\n            <Typography variant=\"h4\" fontWeight={800} sx={{ color: '#fff' }}>Profil</Typography>\n          </Box>\n        </Box>\n\n        {/* Content */}\n        <Box sx={{ p: { xs: 3, md: 4 }, textAlign: 'center' }}>\n          <Box sx={{ position: 'relative', display: 'inline-block', mx: 'auto', mb: 2 }}>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              ref={fileInputRef}\n              onChange={handleFileChange}\n              disabled={uploading}\n              style={{ display: 'none' }}\n              id=\"profile-photo-upload\"\n            />\n            <label htmlFor=\"profile-photo-upload\">\n        <Avatar\n                src={photoUrl}\n                sx={{ \n                  width: 96, \n                  height: 96, \n                  minWidth: 96,\n                  minHeight: 96,\n                  maxWidth: 96,\n                  maxHeight: 96,\n          borderRadius: '50%',\n          aspectRatio: '1 / 1',\n                  display: 'block',\n                  overflow: 'hidden',\n                  flexShrink: 0,\n                  flexGrow: 0,\n                  flexBasis: '96px',\n                  lineHeight: '96px',\n                  bgcolor: '#26c6da', \n                  cursor: 'pointer', \n                  mx: 'auto', \n                  boxShadow: 2, \n                  border: '3px solid #fff',\n                  // Keep inside image always covering and not stretching the avatar size\n                  '& .MuiAvatar-img': { objectFit: 'cover', width: '100%', height: '100%', borderRadius: '50%', display: 'block' }\n                }}\n              />\n              <Box\n                sx={{\n                  position: 'absolute',\n                  bottom: 8,\n                  right: 8,\n                  bgcolor: 'white',\n                  borderRadius: '50%',\n                  p: 0.5,\n                  boxShadow: 1,\n                  cursor: 'pointer',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <PhotoCameraIcon fontSize=\"small\" color=\"primary\" />\n              </Box>\n            </label>\n          </Box>\n          {/* Name under avatar, thicker */}\n          <Typography sx={{ fontWeight: 900, fontSize: { xs: '1.4rem', md: '1.6rem' }, mb: 0.5 }}>\n            {profile.name || '-'}\n          </Typography>\n          <Typography fontSize={18} color=\"#333\" mb={1}>\n            {profile.email || '-'}\n          </Typography>\n          <Typography fontSize={16} color=\"#555\" mb={3}>\n            Katılım Tarihi: {joinedDate}\n          </Typography>\n          <Button \n            variant=\"contained\"\n            onClick={openUpdateDialog}\n            sx={{ \n              borderRadius: 2, \n              px: 4, \n              mb: 2,\n              textTransform: 'none',\n              background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n              '&:hover': { background: 'linear-gradient(135deg, #00a085 0%, #00b8b3 100%)' }\n            }}\n          >\n            Profili Yenile\n          </Button>\n          <Box sx={{ mt: 2 }}>\n            {uploading && <span style={{ marginLeft: 8 }}>Yükleniyor...</span>}\n            {error && <Typography color=\"error\" fontSize={14} mt={1}>{error}</Typography>}\n          </Box>\n\n          {/* Update Profile Dialog */}\n          <Dialog open={updateDialog} onClose={() => setUpdateDialog(false)} maxWidth=\"sm\" fullWidth>\n            <DialogTitle>Profil Güncelle</DialogTitle>\n            <DialogContent>\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 1 }}>\n                <TextField\n                  label=\"Kullanıcı Adı\"\n                  value={updateData.name}\n                  onChange={(e) => setUpdateData(prev => ({ ...prev, name: e.target.value }))}\n                  fullWidth\n                  variant=\"outlined\"\n                />\n                <TextField\n                  label=\"Email\"\n                  type=\"email\"\n                  value={updateData.email}\n                  onChange={(e) => setUpdateData(prev => ({ ...prev, email: e.target.value }))}\n                  fullWidth\n                  variant=\"outlined\"\n                />\n                <TextField\n                  label=\"Yeni Şifre (isteğe bağlı)\"\n                  type=\"password\"\n                  value={updateData.newPassword}\n                  onChange={(e) => setUpdateData(prev => ({ ...prev, newPassword: e.target.value }))}\n                  fullWidth\n                  variant=\"outlined\"\n                  helperText=\"Şifreyi değiştirmek istemiyorsanız boş bırakın\"\n                />\n                <TextField\n                  label=\"Mevcut Şifre\"\n                  type=\"password\"\n                  value={updateData.currentPassword}\n                  onChange={(e) => setUpdateData(prev => ({ ...prev, currentPassword: e.target.value }))}\n                  fullWidth\n                  variant=\"outlined\"\n                  required\n                  helperText=\"Güvenlik için mevcut şifrenizi girmelisiniz\"\n                />\n                {updateError && (\n                  <Typography color=\"error\" fontSize={14}>{updateError}</Typography>\n                )}\n              </Box>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setUpdateDialog(false)}>İptal</Button>\n              <Button \n                onClick={handleUpdateProfile} \n                variant=\"contained\" \n                disabled={updateLoading}\n              >\n                {updateLoading ? 'Güncelleniyor...' : 'Güncelle'}\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          {/* Image requirements / guidance dialog */}\n          <Dialog open={imageDialogOpen} onClose={() => setImageDialogOpen(false)} maxWidth=\"xs\" fullWidth>\n            <DialogTitle>Uygun Olmayan Görsel</DialogTitle>\n            <DialogContent>\n              <Typography sx={{ whiteSpace: 'pre-wrap' }} gutterBottom>\n                {imageDialogMessage}\n              </Typography>\n              <Typography variant=\"subtitle2\" sx={{ mt: 1, mb: 0.5 }}>\n                Önerilen Profil Fotoğrafı Özellikleri\n              </Typography>\n              <ul style={{ marginTop: 0 }}>\n                <li>Kare (1:1) oranı</li>\n                <li>En az 512x512 piksel</li>\n                <li>JPG veya PNG formatı</li>\n                <li>Maksimum boyut 10MB</li>\n              </ul>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setImageDialogOpen(false)} autoFocus>\n                Tamam\n              </Button>\n            </DialogActions>\n          </Dialog>\n        </Box>\n      </Paper>\n    </Box>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}