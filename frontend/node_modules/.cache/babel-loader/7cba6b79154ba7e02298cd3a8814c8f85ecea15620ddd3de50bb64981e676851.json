{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Chip,LinearProgress,Typography,Tooltip}from'@mui/material';import{API_URL}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COLORS=['#00b894','#0984e3','#fdcb6e','#e17055','#6c5ce7','#00cec9'];const TopicPreview=_ref=>{let{category,series,categoryId,seriesId}=_ref;const[loading,setLoading]=useState(true);const[topics,setTopics]=useState([]);const[total,setTotal]=useState(0);const[error,setError]=useState(null);useEffect(()=>{const params=new URLSearchParams();if(category)params.set('category',category);if(series)params.set('series',series);if(categoryId)params.set('categoryId',String(categoryId));if(seriesId)params.set('seriesId',String(seriesId));params.set('limit','60');setLoading(true);fetch(`${API_URL}/api/topics/preview?${params.toString()}`).then(async r=>{const ct=r.headers.get('content-type')||'';if(!r.ok||!ct.includes('application/json')){throw new Error(`status ${r.status}`);}return r.json();}).then(json=>{setTopics(json.topics||[]);setTotal(json.total||0);setLoading(false);}).catch(e=>{setError('öngörü alınamadı');setLoading(false);});},[category,series,categoryId,seriesId]);if(loading){return/*#__PURE__*/_jsx(Box,{sx:{mt:1},children:/*#__PURE__*/_jsx(LinearProgress,{sx:{height:6,borderRadius:3,bgcolor:'rgba(0,0,0,0.06)','& .MuiLinearProgress-bar':{bgcolor:'#00b894'}}})});}if(error||!topics.length)return null;return/*#__PURE__*/_jsxs(Box,{sx:{mt:1.25},children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap',mb:1},children:topics.slice(0,4).map((t,i)=>{var _t$percentage;return/*#__PURE__*/_jsx(Chip,{size:\"small\",label:`${t.name} • ${(_t$percentage=t.percentage)!==null&&_t$percentage!==void 0?_t$percentage:Math.round(t.count/(total||1)*100)}% • ${t.count} soru`,sx:{bgcolor:`${COLORS[i%COLORS.length]}22`,color:'#004d40',border:`1px solid ${COLORS[i%COLORS.length]}55`}},t.name);})}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',height:8,borderRadius:6,overflow:'hidden',bgcolor:'rgba(0,0,0,0.06)'},children:topics.map((t,i)=>{var _t$percentage2;const pct=(_t$percentage2=t.percentage)!==null&&_t$percentage2!==void 0?_t$percentage2:Math.round(t.count/(total||1)*100);return/*#__PURE__*/_jsx(Tooltip,{title:`${t.name}: ${pct}% (${t.count})`,children:/*#__PURE__*/_jsx(Box,{sx:{width:`${pct}%`,bgcolor:COLORS[i%COLORS.length]}})},t.name);})}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#546e7a'},children:[total,\" sorudan \\xF6ng\\xF6r\\xFC\"]})]});};export default TopicPreview;","map":{"version":3,"names":["React","useEffect","useState","Box","Chip","LinearProgress","Typography","Tooltip","API_URL","jsx","_jsx","jsxs","_jsxs","COLORS","TopicPreview","_ref","category","series","categoryId","seriesId","loading","setLoading","topics","setTopics","total","setTotal","error","setError","params","URLSearchParams","set","String","fetch","toString","then","r","ct","headers","get","ok","includes","Error","status","json","catch","e","sx","mt","children","height","borderRadius","bgcolor","length","display","gap","flexWrap","mb","slice","map","t","i","_t$percentage","size","label","name","percentage","Math","round","count","color","border","overflow","_t$percentage2","pct","title","width","variant"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/components/TopicPreview.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Chip, LinearProgress, Typography, Tooltip } from '@mui/material';\nimport { API_URL } from '../utils/api';\n\ntype Topic = { name: string; count: number; percentage?: number };\n\ninterface Props {\n  category?: string; // A1, A2, ... or id\n  series?: string; // Erasmus, Genel İngilizce ... or id\n  categoryId?: number;\n  seriesId?: string;\n}\n\nconst COLORS = ['#00b894', '#0984e3', '#fdcb6e', '#e17055', '#6c5ce7', '#00cec9'];\n\nconst TopicPreview: React.FC<Props> = ({ category, series, categoryId, seriesId }) => {\n  const [loading, setLoading] = useState(true);\n  const [topics, setTopics] = useState<Topic[]>([]);\n  const [total, setTotal] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (category) params.set('category', category);\n    if (series) params.set('series', series);\n    if (categoryId) params.set('categoryId', String(categoryId));\n    if (seriesId) params.set('seriesId', String(seriesId));\n    params.set('limit', '60');\n\n    setLoading(true);\n    fetch(`${API_URL}/api/topics/preview?${params.toString()}`)\n      .then(async (r) => {\n        const ct = r.headers.get('content-type') || '';\n        if (!r.ok || !ct.includes('application/json')) {\n          throw new Error(`status ${r.status}`);\n        }\n        return r.json();\n      })\n      .then(json => {\n        setTopics(json.topics || []);\n        setTotal(json.total || 0);\n        setLoading(false);\n      })\n      .catch((e) => {\n        setError('öngörü alınamadı');\n        setLoading(false);\n      });\n  }, [category, series, categoryId, seriesId]);\n\n  if (loading) {\n    return (\n      <Box sx={{ mt: 1 }}>\n        <LinearProgress sx={{ height: 6, borderRadius: 3, bgcolor: 'rgba(0,0,0,0.06)', '& .MuiLinearProgress-bar': { bgcolor: '#00b894' } }} />\n      </Box>\n    );\n  }\n  if (error || !topics.length) return null;\n\n  return (\n    <Box sx={{ mt: 1.25 }}>\n      <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n        {topics.slice(0, 4).map((t, i) => (\n          <Chip key={t.name}\n            size=\"small\"\n            label={`${t.name} • ${t.percentage ?? Math.round((t.count/(total||1))*100)}% • ${t.count} soru`}\n            sx={{ bgcolor: `${COLORS[i % COLORS.length]}22`, color: '#004d40', border: `1px solid ${COLORS[i % COLORS.length]}55` }}\n          />\n        ))}\n      </Box>\n      <Box sx={{ display: 'flex', height: 8, borderRadius: 6, overflow: 'hidden', bgcolor: 'rgba(0,0,0,0.06)' }}>\n        {topics.map((t, i) => {\n          const pct = (t.percentage ?? Math.round((t.count/(total||1))*100));\n          return (\n            <Tooltip key={t.name} title={`${t.name}: ${pct}% (${t.count})`}>\n              <Box sx={{ width: `${pct}%`, bgcolor: COLORS[i % COLORS.length] }} />\n            </Tooltip>\n          );\n        })}\n      </Box>\n      <Typography variant=\"caption\" sx={{ color: '#546e7a' }}>{total} sorudan öngörü</Typography>\n    </Box>\n  );\n};\n\nexport default TopicPreview;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}