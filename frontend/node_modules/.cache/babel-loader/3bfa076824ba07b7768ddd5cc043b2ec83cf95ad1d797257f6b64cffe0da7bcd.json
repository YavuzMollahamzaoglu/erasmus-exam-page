{"ast":null,"code":"var _jsxFileName = \"/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/components/TopicPreview.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Box, Chip, LinearProgress, Typography, Tooltip } from '@mui/material';\nimport { API_URL } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = ['#00b894', '#0984e3', '#fdcb6e', '#e17055', '#6c5ce7', '#00cec9'];\nconst TopicPreview = ({\n  category,\n  series,\n  categoryId,\n  seriesId\n}) => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [topics, setTopics] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const params = new URLSearchParams();\n    // If seriesId is known, use only seriesId to prevent general mixing\n    if (seriesId) {\n      params.set('seriesId', String(seriesId));\n    } else {\n      if (category) params.set('category', category);\n      if (series) params.set('series', series);\n      if (categoryId) params.set('categoryId', String(categoryId));\n    }\n    if (!seriesId) params.set('limit', '60');\n    setLoading(true);\n    fetch(`${API_URL}/api/topics/preview?${params.toString()}`).then(async r => {\n      const ct = r.headers.get('content-type') || '';\n      if (!r.ok || !ct.includes('application/json')) {\n        throw new Error(`status ${r.status}`);\n      }\n      return r.json();\n    }).then(json => {\n      setTopics(json.topics || []);\n      setTotal(json.total || 0);\n      setLoading(false);\n    }).catch(e => {\n      setError('öngörü alınamadı');\n      setLoading(false);\n    });\n  }, [category, series, categoryId, seriesId]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n        sx: {\n          height: 6,\n          borderRadius: 3,\n          bgcolor: 'rgba(0,0,0,0.06)',\n          '& .MuiLinearProgress-bar': {\n            bgcolor: '#00b894'\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !topics.length) return null;\n  const trMap = {\n    'vocabulary': 'Kelime Bilgisi',\n    'pronouns': 'Zamirler',\n    'prepositions': 'Edatlar',\n    'question forms': 'Soru Cümleleri',\n    'tenses': 'Zamanlar',\n    'conditionals': 'Koşul Cümleleri',\n    'articles': 'Tanımlıklar',\n    'modal verbs': 'Yardımcı Fiiller',\n    'passive voice': 'Edilgen Çatı',\n    'comparatives/superlatives': 'Karşılaştırma/Üstünlük',\n    'gerund/infinitive': 'Fiilimsi/Yalın Fiil',\n    'relative clauses': 'İlgi Cümleleri',\n    'phrasal verbs': 'Deyimsel Fiiller',\n    'reading': 'Okuma',\n    'grammar': 'Dilbilgisi',\n    'general': 'Genel'\n  };\n  const labelTR = name => {\n    const key = name.toLowerCase();\n    const tr = trMap[key];\n    return tr ? `${name} (${tr})` : name;\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 1.25\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        gap: 1,\n        flexWrap: 'wrap',\n        mb: 1\n      },\n      children: topics.slice(0, 4).map((t, i) => {\n        var _t$percentage;\n        return /*#__PURE__*/_jsxDEV(Chip, {\n          size: \"small\",\n          label: `${labelTR(t.name)} • ${(_t$percentage = t.percentage) !== null && _t$percentage !== void 0 ? _t$percentage : Math.round(t.count / (total || 1) * 100)}% • ${t.count} soru`,\n          sx: {\n            bgcolor: `${COLORS[i % COLORS.length]}22`,\n            color: '#004d40',\n            border: `1px solid ${COLORS[i % COLORS.length]}55`\n          }\n        }, t.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        height: 8,\n        borderRadius: 6,\n        overflow: 'hidden',\n        bgcolor: 'rgba(0,0,0,0.06)'\n      },\n      children: topics.map((t, i) => {\n        var _t$percentage2;\n        const pct = (_t$percentage2 = t.percentage) !== null && _t$percentage2 !== void 0 ? _t$percentage2 : Math.round(t.count / (total || 1) * 100);\n        return /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: `${labelTR(t.name)}: ${pct}% (${t.count})`,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: `${pct}%`,\n              bgcolor: COLORS[i % COLORS.length]\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, t.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"caption\",\n      sx: {\n        color: '#546e7a'\n      },\n      children: [total, \" sorudan \\xF6ng\\xF6r\\xFC\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(TopicPreview, \"zn3TSPgUQClxifISjj7gFLUlsM4=\");\n_c = TopicPreview;\nexport default TopicPreview;\nvar _c;\n$RefreshReg$(_c, \"TopicPreview\");","map":{"version":3,"names":["React","useEffect","useState","Box","Chip","LinearProgress","Typography","Tooltip","API_URL","jsxDEV","_jsxDEV","COLORS","TopicPreview","category","series","categoryId","seriesId","_s","loading","setLoading","topics","setTopics","total","setTotal","error","setError","params","URLSearchParams","set","String","fetch","toString","then","r","ct","headers","get","ok","includes","Error","status","json","catch","e","sx","mt","children","height","borderRadius","bgcolor","fileName","_jsxFileName","lineNumber","columnNumber","length","trMap","labelTR","name","key","toLowerCase","tr","display","gap","flexWrap","mb","slice","map","t","i","_t$percentage","size","label","percentage","Math","round","count","color","border","overflow","_t$percentage2","pct","title","width","variant","_c","$RefreshReg$"],"sources":["/Users/yavuz/Desktop/portfolio/erasmus-exam-page/frontend/src/components/TopicPreview.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Chip, LinearProgress, Typography, Tooltip } from '@mui/material';\nimport { API_URL } from '../utils/api';\n\ntype Topic = { name: string; count: number; percentage?: number };\n\ninterface Props {\n  category?: string; // A1, A2, ... or id\n  series?: string; // Erasmus, Genel İngilizce ... or id\n  categoryId?: number;\n  seriesId?: string;\n}\n\nconst COLORS = ['#00b894', '#0984e3', '#fdcb6e', '#e17055', '#6c5ce7', '#00cec9'];\n\nconst TopicPreview: React.FC<Props> = ({ category, series, categoryId, seriesId }) => {\n  const [loading, setLoading] = useState(true);\n  const [topics, setTopics] = useState<Topic[]>([]);\n  const [total, setTotal] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    // If seriesId is known, use only seriesId to prevent general mixing\n    if (seriesId) {\n      params.set('seriesId', String(seriesId));\n    } else {\n      if (category) params.set('category', category);\n      if (series) params.set('series', series);\n      if (categoryId) params.set('categoryId', String(categoryId));\n    }\n    if (!seriesId) params.set('limit', '60');\n\n    setLoading(true);\n    fetch(`${API_URL}/api/topics/preview?${params.toString()}`)\n      .then(async (r) => {\n        const ct = r.headers.get('content-type') || '';\n        if (!r.ok || !ct.includes('application/json')) {\n          throw new Error(`status ${r.status}`);\n        }\n        return r.json();\n      })\n      .then(json => {\n        setTopics(json.topics || []);\n        setTotal(json.total || 0);\n        setLoading(false);\n      })\n      .catch((e) => {\n        setError('öngörü alınamadı');\n        setLoading(false);\n      });\n  }, [category, series, categoryId, seriesId]);\n\n  if (loading) {\n    return (\n      <Box sx={{ mt: 1 }}>\n        <LinearProgress sx={{ height: 6, borderRadius: 3, bgcolor: 'rgba(0,0,0,0.06)', '& .MuiLinearProgress-bar': { bgcolor: '#00b894' } }} />\n      </Box>\n    );\n  }\n  if (error || !topics.length) return null;\n\n  const trMap: Record<string, string> = {\n    'vocabulary': 'Kelime Bilgisi',\n    'pronouns': 'Zamirler',\n    'prepositions': 'Edatlar',\n    'question forms': 'Soru Cümleleri',\n    'tenses': 'Zamanlar',\n    'conditionals': 'Koşul Cümleleri',\n    'articles': 'Tanımlıklar',\n    'modal verbs': 'Yardımcı Fiiller',\n    'passive voice': 'Edilgen Çatı',\n    'comparatives/superlatives': 'Karşılaştırma/Üstünlük',\n    'gerund/infinitive': 'Fiilimsi/Yalın Fiil',\n    'relative clauses': 'İlgi Cümleleri',\n    'phrasal verbs': 'Deyimsel Fiiller',\n    'reading': 'Okuma',\n    'grammar': 'Dilbilgisi',\n    'general': 'Genel',\n  };\n  const labelTR = (name: string) => {\n    const key = name.toLowerCase();\n    const tr = trMap[key];\n    return tr ? `${name} (${tr})` : name;\n  };\n\n  return (\n    <Box sx={{ mt: 1.25 }}>\n      <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n        {topics.slice(0, 4).map((t, i) => (\n          <Chip key={t.name}\n            size=\"small\"\n            label={`${labelTR(t.name)} • ${t.percentage ?? Math.round((t.count/(total||1))*100)}% • ${t.count} soru`}\n            sx={{ bgcolor: `${COLORS[i % COLORS.length]}22`, color: '#004d40', border: `1px solid ${COLORS[i % COLORS.length]}55` }}\n          />\n        ))}\n      </Box>\n      <Box sx={{ display: 'flex', height: 8, borderRadius: 6, overflow: 'hidden', bgcolor: 'rgba(0,0,0,0.06)' }}>\n        {topics.map((t, i) => {\n          const pct = (t.percentage ?? Math.round((t.count/(total||1))*100));\n          return (\n            <Tooltip key={t.name} title={`${labelTR(t.name)}: ${pct}% (${t.count})`}>\n              <Box sx={{ width: `${pct}%`, bgcolor: COLORS[i % COLORS.length] }} />\n            </Tooltip>\n          );\n        })}\n      </Box>\n      <Typography variant=\"caption\" sx={{ color: '#546e7a' }}>{total} sorudan öngörü</Typography>\n    </Box>\n  );\n};\n\nexport default TopicPreview;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}