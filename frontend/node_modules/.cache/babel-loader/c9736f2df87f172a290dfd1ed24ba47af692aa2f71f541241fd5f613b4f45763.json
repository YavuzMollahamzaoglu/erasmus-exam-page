{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useParams,useLocation,useNavigate}from'react-router-dom';import{Box,Paper,Typography,Button,CircularProgress,IconButton}from'@mui/material';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import ArrowForwardIcon from'@mui/icons-material/ArrowForward';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Exam=()=>{var _location$state,_location$state2;const{testId}=useParams();const location=useLocation();const navigate=useNavigate();const[questions,setQuestions]=useState(((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.questions)||[]);const[loading,setLoading]=useState((_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.questions?false:true);const[current,setCurrent]=useState(0);const[selected,setSelected]=useState(null);const[showResult,setShowResult]=useState(false);const[showExplanation,setShowExplanation]=useState(false);const[score,setScore]=useState(0);const[mistakes,setMistakes]=useState(0);const[showSummary,setShowSummary]=useState(false);const[time,setTime]=useState(0);const[reviewMode,setReviewMode]=useState(false);const[answers,setAnswers]=useState([]);const[timerPaused,setTimerPaused]=useState(false);const timerRef=useRef(null);// Helper function to format text: first letter uppercase, rest lowercase\nconst formatText=text=>{if(!text||text.length===0)return text;return text.charAt(0).toUpperCase()+text.slice(1).toLowerCase();};// Helper function for case insensitive comparison\nconst compareAnswers=(answer1,answer2)=>{return answer1.toLowerCase()===answer2.toLowerCase();};useEffect(()=>{var _location$state3;// Only fetch if not coming from state\nif(!((_location$state3=location.state)!==null&&_location$state3!==void 0&&_location$state3.questions)){setLoading(true);fetch(`http://localhost:4000/api/tests/${testId}/questions`).then(res=>res.json()).then(data=>{const formattedQuestions=(data.questions||[]).map(q=>{// Parse options if they're in string format\nlet optionsArray=[];if(Array.isArray(q.options)){optionsArray=q.options.map(formatText);}else if(typeof q.options==='string'){try{optionsArray=JSON.parse(q.options).map(formatText);}catch{optionsArray=[];}}// Convert correct answer to letter if it's a word\nlet correctLetter=q.correct;if(q.correct&&q.correct.length>1){// If correct is a word, find its index in options and convert to letter\nconst correctIndex=optionsArray.findIndex(option=>option.toLowerCase()===q.correct.toLowerCase());if(correctIndex!==-1){correctLetter=String.fromCharCode(65+correctIndex);// A, B, C, D\nconsole.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);}}return{...q,options:optionsArray,correct:correctLetter};});setQuestions(formattedQuestions);setLoading(false);});}else{// Format questions from state as well\nconst formattedQuestions=location.state.questions.map(q=>{// Parse options if they're in string format\nlet optionsArray=[];if(Array.isArray(q.options)){optionsArray=q.options.map(formatText);}else if(typeof q.options==='string'){try{optionsArray=JSON.parse(q.options).map(formatText);}catch{optionsArray=[];}}// Convert correct answer to letter if it's a word\nlet correctLetter=q.correct;if(q.correct&&q.correct.length>1){// If correct is a word, find its index in options and convert to letter\nconst correctIndex=optionsArray.findIndex(option=>option.toLowerCase()===q.correct.toLowerCase());if(correctIndex!==-1){correctLetter=String.fromCharCode(65+correctIndex);// A, B, C, D\nconsole.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);}}return{...q,options:optionsArray,correct:correctLetter};});setQuestions(formattedQuestions);}},[testId,location.state]);// Initialize answers array when questions are loaded\nuseEffect(()=>{if(questions.length>0&&answers.length!==questions.length){setAnswers(Array(questions.length).fill(null));}},[questions,answers.length]);// Timer logic - pause when answer is selected or exam is finished\nuseEffect(()=>{if(showSummary||timerPaused)return;timerRef.current=setInterval(()=>{setTime(t=>t+1);},1000);return()=>{if(timerRef.current)clearInterval(timerRef.current);};},[showSummary,timerPaused]);if(loading){return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',bgcolor:'#b2ebf2',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{p:4,borderRadius:4,background:'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',boxShadow:'0 20px 40px rgba(0,0,0,0.1)',textAlign:'center'},children:[/*#__PURE__*/_jsx(CircularProgress,{sx:{color:'#00b894',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'#2c3e50',fontWeight:600},children:\"Sorular Y\\xFCkleniyor...\"})]})});}if(!questions.length){return/*#__PURE__*/_jsx(Typography,{align:\"center\",mt:8,children:\"No questions found for this exam.\"});}const q=questions[current];// Ensure options is always an array\nlet options=[];if(Array.isArray(q.options)){options=q.options;}else if(typeof q.options==='string'){try{options=JSON.parse(q.options);}catch{options=[];}}// Helper function to get correct answer text\nconst getCorrectAnswerText=()=>{if(!q.correct||options.length===0)return q.correct;const correctIndex=q.correct.charCodeAt(0)-65;// A=0, B=1, C=2, D=3\nconst correctText=options[correctIndex];return correctText?`${q.correct}) ${correctText}`:q.correct;};const handleSelect=optionIndex=>{const selectedLetter=String.fromCharCode(65+optionIndex);// 0->A, 1->B, 2->C, 3->D\nconsole.log('Selected option index:',optionIndex);console.log('Selected letter:',selectedLetter);console.log('Question correct answer:',q.correct);console.log('Question correct answer type:',typeof q.correct);setSelected(selectedLetter);setShowResult(true);setTimerPaused(true);// Pause timer when answer is selected\nsetAnswers(prev=>{const copy=[...prev];copy[current]=selectedLetter;return copy;});if(compareAnswers(selectedLetter,q.correct)){setScore(s=>s+1);}else{setMistakes(m=>m+1);}};const nextQuestion=()=>{if(current<questions.length-1){setCurrent(c=>c+1);setSelected(answers[current+1]||null);setShowResult(!!answers[current+1]);setShowExplanation(false);setTimerPaused(false);// Resume timer when moving to next question\n}};// Sınavı history'ye kaydet\nconst saveToHistory=async()=>{const token=localStorage.getItem('token');try{var _questions$,_questions$2,_questions$3,_questions$4;await fetch('http://localhost:4000/api/history',{method:'POST',headers:{'Content-Type':'application/json',...(token?{'Authorization':`Bearer ${token}`}:{})},body:JSON.stringify({category:typeof((_questions$=questions[0])===null||_questions$===void 0?void 0:_questions$.categoryId)==='string'?(_questions$2=questions[0])===null||_questions$2===void 0?void 0:_questions$2.categoryId:String((_questions$3=questions[0])===null||_questions$3===void 0?void 0:_questions$3.categoryId),seriesId:((_questions$4=questions[0])===null||_questions$4===void 0?void 0:_questions$4.seriesId)||null,duration:time,correct:score,incorrect:mistakes,questions:questions.map((q,idx)=>({questionId:q.id,userAnswer:answers[idx],isCorrect:answers[idx]?compareAnswers(answers[idx],q.correct):false}))})});}catch(e){}};const handleFinish=async()=>{// Ensure answers array is properly sized\nif(answers.length===0||answers.length!==questions.length){setAnswers(Array(questions.length).fill(null));}// Calculate final scores\nlet correctCount=0;let incorrectCount=0;let unansweredCount=0;questions.forEach((question,idx)=>{const userAnswer=answers[idx];if(userAnswer===null||userAnswer===undefined||userAnswer===''){unansweredCount++;}else if(compareAnswers(userAnswer,question.correct)){correctCount++;}else{incorrectCount++;}});// Update state with calculated scores\nsetScore(correctCount);setMistakes(incorrectCount);setShowSummary(true);setReviewMode(false);setTimerPaused(true);// Permanently pause timer when exam is finished\nif(timerRef.current)clearInterval(timerRef.current);await saveToHistory();};const handleCloseSummary=()=>{setShowSummary(false);setReviewMode(false);setCurrent(0);setSelected(null);setShowResult(false);setShowExplanation(false);setScore(0);setMistakes(0);setTime(0);setAnswers([]);};const handleAddRanking=()=>{// Check if user is logged in\nconst token=localStorage.getItem('token');if(!token){// Redirect to login page if not logged in\nnavigate('/login');return;}// Send all relevant exam result data to backend\nconst categoryId=q.categoryId;const seriesId=q.seriesId;fetch('http://localhost:4000/api/rankings',{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`},body:JSON.stringify({score,time,categoryId,seriesId,correct:score,mistakes})}).then(async res=>{let data;try{data=await res.json();}catch(e){data={};}if(!res.ok){var _data,_data2;console.error('Ranking save error:',data);let errorMessage='Failed to save ranking: '+(((_data=data)===null||_data===void 0?void 0:_data.message)||res.statusText);// Check for authentication related errors\nif(((_data2=data)===null||_data2===void 0?void 0:_data2.message)==='Authorization header missing'||res.status===401){errorMessage='Giriş yapmak zorunludur\\n(Bu exam kısmında bitire bastıktan sonra çıkan yerde gözükecek)';}alert(errorMessage);return;}setShowSummary(false);navigate('/rankings');}).catch(err=>{console.error('Ranking save error:',err);alert('Failed to save ranking. Network error.');});};const prevQuestion=()=>{if(current>0){setCurrent(c=>c-1);setSelected(answers[current-1]||null);setShowResult(!!answers[current-1]);setShowExplanation(false);// If the previous question was already answered, keep timer paused\nsetTimerPaused(!!answers[current-1]);}};return/*#__PURE__*/_jsxs(Box,{sx:{minHeight:'100vh',bgcolor:'#b2ebf2',display:'flex',alignItems:'center',justifyContent:'center',position:'relative'},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:'fixed',top:90,right:32,zIndex:1000,background:timerPaused?'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)':'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',color:'#fff',px:3,py:1,borderRadius:3,fontWeight:700,fontSize:18,boxShadow:'0 6px 16px rgba(0, 184, 148, 0.4)',display:'flex',alignItems:'center',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',gap:1,transition:'background-color 0.3s ease'},children:[timerPaused&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F8\\uFE0F\"}),Math.floor(time/60),\":\",(time%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(IconButton,{sx:{position:'absolute',left:{xs:8,md:32},top:'50%',transform:'translateY(-50%)',background:current>0?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.8) 100%)':'rgba(255,255,255,0.4)',color:current>0?'#00b894':'#bdc3c7',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:current>0?'0 8px 25px rgba(0, 184, 148, 0.2)':'0 4px 15px rgba(0, 0, 0, 0.1)',borderRadius:3,p:2,cursor:current>0?'pointer':'default',opacity:current>0?1:0.5,transition:'all 0.3s ease','&:hover':{transform:current>0?'translateY(-50%) translateX(-3px)':'translateY(-50%)',background:current>0?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':'rgba(255,255,255,0.4)',boxShadow:current>0?'0 12px 30px rgba(0, 184, 148, 0.3)':'0 4px 15px rgba(0, 0, 0, 0.1)'}},onClick:prevQuestion,disabled:current===0,children:/*#__PURE__*/_jsx(ArrowBackIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{sx:{position:'absolute',right:{xs:8,md:32},top:'50%',transform:'translateY(-50%)',background:current<questions.length-1?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.8) 100%)':'rgba(255,255,255,0.4)',color:current<questions.length-1?'#00b894':'#bdc3c7',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:current<questions.length-1?'0 8px 25px rgba(0, 184, 148, 0.2)':'0 4px 15px rgba(0, 0, 0, 0.1)',borderRadius:3,p:2,cursor:current<questions.length-1?'pointer':'default',opacity:current<questions.length-1?1:0.5,transition:'all 0.3s ease','&:hover':{transform:current<questions.length-1?'translateY(-50%) translateX(3px)':'translateY(-50%)',background:current<questions.length-1?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':'rgba(255,255,255,0.4)',boxShadow:current<questions.length-1?'0 12px 30px rgba(0, 184, 148, 0.3)':'0 4px 15px rgba(0, 0, 0, 0.1)'}},onClick:nextQuestion,disabled:current===questions.length-1,children:/*#__PURE__*/_jsx(ArrowForwardIcon,{fontSize:\"large\"})}),!reviewMode&&/*#__PURE__*/_jsxs(Paper,{elevation:6,sx:{p:5,borderRadius:4,minWidth:340,maxWidth:600,width:'100%',background:'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.1)',transition:'transform 0.3s ease','&:hover':{transform:'translateY(-5px)'}},children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",fontWeight:700,align:\"center\",sx:{background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',textShadow:'0 2px 4px rgba(0, 0, 0, 0.1)'},children:[\"Soru \",current+1,\" / \",questions.length]})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:3,sx:{color:'#2c3e50',fontWeight:600,fontSize:'1.2rem',lineHeight:1.6,textAlign:'center',padding:'16px',background:'rgba(255, 255, 255, 0.7)',borderRadius:'12px',border:'1px solid rgba(0, 184, 148, 0.2)'},children:q.text}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mb:3},children:options.length>0?options.map((opt,idx)=>{const optionLetter=String.fromCharCode(65+idx);// A, B, C, D\nconst isSelected=selected===optionLetter;const isCorrect=compareAnswers(optionLetter,q.correct);const showColor=!!selected;return/*#__PURE__*/_jsxs(Button,{variant:isSelected?'contained':'outlined',color:showColor?isCorrect?'primary':isSelected?'error':'primary':'primary',sx:{textAlign:'left',fontWeight:600,fontSize:18,borderRadius:4,py:2,px:2,background:!showColor?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)':isSelected?isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)':'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',color:showColor&&isSelected?'#ffffff':'#2c3e50',border:showColor&&isSelected?'none':'2px solid rgba(0, 184, 148, 0.3)',backdropFilter:'blur(10px)',boxShadow:isSelected?'0 8px 25px rgba(0, 184, 148, 0.3)':'0 4px 15px rgba(0, 0, 0, 0.1)',position:'relative',transition:'all 0.3s ease','&:hover':{transform:!selected?'translateY(-2px)':'none',background:!showColor?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':undefined,boxShadow:!selected?'0 8px 25px rgba(0, 184, 148, 0.2)':undefined}},onClick:()=>!showResult&&handleSelect(idx),disabled:!!selected,children:[/*#__PURE__*/_jsxs(\"span\",{style:{position:'relative',zIndex:2},children:[String.fromCharCode(65+idx),\") \",opt]}),showColor&&isSelected&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:16,top:'50%',transform:'translateY(-50%)',fontWeight:700,fontSize:14,color:'#ffffff',background:isCorrect?'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',borderRadius:12,padding:'4px 12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.2)',zIndex:3},children:isCorrect?'✓ Doğru':'✗ Yanlış'})]},idx);}):/*#__PURE__*/_jsx(Typography,{color:\"error\",fontWeight:600,mb:2,children:\"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"})}),showResult&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{color:compareAnswers(selected||'',q.correct)?'success.main':'error.main',fontWeight:700,mb:1,children:compareAnswers(selected||'',q.correct)?'Doğru!':`Doğru Yanıt: ${getCorrectAnswerText()}`}),/*#__PURE__*/_jsx(Button,{variant:\"text\",onClick:()=>setShowExplanation(e=>!e),children:showExplanation?'Çözümü Gizle':'Çözümü Göster'}),showExplanation&&/*#__PURE__*/_jsx(Typography,{mt:2,color:\"text.secondary\",children:q.explanation})]}),!showSummary&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",sx:{fontWeight:700,fontSize:18,borderRadius:3,px:4,py:1.5,boxShadow:2,textTransform:'none'},onClick:handleFinish,children:\"Bitir\"})})]}),showSummary&&/*#__PURE__*/_jsx(Box,{sx:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',bgcolor:'rgba(10,29,86,0.7)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{bgcolor:'#fff',borderRadius:6,boxShadow:8,p:4,minWidth:320,maxWidth:'90vw',textAlign:'center',position:'relative'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",fontWeight:700,color:\"#19376D\",mb:2,children:\"S\\u0131nav Sonucu\"}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#43ea7c\",mb:1,children:[\"Do\\u011Fru: \",score]}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#e74c3c\",mb:1,children:[\"Yanl\\u0131\\u015F: \",mistakes]}),/*#__PURE__*/_jsxs(Typography,{fontSize:20,fontWeight:600,color:\"#f39c12\",mb:1,children:[\"Bo\\u015F: \",answers.filter(answer=>answer===null||answer===undefined||answer==='').length]}),/*#__PURE__*/_jsxs(Typography,{fontSize:18,fontWeight:500,color:\"#19376D\",mb:2,children:[\"S\\xFCre: \",Math.floor(time/60),\":\",(time%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:2,justifyContent:'center',mb:3},children:questions.map((question,idx)=>{const userAnswer=answers[idx];const isUnanswered=userAnswer===null||userAnswer===undefined||userAnswer==='';const isCorrect=!isUnanswered&&compareAnswers(userAnswer,question.correct);// Determine colors based on answer status\nlet borderColor,textColor,backgroundColor,hoverColor;if(isUnanswered){// Boş bırakılan sorular - turuncu\nborderColor='#f39c12';textColor='#f39c12';backgroundColor='#fdf6e3';hoverColor='#f8e49a';}else if(isCorrect){// Doğru cevaplar - yeşil\nborderColor='#43ea7c';textColor='#43ea7c';backgroundColor='#eafaf3';hoverColor='#c6f7e2';}else{// Yanlış cevaplar - kırmızı\nborderColor='#e74c3c';textColor='#e74c3c';backgroundColor='#fff0f0';hoverColor='#ffe3e3';}return/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{minWidth:48,height:48,fontWeight:700,fontSize:18,borderRadius:3,border:'none',color:'#ffffff',background:!answers[idx]?'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)':isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',backdropFilter:'blur(10px)',boxShadow:'0 6px 20px rgba(0, 0, 0, 0.15)',mx:0.5,my:0.5,transition:'all 0.3s ease','&:hover':{transform:'translateY(-3px)',boxShadow:'0 8px 25px rgba(0, 0, 0, 0.2)'}},onClick:()=>{setReviewMode(true);setShowSummary(false);setCurrent(idx);setSelected(answers[idx]||null);setShowResult(!!answers[idx]);setShowExplanation(false);},children:idx+1},idx);})}),/*#__PURE__*/_jsx(Typography,{fontSize:15,color:\"#19376D\",mb:2,children:\"Sorular\\u0131 incelemek i\\xE7in t\\u0131klay\\u0131n. Ye\\u015Fil: Do\\u011Fru, K\\u0131rm\\u0131z\\u0131: Yanl\\u0131\\u015F, Turuncu: Bo\\u015F\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'center',gap:2,mt:2,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:handleAddRanking,children:\"S\\u0131ralamaya Ekle\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{navigate('/categories');},children:\"Kapat\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{handleCloseSummary();},children:\"Tekrar \\xC7\\xF6z\"})]}),!localStorage.getItem('token')&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{display:'block',textAlign:'center',mt:1,fontSize:'0.75rem',color:'#666',fontStyle:'italic'},children:\"S\\u0131ralamaya eklemek i\\xE7in \\xFCye giri\\u015Fi gerekli veya kay\\u0131t olmal\\u0131s\\u0131n\\u0131z\"})]})}),reviewMode&&/*#__PURE__*/_jsxs(Paper,{elevation:6,sx:{p:5,borderRadius:4,minWidth:340,maxWidth:600,width:'100%',background:'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.1)',transition:'transform 0.3s ease','&:hover':{transform:'translateY(-5px)'}},children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",fontWeight:700,align:\"center\",sx:{background:'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',textShadow:'0 2px 4px rgba(0, 0, 0, 0.1)'},children:[\"Soru \",current+1,\" / \",questions.length,\" (\\u0130nceleme)\"]})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:3,sx:{color:'#2c3e50',fontWeight:600,fontSize:'1.2rem',lineHeight:1.6,textAlign:'center',padding:'16px',background:'rgba(255, 255, 255, 0.7)',borderRadius:'12px',border:'1px solid rgba(0, 184, 148, 0.2)'},children:q.text}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mb:3},children:options.length>0?options.map((opt,idx)=>{const optionLetter=String.fromCharCode(65+idx);// A, B, C, D\nconst isSelected=answers[current]===optionLetter;const isCorrect=compareAnswers(optionLetter,q.correct);const showColor=!!answers[current];return/*#__PURE__*/_jsxs(Button,{variant:isSelected?'contained':'outlined',color:showColor?isCorrect?'primary':isSelected?'error':'primary':'primary',sx:{textAlign:'left',fontWeight:600,fontSize:18,borderRadius:4,py:2,px:2,background:!showColor?'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)':isSelected?isCorrect?'linear-gradient(135deg, #00b894 0%, #00cec9 100%)':'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)':isCorrect?'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)':'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',color:showColor&&isSelected?'#ffffff':isCorrect&&showColor?'#00b894':'#2c3e50',border:isCorrect&&showColor&&!isSelected?'2px solid #00b894':showColor&&isSelected?'none':'2px solid rgba(0, 184, 148, 0.3)',backdropFilter:'blur(10px)',boxShadow:isSelected?'0 8px 25px rgba(0, 184, 148, 0.3)':isCorrect&&showColor?'0 4px 15px rgba(0, 184, 148, 0.2)':'0 4px 15px rgba(0, 0, 0, 0.1)',position:'relative',transition:'all 0.3s ease',pointerEvents:'none'},disabled:true,children:[/*#__PURE__*/_jsxs(\"span\",{style:{position:'relative',zIndex:2},children:[String.fromCharCode(65+idx),\") \",opt]}),showColor&&isSelected&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:16,top:'50%',transform:'translateY(-50%)',fontWeight:700,fontSize:18,color:isCorrect?'#43ea7c':'#e74c3c',background:isCorrect?'#eafaf3':'#fff0f0',borderRadius:8,padding:'2px 12px',boxShadow:'0 2px 8px rgba(67,234,124,0.08)',zIndex:3},children:isCorrect?'Doğru':'Yanlış'})]},idx);}):/*#__PURE__*/_jsx(Typography,{color:\"error\",fontWeight:600,mb:2,children:\"Bu sorunun se\\xE7enekleri eksik veya hatal\\u0131.\"})}),!!q.explanation&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",onClick:()=>setShowExplanation(e=>!e),children:showExplanation?'Çözümü Gizle':'Çözümü Göster'}),showExplanation&&/*#__PURE__*/_jsx(Typography,{mt:2,color:\"text.secondary\",children:q.explanation})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:{fontWeight:700,fontSize:16,borderRadius:3,px:4,py:1.2,boxShadow:2,textTransform:'none'},onClick:()=>{setReviewMode(false);setShowSummary(true);setShowExplanation(false);},children:\"Sonu\\xE7lara D\\xF6n\"})})]})]});};export default Exam;","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","useLocation","useNavigate","Box","Paper","Typography","Button","CircularProgress","IconButton","ArrowBackIcon","ArrowForwardIcon","jsx","_jsx","jsxs","_jsxs","Exam","_location$state","_location$state2","testId","location","navigate","questions","setQuestions","state","loading","setLoading","current","setCurrent","selected","setSelected","showResult","setShowResult","showExplanation","setShowExplanation","score","setScore","mistakes","setMistakes","showSummary","setShowSummary","time","setTime","reviewMode","setReviewMode","answers","setAnswers","timerPaused","setTimerPaused","timerRef","formatText","text","length","charAt","toUpperCase","slice","toLowerCase","compareAnswers","answer1","answer2","_location$state3","fetch","then","res","json","data","formattedQuestions","map","q","optionsArray","Array","isArray","options","JSON","parse","correctLetter","correct","correctIndex","findIndex","option","String","fromCharCode","console","log","fill","setInterval","t","clearInterval","sx","minHeight","bgcolor","display","alignItems","justifyContent","children","p","borderRadius","background","boxShadow","textAlign","color","mb","variant","fontWeight","align","mt","getCorrectAnswerText","charCodeAt","correctText","handleSelect","optionIndex","selectedLetter","prev","copy","s","m","nextQuestion","c","saveToHistory","token","localStorage","getItem","_questions$","_questions$2","_questions$3","_questions$4","method","headers","body","stringify","category","categoryId","seriesId","duration","incorrect","idx","questionId","id","userAnswer","isCorrect","e","handleFinish","correctCount","incorrectCount","unansweredCount","forEach","question","undefined","handleCloseSummary","handleAddRanking","Authorization","ok","_data","_data2","error","errorMessage","message","statusText","status","alert","catch","err","prevQuestion","position","top","right","zIndex","px","py","fontSize","backdropFilter","border","gap","transition","Math","floor","toString","padStart","left","xs","md","transform","cursor","opacity","onClick","disabled","elevation","minWidth","maxWidth","width","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","textShadow","lineHeight","padding","flexDirection","opt","optionLetter","isSelected","showColor","style","explanation","textTransform","height","filter","answer","flexWrap","isUnanswered","borderColor","textColor","backgroundColor","hoverColor","mx","my","fontStyle","pointerEvents"],"sources":["/Users/yavuz/erasmus-exam-page/erasmus-exam-page/frontend/src/pages/Exam.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Paper, Typography, Button, CircularProgress, IconButton } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\n\ninterface Question {\n  id: string;\n  text: string;\n  options: string[];\n  correct: string;\n  explanation: string;\n  categoryId: number;\n  seriesId: string;\n}\n\nconst Exam: React.FC = () => {\n  const { testId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [questions, setQuestions] = useState<Question[]>(location.state?.questions || []);\n  const [loading, setLoading] = useState(location.state?.questions ? false : true);\n  const [current, setCurrent] = useState(0);\n  const [selected, setSelected] = useState<string | null>(null);\n  const [showResult, setShowResult] = useState(false);\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [score, setScore] = useState(0);\n  const [mistakes, setMistakes] = useState(0);\n  const [showSummary, setShowSummary] = useState(false);\n  const [time, setTime] = useState(0);\n  const [reviewMode, setReviewMode] = useState(false);\n  const [answers, setAnswers] = useState<(string | null)[]>([]);\n  const [timerPaused, setTimerPaused] = useState(false);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Helper function to format text: first letter uppercase, rest lowercase\n  const formatText = (text: string) => {\n    if (!text || text.length === 0) return text;\n    return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase();\n  };\n\n  // Helper function for case insensitive comparison\n  const compareAnswers = (answer1: string, answer2: string) => {\n    return answer1.toLowerCase() === answer2.toLowerCase();\n  };\n\n  useEffect(() => {\n    // Only fetch if not coming from state\n    if (!location.state?.questions) {\n      setLoading(true);\n      fetch(`http://localhost:4000/api/tests/${testId}/questions`)\n        .then(res => res.json())\n        .then(data => {\n          const formattedQuestions = (data.questions || []).map((q: Question) => {\n            // Parse options if they're in string format\n            let optionsArray: string[] = [];\n            if (Array.isArray(q.options)) {\n              optionsArray = q.options.map(formatText);\n            } else if (typeof q.options === 'string') {\n              try {\n                optionsArray = JSON.parse(q.options).map(formatText);\n              } catch {\n                optionsArray = [];\n              }\n            }\n\n            // Convert correct answer to letter if it's a word\n            let correctLetter = q.correct;\n            if (q.correct && q.correct.length > 1) {\n              // If correct is a word, find its index in options and convert to letter\n              const correctIndex = optionsArray.findIndex(option => \n                option.toLowerCase() === q.correct.toLowerCase()\n              );\n              if (correctIndex !== -1) {\n                correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n                console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n              }\n            }\n\n            return {\n              ...q,\n              options: optionsArray,\n              correct: correctLetter\n            };\n          });\n          setQuestions(formattedQuestions);\n          setLoading(false);\n        });\n    } else {\n      // Format questions from state as well\n      const formattedQuestions = location.state.questions.map((q: Question) => {\n        // Parse options if they're in string format\n        let optionsArray: string[] = [];\n        if (Array.isArray(q.options)) {\n          optionsArray = q.options.map(formatText);\n        } else if (typeof q.options === 'string') {\n          try {\n            optionsArray = JSON.parse(q.options).map(formatText);\n          } catch {\n            optionsArray = [];\n          }\n        }\n\n        // Convert correct answer to letter if it's a word\n        let correctLetter = q.correct;\n        if (q.correct && q.correct.length > 1) {\n          // If correct is a word, find its index in options and convert to letter\n          const correctIndex = optionsArray.findIndex(option => \n            option.toLowerCase() === q.correct.toLowerCase()\n          );\n          if (correctIndex !== -1) {\n            correctLetter = String.fromCharCode(65 + correctIndex); // A, B, C, D\n            console.log(`Converted \"${q.correct}\" to letter \"${correctLetter}\"`);\n          }\n        }\n\n        return {\n          ...q,\n          options: optionsArray,\n          correct: correctLetter\n        };\n      });\n      setQuestions(formattedQuestions);\n    }\n  }, [testId, location.state]);\n\n  // Initialize answers array when questions are loaded\n  useEffect(() => {\n    if (questions.length > 0 && answers.length !== questions.length) {\n      setAnswers(Array(questions.length).fill(null));\n    }\n  }, [questions, answers.length]);\n\n  // Timer logic - pause when answer is selected or exam is finished\n  useEffect(() => {\n    if (showSummary || timerPaused) return;\n    timerRef.current = setInterval(() => {\n      setTime((t) => t + 1);\n    }, 1000);\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [showSummary, timerPaused]);\n\n  if (loading) {\n    return (\n      <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <Box sx={{\n          p: 4,\n          borderRadius: 4,\n          background: 'linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)',\n          boxShadow: '0 20px 40px rgba(0,0,0,0.1)',\n          textAlign: 'center'\n        }}>\n          <CircularProgress sx={{ color: '#00b894', mb: 2 }} />\n          <Typography variant=\"h6\" sx={{ color: '#2c3e50', fontWeight: 600 }}>\n            Sorular Yükleniyor...\n          </Typography>\n        </Box>\n      </Box>\n    );\n  }\n\n  if (!questions.length) {\n    return <Typography align=\"center\" mt={8}>No questions found for this exam.</Typography>;\n  }\n\n  const q = questions[current];\n  // Ensure options is always an array\n  let options: string[] = [];\n  if (Array.isArray(q.options)) {\n    options = q.options;\n  } else if (typeof q.options === 'string') {\n    try {\n      options = JSON.parse(q.options);\n    } catch {\n      options = [];\n    }\n  }\n\n  // Helper function to get correct answer text\n  const getCorrectAnswerText = () => {\n    if (!q.correct || options.length === 0) return q.correct;\n    const correctIndex = q.correct.charCodeAt(0) - 65; // A=0, B=1, C=2, D=3\n    const correctText = options[correctIndex];\n    return correctText ? `${q.correct}) ${correctText}` : q.correct;\n  };\n\n  const handleSelect = (optionIndex: number) => {\n    const selectedLetter = String.fromCharCode(65 + optionIndex); // 0->A, 1->B, 2->C, 3->D\n    console.log('Selected option index:', optionIndex);\n    console.log('Selected letter:', selectedLetter);\n    console.log('Question correct answer:', q.correct);\n    console.log('Question correct answer type:', typeof q.correct);\n    \n    setSelected(selectedLetter);\n    setShowResult(true);\n    setTimerPaused(true); // Pause timer when answer is selected\n    setAnswers((prev) => {\n      const copy = [...prev];\n      copy[current] = selectedLetter;\n      return copy;\n    });\n    if (compareAnswers(selectedLetter, q.correct)) {\n      setScore((s) => s + 1);\n    } else {\n      setMistakes((m) => m + 1);\n    }\n  };\n\n  const nextQuestion = () => {\n    if (current < questions.length - 1) {\n      setCurrent(c => c + 1);\n      setSelected(answers[current + 1] || null);\n      setShowResult(!!answers[current + 1]);\n      setShowExplanation(false);\n      setTimerPaused(false); // Resume timer when moving to next question\n    }\n  };\n\n  // Sınavı history'ye kaydet\n  const saveToHistory = async () => {\n    const token = localStorage.getItem('token');\n    try {\n      await fetch('http://localhost:4000/api/history', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\n        },\n        body: JSON.stringify({\n          category: typeof questions[0]?.categoryId === 'string' ? questions[0]?.categoryId : String(questions[0]?.categoryId),\n          seriesId: questions[0]?.seriesId || null,\n          duration: time,\n          correct: score,\n          incorrect: mistakes,\n          questions: questions.map((q, idx) => ({\n            questionId: q.id,\n            userAnswer: answers[idx],\n            isCorrect: answers[idx] ? compareAnswers(answers[idx]!, q.correct) : false\n          }))\n        })\n      });\n    } catch (e) {}\n  };\n\n  const handleFinish = async () => {\n    // Ensure answers array is properly sized\n    if (answers.length === 0 || answers.length !== questions.length) {\n      setAnswers(Array(questions.length).fill(null));\n    }\n    \n    // Calculate final scores\n    let correctCount = 0;\n    let incorrectCount = 0;\n    let unansweredCount = 0;\n    \n    questions.forEach((question, idx) => {\n      const userAnswer = answers[idx];\n      if (userAnswer === null || userAnswer === undefined || userAnswer === '') {\n        unansweredCount++;\n      } else if (compareAnswers(userAnswer, question.correct)) {\n        correctCount++;\n      } else {\n        incorrectCount++;\n      }\n    });\n    \n    // Update state with calculated scores\n    setScore(correctCount);\n    setMistakes(incorrectCount);\n    \n    setShowSummary(true);\n    setReviewMode(false);\n    setTimerPaused(true); // Permanently pause timer when exam is finished\n    if (timerRef.current) clearInterval(timerRef.current);\n    \n    await saveToHistory();\n  };\n\n  const handleCloseSummary = () => {\n    setShowSummary(false);\n    setReviewMode(false);\n    setCurrent(0);\n    setSelected(null);\n    setShowResult(false);\n    setShowExplanation(false);\n    setScore(0);\n    setMistakes(0);\n    setTime(0);\n    setAnswers([]);\n  };\n\n  const handleAddRanking = () => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Redirect to login page if not logged in\n      navigate('/login');\n      return;\n    }\n\n    // Send all relevant exam result data to backend\n    const categoryId = q.categoryId;\n    const seriesId = q.seriesId;\n    fetch('http://localhost:4000/api/rankings', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\n      body: JSON.stringify({ score, time, categoryId, seriesId, correct: score, mistakes }),\n    })\n      .then(async res => {\n        let data;\n        try {\n          data = await res.json();\n        } catch (e) {\n          data = {};\n        }\n        if (!res.ok) {\n          console.error('Ranking save error:', data);\n          let errorMessage = 'Failed to save ranking: ' + (data?.message || res.statusText);\n          \n          // Check for authentication related errors\n          if (data?.message === 'Authorization header missing' || res.status === 401) {\n            errorMessage = 'Giriş yapmak zorunludur\\n(Bu exam kısmında bitire bastıktan sonra çıkan yerde gözükecek)';\n          }\n          \n          alert(errorMessage);\n          return;\n        }\n        setShowSummary(false);\n        navigate('/rankings');\n      })\n      .catch(err => {\n        console.error('Ranking save error:', err);\n        alert('Failed to save ranking. Network error.');\n      });\n  };\n\n  const prevQuestion = () => {\n    if (current > 0) {\n      setCurrent(c => c - 1);\n      setSelected(answers[current - 1] || null);\n      setShowResult(!!answers[current - 1]);\n      setShowExplanation(false);\n      // If the previous question was already answered, keep timer paused\n      setTimerPaused(!!answers[current - 1]);\n    }\n  };\n\n  return (\n    <Box sx={{ minHeight: '100vh', bgcolor: '#b2ebf2', display: 'flex', alignItems: 'center', justifyContent: 'center', position: 'relative' }}>\n      {/* Timer at top right with pause indicator */}\n      <Box\n        sx={{\n          position: 'fixed',\n          top: 90,\n          right: 32,\n          zIndex: 1000,\n          background: timerPaused \n            ? 'linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)' \n            : 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n          color: '#fff',\n          px: 3,\n          py: 1,\n          borderRadius: 3,\n          fontWeight: 700,\n          fontSize: 18,\n          boxShadow: '0 6px 16px rgba(0, 184, 148, 0.4)',\n          display: 'flex',\n          alignItems: 'center',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          gap: 1,\n          transition: 'background-color 0.3s ease',\n        }}\n      >\n        {timerPaused && <span>⏸️</span>}\n        {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\n      </Box>\n      {/* Navigation buttons outside the card */}\n      <IconButton\n        sx={{\n          position: 'absolute',\n          left: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          background: current > 0 \n            ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.8) 100%)'\n            : 'rgba(255,255,255,0.4)',\n          color: current > 0 ? '#00b894' : '#bdc3c7',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          boxShadow: current > 0 ? '0 8px 25px rgba(0, 184, 148, 0.2)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n          borderRadius: 3,\n          p: 2,\n          cursor: current > 0 ? 'pointer' : 'default',\n          opacity: current > 0 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current > 0 ? 'translateY(-50%) translateX(-3px)' : 'translateY(-50%)',\n            background: current > 0 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)'\n              : 'rgba(255,255,255,0.4)',\n            boxShadow: current > 0 ? '0 12px 30px rgba(0, 184, 148, 0.3)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n          },\n        }}\n        onClick={prevQuestion}\n        disabled={current === 0}\n      >\n        <ArrowBackIcon fontSize=\"large\" />\n      </IconButton>\n      <IconButton\n        sx={{\n          position: 'absolute',\n          right: { xs: 8, md: 32 },\n          top: '50%',\n          transform: 'translateY(-50%)',\n          background: current < questions.length - 1 \n            ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.8) 100%)'\n            : 'rgba(255,255,255,0.4)',\n          color: current < questions.length - 1 ? '#00b894' : '#bdc3c7',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          boxShadow: current < questions.length - 1 ? '0 8px 25px rgba(0, 184, 148, 0.2)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n          borderRadius: 3,\n          p: 2,\n          cursor: current < questions.length - 1 ? 'pointer' : 'default',\n          opacity: current < questions.length - 1 ? 1 : 0.5,\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: current < questions.length - 1 ? 'translateY(-50%) translateX(3px)' : 'translateY(-50%)',\n            background: current < questions.length - 1 \n              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)'\n              : 'rgba(255,255,255,0.4)',\n            boxShadow: current < questions.length - 1 ? '0 12px 30px rgba(0, 184, 148, 0.3)' : '0 4px 15px rgba(0, 0, 0, 0.1)',\n          },\n        }}\n        onClick={nextQuestion}\n        disabled={current === questions.length - 1}\n      >\n        <ArrowForwardIcon fontSize=\"large\" />\n      </IconButton>\n      {!reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: 5, \n            borderRadius: 4, \n            minWidth: 340, \n            maxWidth: 600, \n            width: '100%', \n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length}\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: '1.2rem',\n              lineHeight: 1.6,\n              textAlign: 'center',\n              padding: '16px',\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = selected === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!selected;\n                return (\n                  <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n                      fontSize: 18,\n                      borderRadius: 4,\n                      py: 2,\n                      px: 2,\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)',\n                      color: showColor && isSelected ? '#ffffff' : '#2c3e50',\n                      border: showColor && isSelected\n                        ? 'none'\n                        : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: !selected ? 'translateY(-2px)' : 'none',\n                        background: !showColor \n                          ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)' \n                          : undefined,\n                        boxShadow: !selected \n                          ? '0 8px 25px rgba(0, 184, 148, 0.2)' \n                          : undefined,\n                      },\n                    }}\n                    onClick={() => !showResult && handleSelect(idx)}\n                    disabled={!!selected}\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {opt}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 14,\n                        color: '#ffffff',\n                        background: isCorrect \n                          ? 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)' \n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                        borderRadius: 12,\n                        padding: '4px 12px',\n                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? '✓ Doğru' : '✗ Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {showResult && (\n            <Box sx={{ mb: 2 }}>\n              <Typography color={compareAnswers(selected || '', q.correct) ? 'success.main' : 'error.main'} fontWeight={700} mb={1}>\n                {compareAnswers(selected || '', q.correct) ? 'Doğru!' : `Doğru Yanıt: ${getCorrectAnswerText()}`}\n              </Typography>\n              <Button variant=\"text\" onClick={() => setShowExplanation(e => !e)}>\n                {showExplanation ? 'Çözümü Gizle' : 'Çözümü Göster'}\n              </Button>\n              {showExplanation && (\n                <Typography mt={2} color=\"text.secondary\">{q.explanation}</Typography>\n              )}\n            </Box>\n          )}\n          {/* Bitir button, only show if not finished */}\n          {!showSummary && (\n            <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                sx={{ fontWeight: 700, fontSize: 18, borderRadius: 3, px: 4, py: 1.5, boxShadow: 2, textTransform: 'none' }}\n                onClick={handleFinish}\n              >\n                Bitir\n              </Button>\n            </Box>\n          )}\n        </Paper>\n      )}\n      {/* Result popup bubble with question review */}\n      {showSummary && (\n        <Box sx={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', bgcolor: 'rgba(10,29,86,0.7)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <Box sx={{ bgcolor: '#fff', borderRadius: 6, boxShadow: 8, p: 4, minWidth: 320, maxWidth: '90vw', textAlign: 'center', position: 'relative' }}>\n            <Typography variant=\"h5\" fontWeight={700} color=\"#19376D\" mb={2}>Sınav Sonucu</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#43ea7c\" mb={1}>Doğru: {score}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#e74c3c\" mb={1}>Yanlış: {mistakes}</Typography>\n            <Typography fontSize={20} fontWeight={600} color=\"#f39c12\" mb={1}>Boş: {answers.filter(answer => answer === null || answer === undefined || answer === '').length}</Typography>\n            <Typography fontSize={18} fontWeight={500} color=\"#19376D\" mb={2}>Süre: {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}</Typography>\n            {/* Question review list */}\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, justifyContent: 'center', mb: 3 }}>\n              {questions.map((question, idx) => {\n                const userAnswer = answers[idx];\n                const isUnanswered = userAnswer === null || userAnswer === undefined || userAnswer === '';\n                const isCorrect = !isUnanswered && compareAnswers(userAnswer, question.correct);\n                \n                // Determine colors based on answer status\n                let borderColor, textColor, backgroundColor, hoverColor;\n                if (isUnanswered) {\n                  // Boş bırakılan sorular - turuncu\n                  borderColor = '#f39c12';\n                  textColor = '#f39c12';\n                  backgroundColor = '#fdf6e3';\n                  hoverColor = '#f8e49a';\n                } else if (isCorrect) {\n                  // Doğru cevaplar - yeşil\n                  borderColor = '#43ea7c';\n                  textColor = '#43ea7c';\n                  backgroundColor = '#eafaf3';\n                  hoverColor = '#c6f7e2';\n                } else {\n                  // Yanlış cevaplar - kırmızı\n                  borderColor = '#e74c3c';\n                  textColor = '#e74c3c';\n                  backgroundColor = '#fff0f0';\n                  hoverColor = '#ffe3e3';\n                }\n                \n                return (\n                  <Button\n                    key={idx}\n                    variant=\"outlined\"\n                    sx={{\n                      minWidth: 48,\n                      height: 48,\n                      fontWeight: 700,\n                      fontSize: 18,\n                      borderRadius: 3,\n                      border: 'none',\n                      color: '#ffffff',\n                      background: !answers[idx] \n                        ? 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)'\n                        : isCorrect\n                          ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                          : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',\n                      mx: 0.5,\n                      my: 0.5,\n                      transition: 'all 0.3s ease',\n                      '&:hover': {\n                        transform: 'translateY(-3px)',\n                        boxShadow: '0 8px 25px rgba(0, 0, 0, 0.2)',\n                      },\n                    }}\n                    onClick={() => {\n                      setReviewMode(true);\n                      setShowSummary(false);\n                      setCurrent(idx);\n                      setSelected(answers[idx] || null);\n                      setShowResult(!!answers[idx]);\n                      setShowExplanation(false);\n                    }}\n                  >\n                    {idx + 1}\n                  </Button>\n                );\n              })}\n            </Box>\n            <Typography fontSize={15} color=\"#19376D\" mb={2}>\n              Soruları incelemek için tıklayın. Yeşil: Doğru, Kırmızı: Yanlış, Turuncu: Boş\n            </Typography>\n            {/* Action buttons */}\n            <Box sx={{ display: 'flex', justifyContent: 'center', gap: 2, mt: 2, flexWrap: 'wrap' }}>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={handleAddRanking}\n              >\n                Sıralamaya Ekle\n              </Button>\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  navigate('/categories');\n                }}\n              >\n                Kapat\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n                onClick={() => {\n                  handleCloseSummary();\n                }}\n              >\n                Tekrar Çöz\n              </Button>\n            </Box>\n            {/* Login warning text */}\n            {!localStorage.getItem('token') && (\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  display: 'block',\n                  textAlign: 'center', \n                  mt: 1, \n                  fontSize: '0.75rem',\n                  color: '#666',\n                  fontStyle: 'italic'\n                }}\n              >\n                Sıralamaya eklemek için üye girişi gerekli veya kayıt olmalısınız\n              </Typography>\n            )}\n          </Box>\n        </Box>\n      )}\n      {reviewMode && (\n        <Paper \n          elevation={6} \n          sx={{ \n            p: 5, \n            borderRadius: 4, \n            minWidth: 340, \n            maxWidth: 600, \n            width: '100%', \n            background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n            transition: 'transform 0.3s ease',\n            '&:hover': {\n              transform: 'translateY(-5px)',\n            }\n          }}\n        >\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', mb: 2 }}>\n            <Typography \n              variant=\"h5\" \n              fontWeight={700} \n              align=\"center\"\n              sx={{\n                background: 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)',\n                backgroundClip: 'text',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n              }}\n            >\n              Soru {current + 1} / {questions.length} (İnceleme)\n            </Typography>\n          </Box>\n          <Typography \n            variant=\"h6\" \n            mb={3}\n            sx={{\n              color: '#2c3e50',\n              fontWeight: 600,\n              fontSize: '1.2rem',\n              lineHeight: 1.6,\n              textAlign: 'center',\n              padding: '16px',\n              background: 'rgba(255, 255, 255, 0.7)',\n              borderRadius: '12px',\n              border: '1px solid rgba(0, 184, 148, 0.2)',\n            }}\n          >\n            {q.text}\n          </Typography>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>\n            {options.length > 0 ? (\n              options.map((opt, idx) => {\n                const optionLetter = String.fromCharCode(65 + idx); // A, B, C, D\n                const isSelected = answers[current] === optionLetter;\n                const isCorrect = compareAnswers(optionLetter, q.correct);\n                const showColor = !!answers[current];\n                return (\n                  <Button\n                    key={idx}\n                    variant={isSelected ? 'contained' : 'outlined'}\n                    color={showColor ? (isCorrect ? 'primary' : isSelected ? 'error' : 'primary') : 'primary'}\n                    sx={{\n                      textAlign: 'left',\n                      fontWeight: 600,\n                      fontSize: 18,\n                      borderRadius: 4,\n                      py: 2,\n                      px: 2,\n                      background: !showColor \n                        ? 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'\n                        : isSelected\n                          ? (isCorrect\n                              ? 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)'\n                              : 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)')\n                          : (isCorrect\n                              ? 'linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 206, 201, 0.1) 100%)'\n                              : 'linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%)'),\n                      color: showColor && isSelected ? '#ffffff' : isCorrect && showColor ? '#00b894' : '#2c3e50',\n                      border: isCorrect && showColor && !isSelected\n                        ? '2px solid #00b894'\n                        : showColor && isSelected\n                          ? 'none'\n                          : '2px solid rgba(0, 184, 148, 0.3)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: isSelected \n                        ? '0 8px 25px rgba(0, 184, 148, 0.3)' \n                        : isCorrect && showColor\n                          ? '0 4px 15px rgba(0, 184, 148, 0.2)'\n                          : '0 4px 15px rgba(0, 0, 0, 0.1)',\n                      position: 'relative',\n                      transition: 'all 0.3s ease',\n                      pointerEvents: 'none',\n                    }}\n                    disabled\n                  >\n                    <span style={{ position: 'relative', zIndex: 2 }}>{String.fromCharCode(65 + idx)}) {opt}</span>\n                    {showColor && isSelected && (\n                      <span style={{\n                        position: 'absolute',\n                        right: 16,\n                        top: '50%',\n                        transform: 'translateY(-50%)',\n                        fontWeight: 700,\n                        fontSize: 18,\n                        color: isCorrect ? '#43ea7c' : '#e74c3c',\n                        background: isCorrect ? '#eafaf3' : '#fff0f0',\n                        borderRadius: 8,\n                        padding: '2px 12px',\n                        boxShadow: '0 2px 8px rgba(67,234,124,0.08)',\n                        zIndex: 3,\n                      }}>\n                        {isCorrect ? 'Doğru' : 'Yanlış'}\n                      </span>\n                    )}\n                  </Button>\n                );\n              })\n            ) : (\n              <Typography color=\"error\" fontWeight={600} mb={2}>Bu sorunun seçenekleri eksik veya hatalı.</Typography>\n            )}\n          </Box>\n          {/* Show explanation toggle and content in review mode */}\n          {!!q.explanation && (\n            <Box sx={{ mb: 2 }}>\n              <Button variant=\"text\" onClick={() => setShowExplanation(e => !e)}>\n                {showExplanation ? 'Çözümü Gizle' : 'Çözümü Göster'}\n              </Button>\n              {showExplanation && (\n                <Typography mt={2} color=\"text.secondary\">{q.explanation}</Typography>\n              )}\n            </Box>\n          )}\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              sx={{ fontWeight: 700, fontSize: 16, borderRadius: 3, px: 4, py: 1.2, boxShadow: 2, textTransform: 'none' }}\n              onClick={() => {\n                setReviewMode(false);\n                setShowSummary(true);\n                setShowExplanation(false);\n              }}\n            >\n              Sonuçlara Dön\n            </Button>\n          </Box>\n        </Paper>\n      )}\n    </Box>\n  );\n};\n\nexport default Exam;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}